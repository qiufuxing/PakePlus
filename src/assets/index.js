var mS=Object.defineProperty,bS=Object.defineProperties;var yS=Object.getOwnPropertyDescriptors;var T0=Object.getOwnPropertySymbols,wS=Object.getPrototypeOf,vS=Object.prototype.hasOwnProperty,AS=Object.prototype.propertyIsEnumerable,_S=Reflect.get;var P0=(at,rt)=>(rt=Symbol[at])?rt:Symbol.for("Symbol."+at),k0=at=>{throw TypeError(at)},we=Math.pow,Lp=(at,rt,pt)=>rt in at?mS(at,rt,{enumerable:!0,configurable:!0,writable:!0,value:pt}):at[rt]=pt,Ks=(at,rt)=>{for(var pt in rt||(rt={}))vS.call(rt,pt)&&Lp(at,pt,rt[pt]);if(T0)for(var pt of T0(rt))AS.call(rt,pt)&&Lp(at,pt,rt[pt]);return at},Bn=(at,rt)=>bS(at,yS(rt));var z=(at,rt,pt)=>Lp(at,typeof rt!="symbol"?rt+"":rt,pt),Dp=(at,rt,pt)=>rt.has(at)||k0("Cannot "+pt);var a=(at,rt,pt)=>(Dp(at,rt,"read from private field"),pt?pt.call(at):rt.get(at)),b=(at,rt,pt)=>rt.has(at)?k0("Cannot add the same private member more than once"):rt instanceof WeakSet?rt.add(at):rt.set(at,pt),g=(at,rt,pt,vt)=>(Dp(at,rt,"write to private field"),vt?vt.call(at,pt):rt.set(at,pt),pt),w=(at,rt,pt)=>(Dp(at,rt,"access private method"),pt);var Ze=(at,rt,pt,vt)=>({set _(es){g(at,rt,es,pt)},get _(){return a(at,rt,vt)}}),Hn=(at,rt,pt)=>_S(wS(at),pt,rt);var V=(at,rt,pt)=>new Promise((vt,es)=>{var ve=ss=>{try{bi(pt.next(ss))}catch(Gt){es(Gt)}},$l=ss=>{try{bi(pt.throw(ss))}catch(Gt){es(Gt)}},bi=ss=>ss.done?vt(ss.value):Promise.resolve(ss.value).then(ve,$l);bi((pt=pt.apply(at,rt)).next())});var R0=(at,rt,pt)=>(rt=at[P0("asyncIterator")])?rt.call(at):(at=at[P0("iterator")](),rt={},pt=(vt,es)=>(es=at[vt])&&(rt[vt]=ve=>new Promise(($l,bi,ss)=>(ve=es.call(at,ve),ss=ve.done,Promise.resolve(ve.value).then(Gt=>$l({value:Gt,done:ss}),bi)))),pt("next"),pt("return"),rt);(function(){"use strict";var nn,_u,Fp,wc,tr,eo,Bs,er,vc,Ta,Ac,su,I0,Ce,M0,L0,Gh,D0,xu,_c,so,io,sr,F0,N0,O0,iu,Pa,xc,Oe,ka,Su,te,ir,Sc,Yt,nu,B0,Ra,bs,ae,Te,Ia,on,Ma,Hs,nr,rr,La,no,Ci,si,ro,Ec,Cc,Da,Tc,Ti,or,Fa,ar,Pi,ou,lr,Pc,cr,oo,ao,hr,kc,fe,It,an,dr,lo,Rc,Ic,ur,ki,ln,Mc,$s,X,Eu,Np,H0,$0,Cu,U0,j0,z0,Op,G0,Bp,Hp,V0,ts,$n,W0,q0,$p,X0,Vh,Up,pe,Ri,ii,Oa,Ii,ys,Ba,Mi,os,cn,co,Li,fr,ni,Wh,Tu,Ha,ho,Lc,Dc,Fc,Nc,Oc,hn,uo,dn,fo,un,pr,K0,Y0,J0,po,ri,zt,$a,gr,Bc,go,Pe,mo,fn,mr,Hc,bo,ws,$c,yo,pn,Di,Ua,ja,Us,wo,Uc,au,ot,jp,jc,zp,Pu,Q0,Z0,Gp,ku,Vp,ty,ey,sy,Wp,iy,qp,ny,ry,oy,Xp,qh,vo,Ao,ke,lu,ay,zc,za,Ga,js,ly,cy,hy,Ru,Gc,_o,Va,gn,mn,Be,xo,So,J,je,Xh,Fl,Iu,Nl,dy,Kp,Ol,Kh,Yh,Yp,Jh,oi,Jp,Qp,Zp,Vc,Wc,Wa,qc,Xc,Kc,Yc,qa,br,Ft,Xa,Ka,Jc,tg,S0,yr,as,Qc,Zc,Eo,bn,th,eh,Co,Ya,Ja,wr,Qa,sh,Za,To,ih,nh,tl,Po,rh,vr,el,yn,uy,fy,eg,vs,Mu,sg,py,gy,hu,wn,ko,Qh,vn,uu,fu,Ro,Io,sl,Lu,il,Du,An,Fi,nl,rl,_n,Mo,Zh,As,oh,ig,Ar,_r,Lo,Fo,ol,al,ah,ng,_s,la,my,by,ll,pu,gu,cl,hl,Qt,xn,dl,lh,ch,ul,Sn,ai,En,hh,Cn,dh,No,Oo,Nt,Fu,rg,yy,wy,vy,Ay,Nu,Ou,og,uh,fh,ph,gh,mh,Bo,bh,ag,yh,wh,lg,vh,Ho,xr,Ah,Sr,cg,hg,li,xs,_h,$o,Ss,oe,_y,xy,Sy,Bu,Tn,Hu,$u,Ey,dg,Cy,Es,ci,fl,pl,Ni,yt,Uo,jo,xh,Sh,gl,ml,Er,Eh,mu,bu,ce,td,Ty,Py,ky,Ry,Iy,My,bl,zo,kn,Ch,Cs,Th,ee,yu,Ly,Ph,kh,Cr,hi,Xe,Dy,Uu,Fy,Ny,ug,Rh,yl,di,Go,wl,he,Ih,vl,Mh,Lh,Tr,ui,Al,Dh,Ot,fg,pg,gg,ca,Oy,$r,_l,Fh,Rn,Vo,xl,cs,Nh,Oh,Wo,zs,Ts,Re,Sl,In,He,El,Gs,Bh,mt,mg,ju,By,Hy,$y,bg,ha,Vs,Bl,Uy,zu,ed,jy,zy,Gy,Vy,Wy,qo,Ps,Cl,ge,Xo,Ko,Pr,kr,Rr,Yo,Et,yg,wg,vg,sd,qy,Gu,id,Hl,Oi,me,be,Jo,Tl,Ke,Ie,Ws,Qo,Zo,ta,Pl,Vu,Ye,Hh,$h,ks,Bi,Hi,kl,Rl,ea,Me,Un,Xy,Ky,Yy,wu,Jy,ia,Rt,Ag,fi,Qy,Zy,_g,Wu,tw,ew,sw,xg,Sg,iw,Ir,Rs,Mr,Lr,qt,ye,Dr,Mn,Fr,Il,Ln,na,$i,Is,Ml,Ct,nd,rd,qu,Xu,Ku,Eg,Yu,nw,ra,Ll,Ui,Nr,Dn,qs,Or,Dl,oa,pi,Fn,$e,Nn,st,Br,Xt,rw,qi,Cg,Tg,Ju,mi,Qe,aa,jh,vu,ow,ji,Pg,aw,kg;var at=document.createElement("style");at.textContent=`/*! tailwindcss v4.1.7 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% .032 17.717);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-800:oklch(44.4% .177 26.899);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-800:oklch(44.8% .119 151.328);--color-green-900:oklch(39.3% .095 152.535);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-800:oklch(42.4% .199 265.638);--color-blue-900:oklch(37.9% .146 265.522);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-900:oklch(38.1% .176 304.987);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-4xl:56rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wider:.05em;--radius-lg:.5rem;--animate-spin:spin 1s linear infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.invisible{visibility:hidden}.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.right-4{right:calc(var(--spacing)*4)}.bottom-4{bottom:calc(var(--spacing)*4)}.z-50{z-index:50}.mx-auto{margin-inline:auto}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.block{display:block}.flex{display:flex}.hidden{display:none}.inline{display:inline}.inline-flex{display:inline-flex}.table{display:table}.h-2{height:calc(var(--spacing)*2)}.h-6{height:calc(var(--spacing)*6)}.h-12{height:calc(var(--spacing)*12)}.min-h-screen{min-height:100vh}.w-6{width:calc(var(--spacing)*6)}.w-12{width:calc(var(--spacing)*12)}.w-full{width:100%}.max-w-4xl{max-width:var(--container-4xl)}.max-w-xs{max-width:var(--container-xs)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-spin{animation:var(--animate-spin)}.cursor-help{cursor:help}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-1>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*1)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-gray-200>:not(:last-child)){border-color:var(--color-gray-200)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-x-auto{overflow-x:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-blue-400{border-color:var(--color-blue-400)}.border-blue-500{border-color:var(--color-blue-500)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-green-500{background-color:var(--color-green-500)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-red-100{background-color:var(--color-red-100)}.bg-red-500{background-color:var(--color-red-500)}.bg-white{background-color:var(--color-white)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-8{padding-block:calc(var(--spacing)*8)}.text-center{text-align:center}.text-left{text-align:left}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.whitespace-nowrap{white-space:nowrap}.text-blue-500{color:var(--color-blue-500)}.text-blue-600{color:var(--color-blue-600)}.text-blue-800{color:var(--color-blue-800)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-800{color:var(--color-green-800)}.text-purple-600{color:var(--color-purple-600)}.text-red-500{color:var(--color-red-500)}.text-red-800{color:var(--color-red-800)}.text-white{color:var(--color-white)}.uppercase{text-transform:uppercase}.italic{font-style:italic}.line-through{text-decoration-line:line-through}.overline{text-decoration-line:overline}.underline{text-decoration-line:underline}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}@media (hover:hover){.hover\\:border-blue-400:hover{border-color:var(--color-blue-400)}.hover\\:bg-blue-100:hover{background-color:var(--color-blue-100)}.hover\\:bg-blue-600:hover{background-color:var(--color-blue-600)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-green-100:hover{background-color:var(--color-green-100)}.hover\\:bg-green-600:hover{background-color:var(--color-green-600)}.hover\\:bg-purple-100:hover{background-color:var(--color-purple-100)}.hover\\:bg-purple-600:hover{background-color:var(--color-purple-600)}.hover\\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\\:text-blue-900:hover{color:var(--color-blue-900)}.hover\\:text-green-900:hover{color:var(--color-green-900)}.hover\\:text-purple-900:hover{color:var(--color-purple-900)}}}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}.fade-enter-active[data-v-3474437b]{transition:all .3s ease}.fade-enter-from[data-v-3474437b]{opacity:0;transform:translateY(-10px)}.fade-enter-to[data-v-3474437b]{opacity:1;transform:translateY(0)}
/*$vite$:1*/`,document.head.appendChild(at);var rt=typeof document!="undefined"?document.currentScript:null;/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function pt(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const vt={},es=[],ve=()=>{},$l=()=>!1,bi=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),ss=n=>n.startsWith("onUpdate:"),Gt=Object.assign,Qu=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},lw=Object.prototype.hasOwnProperty,kt=(n,t)=>lw.call(n,t),ct=Array.isArray,da=n=>od(n)==="[object Map]",Rg=n=>od(n)==="[object Set]",gt=n=>typeof n=="function",Jt=n=>typeof n=="string",jn=n=>typeof n=="symbol",Vt=n=>n!==null&&typeof n=="object",Ig=n=>(Vt(n)||gt(n))&&gt(n.then)&&gt(n.catch),Mg=Object.prototype.toString,od=n=>Mg.call(n),cw=n=>od(n).slice(8,-1),Lg=n=>od(n)==="[object Object]",Zu=n=>Jt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ul=pt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ad=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},hw=/-(\w)/g,zn=ad(n=>n.replace(hw,(t,e)=>e?e.toUpperCase():"")),dw=/\B([A-Z])/g,Ur=ad(n=>n.replace(dw,"-$1").toLowerCase()),Dg=ad(n=>n.charAt(0).toUpperCase()+n.slice(1)),tf=ad(n=>n?`on${Dg(n)}`:""),Gn=(n,t)=>!Object.is(n,t),ef=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},Fg=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},uw=n=>{const t=parseFloat(n);return isNaN(t)?n:t},fw=n=>{const t=Jt(n)?Number(n):NaN;return isNaN(t)?n:t};let Ng;const ld=()=>Ng||(Ng=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function cd(n){if(ct(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=Jt(s)?bw(s):cd(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Jt(n)||Vt(n))return n}const pw=/;(?![^(]*\))/g,gw=/:([^]+)/,mw=/\/\*[^]*?\*\//g;function bw(n){const t={};return n.replace(mw,"").split(pw).forEach(e=>{if(e){const s=e.split(gw);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function hd(n){let t="";if(Jt(n))t=n;else if(ct(n))for(let e=0;e<n.length;e++){const s=hd(n[e]);s&&(t+=s+" ")}else if(Vt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const yw=pt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Og(n){return!!n||n===""}const Bg=n=>!!(n&&n.__v_isRef===!0),us=n=>Jt(n)?n:n==null?"":ct(n)||Vt(n)&&(n.toString===Mg||!gt(n.toString))?Bg(n)?us(n.value):JSON.stringify(n,Hg,2):String(n),Hg=(n,t)=>Bg(t)?Hg(n,t.value):da(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[sf(s,r)+" =>"]=i,e),{})}:Rg(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>sf(e))}:jn(t)?sf(t):Vt(t)&&!ct(t)&&!Lg(t)?String(t):t,sf=(n,t="")=>{var e;return jn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let is;class ww{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=is,!t&&is&&(this.index=(is.scopes||(is.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=is;try{return is=this,t()}finally{is=e}}}on(){++this._on===1&&(this.prevScope=is,is=this)}off(){this._on>0&&--this._on===0&&(is=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function vw(){return is}let $t;const nf=new WeakSet;class $g{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,is&&is.active&&is.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nf.has(this)&&(nf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qg(this),zg(this);const t=$t,e=Ys;$t=this,Ys=!0;try{return this.fn()}finally{Gg(this),$t=t,Ys=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)lf(t);this.deps=this.depsTail=void 0,qg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){af(this)&&this.run()}get dirty(){return af(this)}}let Ug=0,jl,zl;function jg(n,t=!1){if(n.flags|=8,t){n.next=zl,zl=n;return}n.next=jl,jl=n}function rf(){Ug++}function of(){if(--Ug>0)return;if(zl){let t=zl;for(zl=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;jl;){let t=jl;for(jl=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function zg(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gg(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),lf(s),Aw(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function af(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Vg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Vg(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Gl)||(n.globalVersion=Gl,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!af(n))))return;n.flags|=2;const t=n.dep,e=$t,s=Ys;$t=n,Ys=!0;try{zg(n);const i=n.fn(n._value);(t.version===0||Gn(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{$t=e,Ys=s,Gg(n),n.flags&=-3}}function lf(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)lf(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Aw(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Ys=!0;const Wg=[];function yi(){Wg.push(Ys),Ys=!1}function wi(){const n=Wg.pop();Ys=n===void 0?!0:n}function qg(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=$t;$t=void 0;try{t()}finally{$t=e}}}let Gl=0;class _w{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class cf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!$t||!Ys||$t===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==$t)e=this.activeLink=new _w($t,this),$t.deps?(e.prevDep=$t.depsTail,$t.depsTail.nextDep=e,$t.depsTail=e):$t.deps=$t.depsTail=e,Xg(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=$t.depsTail,e.nextDep=void 0,$t.depsTail.nextDep=e,$t.depsTail=e,$t.deps===e&&($t.deps=s)}return e}trigger(t){this.version++,Gl++,this.notify(t)}notify(t){rf();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{of()}}}function Xg(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Xg(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const hf=new WeakMap,jr=Symbol(""),df=Symbol(""),Vl=Symbol("");function Le(n,t,e){if(Ys&&$t){let s=hf.get(n);s||hf.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new cf),i.map=s,i.key=e),i.track()}}function Xi(n,t,e,s,i,r){const o=hf.get(n);if(!o){Gl++;return}const l=c=>{c&&c.trigger()};if(rf(),t==="clear")o.forEach(l);else{const c=ct(n),h=c&&Zu(e);if(c&&e==="length"){const d=Number(s);o.forEach((u,f)=>{(f==="length"||f===Vl||!jn(f)&&f>=d)&&l(u)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(Vl)),t){case"add":c?h&&l(o.get("length")):(l(o.get(jr)),da(n)&&l(o.get(df)));break;case"delete":c||(l(o.get(jr)),da(n)&&l(o.get(df)));break;case"set":da(n)&&l(o.get(jr));break}}of()}function ua(n){const t=xt(n);return t===n?t:(Le(t,"iterate",Vl),Ds(n)?t:t.map(Ae))}function dd(n){return Le(n=xt(n),"iterate",Vl),n}const xw={__proto__:null,[Symbol.iterator](){return uf(this,Symbol.iterator,Ae)},concat(...n){return ua(this).concat(...n.map(t=>ct(t)?ua(t):t))},entries(){return uf(this,"entries",n=>(n[1]=Ae(n[1]),n))},every(n,t){return Ki(this,"every",n,t,void 0,arguments)},filter(n,t){return Ki(this,"filter",n,t,e=>e.map(Ae),arguments)},find(n,t){return Ki(this,"find",n,t,Ae,arguments)},findIndex(n,t){return Ki(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Ki(this,"findLast",n,t,Ae,arguments)},findLastIndex(n,t){return Ki(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Ki(this,"forEach",n,t,void 0,arguments)},includes(...n){return ff(this,"includes",n)},indexOf(...n){return ff(this,"indexOf",n)},join(n){return ua(this).join(n)},lastIndexOf(...n){return ff(this,"lastIndexOf",n)},map(n,t){return Ki(this,"map",n,t,void 0,arguments)},pop(){return Wl(this,"pop")},push(...n){return Wl(this,"push",n)},reduce(n,...t){return Kg(this,"reduce",n,t)},reduceRight(n,...t){return Kg(this,"reduceRight",n,t)},shift(){return Wl(this,"shift")},some(n,t){return Ki(this,"some",n,t,void 0,arguments)},splice(...n){return Wl(this,"splice",n)},toReversed(){return ua(this).toReversed()},toSorted(n){return ua(this).toSorted(n)},toSpliced(...n){return ua(this).toSpliced(...n)},unshift(...n){return Wl(this,"unshift",n)},values(){return uf(this,"values",Ae)}};function uf(n,t,e){const s=dd(n),i=s[t]();return s!==n&&!Ds(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=e(r.value)),r}),i}const Sw=Array.prototype;function Ki(n,t,e,s,i,r){const o=dd(n),l=o!==n&&!Ds(n),c=o[t];if(c!==Sw[t]){const u=c.apply(n,r);return l?Ae(u):u}let h=e;o!==n&&(l?h=function(u,f){return e.call(this,Ae(u),f,n)}:e.length>2&&(h=function(u,f){return e.call(this,u,f,n)}));const d=c.call(o,h,s);return l&&i?i(d):d}function Kg(n,t,e,s){const i=dd(n);let r=e;return i!==n&&(Ds(n)?e.length>3&&(r=function(o,l,c){return e.call(this,o,l,c,n)}):r=function(o,l,c){return e.call(this,o,Ae(l),c,n)}),i[t](r,...s)}function ff(n,t,e){const s=xt(n);Le(s,"iterate",Vl);const i=s[t](...e);return(i===-1||i===!1)&&mf(e[0])?(e[0]=xt(e[0]),s[t](...e)):i}function Wl(n,t,e=[]){yi(),rf();const s=xt(n)[t].apply(n,e);return of(),wi(),s}const Ew=pt("__proto__,__v_isRef,__isVue"),Yg=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(jn));function Cw(n){jn(n)||(n=String(n));const t=xt(this);return Le(t,"has",n),t.hasOwnProperty(n)}class Jg{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?im:sm:r?em:tm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=ct(t);if(!i){let c;if(o&&(c=xw[e]))return c;if(e==="hasOwnProperty")return Cw}const l=Reflect.get(t,e,_e(t)?t:s);return(jn(e)?Yg.has(e):Ew(e))||(i||Le(t,"get",e),r)?l:_e(l)?o&&Zu(e)?l:l.value:Vt(l)?i?nm(l):gf(l):l}}class Qg extends Jg{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];if(!this._isShallow){const c=Vn(r);if(!Ds(s)&&!Vn(s)&&(r=xt(r),s=xt(s)),!ct(t)&&_e(r)&&!_e(s))return c?!1:(r.value=s,!0)}const o=ct(t)&&Zu(e)?Number(e)<t.length:kt(t,e),l=Reflect.set(t,e,s,_e(t)?t:i);return t===xt(i)&&(o?Gn(s,r)&&Xi(t,"set",e,s):Xi(t,"add",e,s)),l}deleteProperty(t,e){const s=kt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&Xi(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!jn(e)||!Yg.has(e))&&Le(t,"has",e),s}ownKeys(t){return Le(t,"iterate",ct(t)?"length":jr),Reflect.ownKeys(t)}}class Zg extends Jg{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Tw=new Qg,Pw=new Zg,kw=new Qg(!0),Rw=new Zg(!0),pf=n=>n,ud=n=>Reflect.getPrototypeOf(n);function Iw(n,t,e){return function(...s){const i=this.__v_raw,r=xt(i),o=da(r),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=i[n](...s),d=e?pf:t?md:Ae;return!t&&Le(r,"iterate",c?df:jr),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:l?[d(u[0]),d(u[1])]:d(u),done:f}},[Symbol.iterator](){return this}}}}function fd(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Mw(n,t){const e={get(i){const r=this.__v_raw,o=xt(r),l=xt(i);n||(Gn(i,l)&&Le(o,"get",i),Le(o,"get",l));const{has:c}=ud(o),h=t?pf:n?md:Ae;if(c.call(o,i))return h(r.get(i));if(c.call(o,l))return h(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&Le(xt(i),"iterate",jr),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=xt(r),l=xt(i);return n||(Gn(i,l)&&Le(o,"has",i),Le(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,c=xt(l),h=t?pf:n?md:Ae;return!n&&Le(c,"iterate",jr),l.forEach((d,u)=>i.call(r,h(d),h(u),o))}};return Gt(e,n?{add:fd("add"),set:fd("set"),delete:fd("delete"),clear:fd("clear")}:{add(i){!t&&!Ds(i)&&!Vn(i)&&(i=xt(i));const r=xt(this);return ud(r).has.call(r,i)||(r.add(i),Xi(r,"add",i,i)),this},set(i,r){!t&&!Ds(r)&&!Vn(r)&&(r=xt(r));const o=xt(this),{has:l,get:c}=ud(o);let h=l.call(o,i);h||(i=xt(i),h=l.call(o,i));const d=c.call(o,i);return o.set(i,r),h?Gn(r,d)&&Xi(o,"set",i,r):Xi(o,"add",i,r),this},delete(i){const r=xt(this),{has:o,get:l}=ud(r);let c=o.call(r,i);c||(i=xt(i),c=o.call(r,i)),l&&l.call(r,i);const h=r.delete(i);return c&&Xi(r,"delete",i,void 0),h},clear(){const i=xt(this),r=i.size!==0,o=i.clear();return r&&Xi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Iw(i,n,t)}),e}function pd(n,t){const e=Mw(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(kt(e,i)&&i in s?e:s,i,r)}const Lw={get:pd(!1,!1)},Dw={get:pd(!1,!0)},Fw={get:pd(!0,!1)},Nw={get:pd(!0,!0)},tm=new WeakMap,em=new WeakMap,sm=new WeakMap,im=new WeakMap;function Ow(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bw(n){return n.__v_skip||!Object.isExtensible(n)?0:Ow(cw(n))}function gf(n){return Vn(n)?n:gd(n,!1,Tw,Lw,tm)}function Hw(n){return gd(n,!1,kw,Dw,em)}function nm(n){return gd(n,!0,Pw,Fw,sm)}function SS(n){return gd(n,!0,Rw,Nw,im)}function gd(n,t,e,s,i){if(!Vt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=Bw(n);if(r===0)return n;const o=i.get(n);if(o)return o;const l=new Proxy(n,r===2?s:e);return i.set(n,l),l}function fa(n){return Vn(n)?fa(n.__v_raw):!!(n&&n.__v_isReactive)}function Vn(n){return!!(n&&n.__v_isReadonly)}function Ds(n){return!!(n&&n.__v_isShallow)}function mf(n){return n?!!n.__v_raw:!1}function xt(n){const t=n&&n.__v_raw;return t?xt(t):n}function $w(n){return!kt(n,"__v_skip")&&Object.isExtensible(n)&&Fg(n,"__v_skip",!0),n}const Ae=n=>Vt(n)?gf(n):n,md=n=>Vt(n)?nm(n):n;function _e(n){return n?n.__v_isRef===!0:!1}function Yi(n){return Uw(n,!1)}function Uw(n,t){return _e(n)?n:new jw(n,t)}class jw{constructor(t,e){this.dep=new cf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:xt(t),this._value=e?t:Ae(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Ds(t)||Vn(t);t=s?t:xt(t),Gn(t,e)&&(this._rawValue=t,this._value=s?t:Ae(t),this.dep.trigger())}}function zw(n){return _e(n)?n.value:n}const Gw={get:(n,t,e)=>t==="__v_raw"?n:zw(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return _e(i)&&!_e(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function rm(n){return fa(n)?n:new Proxy(n,Gw)}class Vw{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new cf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Gl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return jg(this,!0),!0}get value(){const t=this.dep.track();return Vg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ww(n,t,e=!1){let s,i;return gt(n)?s=n:(s=n.get,i=n.set),new Vw(s,i,e)}const bd={},yd=new WeakMap;let zr;function qw(n,t=!1,e=zr){if(e){let s=yd.get(e);s||yd.set(e,s=[]),s.push(n)}}function Xw(n,t,e=vt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:c}=e,h=_=>i?_:Ds(_)||i===!1||i===0?Wn(_,1):Wn(_);let d,u,f,p,y=!1,m=!1;if(_e(n)?(u=()=>n.value,y=Ds(n)):fa(n)?(u=()=>h(n),y=!0):ct(n)?(m=!0,y=n.some(_=>fa(_)||Ds(_)),u=()=>n.map(_=>{if(_e(_))return _.value;if(fa(_))return h(_);if(gt(_))return c?c(_,2):_()})):gt(n)?t?u=c?()=>c(n,2):n:u=()=>{if(f){yi();try{f()}finally{wi()}}const _=zr;zr=d;try{return c?c(n,3,[p]):n(p)}finally{zr=_}}:u=ve,t&&i){const _=u,T=i===!0?1/0:i;u=()=>Wn(_(),T)}const v=vw(),A=()=>{d.stop(),v&&v.active&&Qu(v.effects,d)};if(r&&t){const _=t;t=(...T)=>{_(...T),A()}}let x=m?new Array(n.length).fill(bd):bd;const E=_=>{if(!(!(d.flags&1)||!d.dirty&&!_))if(t){const T=d.run();if(i||y||(m?T.some((P,k)=>Gn(P,x[k])):Gn(T,x))){f&&f();const P=zr;zr=d;try{const k=[T,x===bd?void 0:m&&x[0]===bd?[]:x,p];c?c(t,3,k):t(...k),x=T}finally{zr=P}}}else d.run()};return l&&l(E),d=new $g(u),d.scheduler=o?()=>o(E,!1):E,p=_=>qw(_,!1,d),f=d.onStop=()=>{const _=yd.get(d);if(_){if(c)c(_,4);else for(const T of _)T();yd.delete(d)}},t?s?E(!0):x=d.run():o?o(E.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function Wn(n,t=1/0,e){if(t<=0||!Vt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,_e(n))Wn(n.value,t,e);else if(ct(n))for(let s=0;s<n.length;s++)Wn(n[s],t,e);else if(Rg(n)||da(n))n.forEach(s=>{Wn(s,t,e)});else if(Lg(n)){for(const s in n)Wn(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Wn(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ql=[];let bf=!1;function ES(n,...t){if(bf)return;bf=!0,yi();const e=ql.length?ql[ql.length-1].component:null,s=e&&e.appContext.config.warnHandler,i=Kw();if(s)pa(s,e,11,[n+t.map(r=>{var o,l;return(l=(o=r.toString)==null?void 0:o.call(r))!=null?l:JSON.stringify(r)}).join(""),e&&e.proxy,i.map(({vnode:r})=>`at <${sb(e,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${n}`,...t];i.length&&r.push(`
`,...Yw(i)),console.warn(...r)}wi(),bf=!1}function Kw(){let n=ql[ql.length-1];if(!n)return[];const t=[];for(;n;){const e=t[0];e&&e.vnode===n?e.recurseCount++:t.push({vnode:n,recurseCount:0});const s=n.component&&n.component.parent;n=s&&s.vnode}return t}function Yw(n){const t=[];return n.forEach((e,s)=>{t.push(...s===0?[]:[`
`],...Jw(e))}),t}function Jw({vnode:n,recurseCount:t}){const e=t>0?`... (${t} recursive calls)`:"",s=n.component?n.component.parent==null:!1,i=` at <${sb(n.component,n.type,s)}`,r=">"+e;return n.props?[i,...Qw(n.props),r]:[i+r]}function Qw(n){const t=[],e=Object.keys(n);return e.slice(0,3).forEach(s=>{t.push(...om(s,n[s]))}),e.length>3&&t.push(" ..."),t}function om(n,t,e){return Jt(t)?(t=JSON.stringify(t),e?t:[`${n}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?e?t:[`${n}=${t}`]:_e(t)?(t=om(n,xt(t.value),!0),e?t:[`${n}=Ref<`,t,">"]):gt(t)?[`${n}=fn${t.name?`<${t.name}>`:""}`]:(t=xt(t),e?t:[`${n}=`,t])}function pa(n,t,e,s){try{return s?n(...s):n()}catch(i){wd(i,t,e)}}function Js(n,t,e,s){if(gt(n)){const i=pa(n,t,e,s);return i&&Ig(i)&&i.catch(r=>{wd(r,t,e)}),i}if(ct(n)){const i=[];for(let r=0;r<n.length;r++)i.push(Js(n[r],t,e,s));return i}}function wd(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||vt;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const d=l.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](n,c,h)===!1)return}l=l.parent}if(r){yi(),pa(r,null,10,[n,c,h]),wi();return}}Zw(n,e,i,s,o)}function Zw(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const ze=[];let vi=-1;const ga=[];let qn=null,ma=0;const am=Promise.resolve();let vd=null;function tv(n){const t=vd||am;return n?t.then(this?n.bind(this):n):t}function ev(n){let t=vi+1,e=ze.length;for(;t<e;){const s=t+e>>>1,i=ze[s],r=Xl(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function yf(n){if(!(n.flags&1)){const t=Xl(n),e=ze[ze.length-1];!e||!(n.flags&2)&&t>=Xl(e)?ze.push(n):ze.splice(ev(t),0,n),n.flags|=1,lm()}}function lm(){vd||(vd=am.then(dm))}function sv(n){ct(n)?ga.push(...n):qn&&n.id===-1?qn.splice(ma+1,0,n):n.flags&1||(ga.push(n),n.flags|=1),lm()}function cm(n,t,e=vi+1){for(;e<ze.length;e++){const s=ze[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;ze.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function hm(n){if(ga.length){const t=[...new Set(ga)].sort((e,s)=>Xl(e)-Xl(s));if(ga.length=0,qn){qn.push(...t);return}for(qn=t,ma=0;ma<qn.length;ma++){const e=qn[ma];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}qn=null,ma=0}}const Xl=n=>n.id==null?n.flags&2?-1:1/0:n.id;function dm(n){try{for(vi=0;vi<ze.length;vi++){const t=ze[vi];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;vi<ze.length;vi++){const t=ze[vi];t&&(t.flags&=-2)}vi=-1,ze.length=0,hm(),vd=null,(ze.length||ga.length)&&dm()}}let Qs=null,um=null;function Ad(n){const t=Qs;return Qs=n,um=n&&n.type.__scopeId||null,t}function fm(n,t=Qs,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&qm(-1);const r=Ad(t);let o;try{o=n(...i)}finally{Ad(r),s._d&&qm(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Gr(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let c=l.dir[s];c&&(yi(),Js(c,e,8,[n.el,l,n,t]),wi())}}const iv=Symbol("_vte"),nv=n=>n.__isTeleport,ba=Symbol("_leaveCb"),_d=Symbol("_enterCb");function rv(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ym(()=>{n.isMounted=!0}),vm(()=>{n.isUnmounting=!0}),n}const Fs=[Function,Array],ov={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fs,onEnter:Fs,onAfterEnter:Fs,onEnterCancelled:Fs,onBeforeLeave:Fs,onLeave:Fs,onAfterLeave:Fs,onLeaveCancelled:Fs,onBeforeAppear:Fs,onAppear:Fs,onAfterAppear:Fs,onAppearCancelled:Fs};function av(n,t){const{leavingVNodes:e}=n;let s=e.get(t.type);return s||(s=Object.create(null),e.set(t.type,s)),s}function wf(n,t,e,s,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:f,onLeave:p,onAfterLeave:y,onLeaveCancelled:m,onBeforeAppear:v,onAppear:A,onAfterAppear:x,onAppearCancelled:E}=t,_=String(n.key),T=av(e,n),P=(I,N)=>{I&&Js(I,s,9,N)},k=(I,N)=>{const j=N[1];P(I,N),ct(I)?I.every(O=>O.length<=1)&&j():I.length<=1&&j()},D={mode:o,persisted:l,beforeEnter(I){let N=c;if(!e.isMounted)if(r)N=v||c;else return;I[ba]&&I[ba](!0);const j=T[_];j&&wa(n,j)&&j.el[ba]&&j.el[ba](),P(N,[I])},enter(I){let N=h,j=d,O=u;if(!e.isMounted)if(r)N=A||h,j=x||d,O=E||u;else return;let tt=!1;const M=I[_d]=G=>{tt||(tt=!0,G?P(O,[I]):P(j,[I]),D.delayedLeave&&D.delayedLeave(),I[_d]=void 0)};N?k(N,[I,M]):M()},leave(I,N){const j=String(n.key);if(I[_d]&&I[_d](!0),e.isUnmounting)return N();P(f,[I]);let O=!1;const tt=I[ba]=M=>{O||(O=!0,N(),M?P(m,[I]):P(y,[I]),I[ba]=void 0,T[j]===n&&delete T[j])};T[j]=n,p?k(p,[I,tt]):tt()},clone(I){return wf(I,t,e,s)}};return D}function Kl(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Kl(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function pm(n,t=!1,e){let s=[],i=0;for(let r=0;r<n.length;r++){let o=n[r];const l=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===Ns?(o.patchFlag&128&&i++,s=s.concat(pm(o.children,t,l))):(t||o.type!==Qi)&&s.push(l!=null?Wr(o,{key:l}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function gm(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function xd(n,t,e,s,i=!1){if(ct(n)){n.forEach((y,m)=>xd(y,t&&(ct(t)?t[m]:t),e,s,i));return}if(Yl(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&xd(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?Mf(s.component):s.el,o=i?null:r,{i:l,r:c}=n,h=t&&t.r,d=l.refs===vt?l.refs={}:l.refs,u=l.setupState,f=xt(u),p=u===vt?()=>!1:y=>kt(f,y);if(h!=null&&h!==c&&(Jt(h)?(d[h]=null,p(h)&&(u[h]=null)):_e(h)&&(h.value=null)),gt(c))pa(c,l,12,[o,d]);else{const y=Jt(c),m=_e(c);if(y||m){const v=()=>{if(n.f){const A=y?p(c)?u[c]:d[c]:c.value;i?ct(A)&&Qu(A,r):ct(A)?A.includes(r)||A.push(r):y?(d[c]=[r],p(c)&&(u[c]=d[c])):(c.value=[r],n.k&&(d[n.k]=c.value))}else y?(d[c]=o,p(c)&&(u[c]=o)):m&&(c.value=o,n.k&&(d[n.k]=o))};o?(v.id=-1,fs(v,e)):v()}}}ld().requestIdleCallback,ld().cancelIdleCallback;const Yl=n=>!!n.type.__asyncLoader,mm=n=>n.type.__isKeepAlive;function lv(n,t){bm(n,"a",t)}function cv(n,t){bm(n,"da",t)}function bm(n,t,e=Fe){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Sd(t,s,e),e){let i=e.parent;for(;i&&i.parent;)mm(i.parent.vnode)&&hv(s,t,e,i),i=i.parent}}function hv(n,t,e,s){const i=Sd(t,n,s,!0);Am(()=>{Qu(s[t],i)},e)}function Sd(n,t,e=Fe,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{yi();const l=ec(e),c=Js(t,e,n,o);return l(),wi(),c});return s?i.unshift(r):i.push(r),r}}const Ji=n=>(t,e=Fe)=>{(!sc||n==="sp")&&Sd(n,(...s)=>t(...s),e)},dv=Ji("bm"),ym=Ji("m"),uv=Ji("bu"),wm=Ji("u"),vm=Ji("bum"),Am=Ji("um"),fv=Ji("sp"),pv=Ji("rtg"),gv=Ji("rtc");function mv(n,t=Fe){Sd("ec",n,t)}const bv=Symbol.for("v-ndc");function yv(n,t,e,s){let i;const r=e,o=ct(n);if(o||Jt(n)){const l=o&&fa(n);let c=!1,h=!1;l&&(c=!Ds(n),h=Vn(n),n=dd(n)),i=new Array(n.length);for(let d=0,u=n.length;d<u;d++)i[d]=t(c?h?md(Ae(n[d])):Ae(n[d]):n[d],d,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=t(l+1,l,void 0,r)}else if(Vt(n))if(n[Symbol.iterator])i=Array.from(n,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(n);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];i[c]=t(n[d],d,c,r)}}else i=[];return i}const vf=n=>n?Zm(n)?Mf(n):vf(n.parent):null,Jl=Gt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>vf(n.parent),$root:n=>vf(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Em(n),$forceUpdate:n=>n.f||(n.f=()=>{yf(n.update)}),$nextTick:n=>n.n||(n.n=tv.bind(n.proxy)),$watch:n=>$v.bind(n)}),Af=(n,t)=>n!==vt&&!n.__isScriptSetup&&kt(n,t),wv={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:c}=n;let h;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(Af(s,t))return o[t]=1,s[t];if(i!==vt&&kt(i,t))return o[t]=2,i[t];if((h=n.propsOptions[0])&&kt(h,t))return o[t]=3,r[t];if(e!==vt&&kt(e,t))return o[t]=4,e[t];_f&&(o[t]=0)}}const d=Jl[t];let u,f;if(d)return t==="$attrs"&&Le(n.attrs,"get",""),d(n);if((u=l.__cssModules)&&(u=u[t]))return u;if(e!==vt&&kt(e,t))return o[t]=4,e[t];if(f=c.config.globalProperties,kt(f,t))return f[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return Af(i,t)?(i[t]=e,!0):s!==vt&&kt(s,t)?(s[t]=e,!0):kt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,propsOptions:r}},o){let l;return!!e[o]||n!==vt&&kt(n,o)||Af(t,o)||(l=r[0])&&kt(l,o)||kt(s,o)||kt(Jl,o)||kt(i.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:kt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function _m(n){return ct(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let _f=!0;function vv(n){const t=Em(n),e=n.proxy,s=n.ctx;_f=!1,t.beforeCreate&&xm(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:l,provide:c,inject:h,created:d,beforeMount:u,mounted:f,beforeUpdate:p,updated:y,activated:m,deactivated:v,beforeDestroy:A,beforeUnmount:x,destroyed:E,unmounted:_,render:T,renderTracked:P,renderTriggered:k,errorCaptured:D,serverPrefetch:I,expose:N,inheritAttrs:j,components:O,directives:tt,filters:M}=t;if(h&&Av(h,s,null),o)for(const B in o){const lt=o[B];gt(lt)&&(s[B]=lt.bind(e))}if(i){const B=i.call(e,e);Vt(B)&&(n.data=gf(B))}if(_f=!0,r)for(const B in r){const lt=r[B],Tt=gt(lt)?lt.bind(e,e):gt(lt.get)?lt.get.bind(e,e):ve,Ue=!gt(lt)&&gt(lt.set)?lt.set.bind(e):ve,ue=ic({get:Tt,set:Ue});Object.defineProperty(s,B,{enumerable:!0,configurable:!0,get:()=>ue.value,set:Pt=>ue.value=Pt})}if(l)for(const B in l)Sm(l[B],s,e,B);if(c){const B=gt(c)?c.call(e):c;Reflect.ownKeys(B).forEach(lt=>{Tv(lt,B[lt])})}d&&xm(d,n,"c");function L(B,lt){ct(lt)?lt.forEach(Tt=>B(Tt.bind(e))):lt&&B(lt.bind(e))}if(L(dv,u),L(ym,f),L(uv,p),L(wm,y),L(lv,m),L(cv,v),L(mv,D),L(gv,P),L(pv,k),L(vm,x),L(Am,_),L(fv,I),ct(N))if(N.length){const B=n.exposed||(n.exposed={});N.forEach(lt=>{Object.defineProperty(B,lt,{get:()=>e[lt],set:Tt=>e[lt]=Tt})})}else n.exposed||(n.exposed={});T&&n.render===ve&&(n.render=T),j!=null&&(n.inheritAttrs=j),O&&(n.components=O),tt&&(n.directives=tt),I&&gm(n)}function Av(n,t,e=ve){ct(n)&&(n=xf(n));for(const s in n){const i=n[s];let r;Vt(i)?"default"in i?r=Cd(i.from||s,i.default,!0):r=Cd(i.from||s):r=Cd(i),_e(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function xm(n,t,e){Js(ct(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Sm(n,t,e,s){let i=s.includes(".")?jm(e,s):()=>e[s];if(Jt(n)){const r=t[n];gt(r)&&Pf(i,r)}else if(gt(n))Pf(i,n.bind(e));else if(Vt(n))if(ct(n))n.forEach(r=>Sm(r,t,e,s));else{const r=gt(n.handler)?n.handler.bind(e):t[n.handler];gt(r)&&Pf(i,r,n)}}function Em(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,l=r.get(t);let c;return l?c=l:!i.length&&!e&&!s?c=t:(c={},i.length&&i.forEach(h=>Ed(c,h,o,!0)),Ed(c,t,o)),Vt(t)&&r.set(t,c),c}function Ed(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&Ed(n,r,e,!0),i&&i.forEach(o=>Ed(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const l=_v[o]||e&&e[o];n[o]=l?l(n[o],t[o]):t[o]}return n}const _v={data:Cm,props:Tm,emits:Tm,methods:Ql,computed:Ql,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:Ql,directives:Ql,watch:Sv,provide:Cm,inject:xv};function Cm(n,t){return t?n?function(){return Gt(gt(n)?n.call(this,this):n,gt(t)?t.call(this,this):t)}:t:n}function xv(n,t){return Ql(xf(n),xf(t))}function xf(n){if(ct(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Ge(n,t){return n?[...new Set([].concat(n,t))]:t}function Ql(n,t){return n?Gt(Object.create(null),n,t):t}function Tm(n,t){return n?ct(n)&&ct(t)?[...new Set([...n,...t])]:Gt(Object.create(null),_m(n),_m(t!=null?t:{})):t}function Sv(n,t){if(!n)return t;if(!t)return n;const e=Gt(Object.create(null),n);for(const s in t)e[s]=Ge(n[s],t[s]);return e}function Pm(){return{app:null,config:{isNativeTag:$l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ev=0;function Cv(n,t){return function(s,i=null){gt(s)||(s=Gt({},s)),i!=null&&!Vt(i)&&(i=null);const r=Pm(),o=new WeakSet,l=[];let c=!1;const h=r.app={_uid:Ev++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:dA,get config(){return r.config},set config(d){},use(d,...u){return o.has(d)||(d&&gt(d.install)?(o.add(d),d.install(h,...u)):gt(d)&&(o.add(d),d(h,...u))),h},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),h},component(d,u){return u?(r.components[d]=u,h):r.components[d]},directive(d,u){return u?(r.directives[d]=u,h):r.directives[d]},mount(d,u,f){if(!c){const p=h._ceVNode||Zs(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(p,d,f),c=!0,h._container=d,d.__vue_app__=h,Mf(p.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Js(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(d,u){return r.provides[d]=u,h},runWithContext(d){const u=ya;ya=h;try{return d()}finally{ya=u}}};return h}}let ya=null;function Tv(n,t){if(Fe){let e=Fe.provides;const s=Fe.parent&&Fe.parent.provides;s===e&&(e=Fe.provides=Object.create(s)),e[n]=t}}function Cd(n,t,e=!1){const s=Fe||Qs;if(s||ya){const i=ya?ya._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&gt(t)?t.call(s&&s.proxy):t}}const km={},Rm=()=>Object.create(km),Im=n=>Object.getPrototypeOf(n)===km;function Pv(n,t,e,s=!1){const i={},r=Rm();n.propsDefaults=Object.create(null),Mm(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:Hw(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function kv(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,l=xt(i),[c]=n.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let u=0;u<d.length;u++){let f=d[u];if(Td(n.emitsOptions,f))continue;const p=t[f];if(c)if(kt(r,f))p!==r[f]&&(r[f]=p,h=!0);else{const y=zn(f);i[y]=Sf(c,l,y,p,n,!1)}else p!==r[f]&&(r[f]=p,h=!0)}}}else{Mm(n,t,i,r)&&(h=!0);let d;for(const u in l)(!t||!kt(t,u)&&((d=Ur(u))===u||!kt(t,d)))&&(c?e&&(e[u]!==void 0||e[d]!==void 0)&&(i[u]=Sf(c,l,u,void 0,n,!0)):delete i[u]);if(r!==l)for(const u in r)(!t||!kt(t,u))&&(delete r[u],h=!0)}h&&Xi(n.attrs,"set","")}function Mm(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,l;if(t)for(let c in t){if(Ul(c))continue;const h=t[c];let d;i&&kt(i,d=zn(c))?!r||!r.includes(d)?e[d]=h:(l||(l={}))[d]=h:Td(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=xt(e),h=l||vt;for(let d=0;d<r.length;d++){const u=r[d];e[u]=Sf(i,c,u,h[u],n,!kt(h,u))}}return o}function Sf(n,t,e,s,i,r){const o=n[e];if(o!=null){const l=kt(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&gt(c)){const{propsDefaults:h}=i;if(e in h)s=h[e];else{const d=ec(i);s=h[e]=c.call(null,t),d()}}else s=c;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===Ur(e))&&(s=!0))}return s}const Rv=new WeakMap;function Lm(n,t,e=!1){const s=e?Rv:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},l=[];let c=!1;if(!gt(n)){const d=u=>{c=!0;const[f,p]=Lm(u,t,!0);Gt(o,f),p&&l.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!c)return Vt(n)&&s.set(n,es),es;if(ct(r))for(let d=0;d<r.length;d++){const u=zn(r[d]);Dm(u)&&(o[u]=vt)}else if(r)for(const d in r){const u=zn(d);if(Dm(u)){const f=r[d],p=o[u]=ct(f)||gt(f)?{type:f}:Gt({},f),y=p.type;let m=!1,v=!0;if(ct(y))for(let A=0;A<y.length;++A){const x=y[A],E=gt(x)&&x.name;if(E==="Boolean"){m=!0;break}else E==="String"&&(v=!1)}else m=gt(y)&&y.name==="Boolean";p[0]=m,p[1]=v,(m||kt(p,"default"))&&l.push(u)}}const h=[o,l];return Vt(n)&&s.set(n,h),h}function Dm(n){return n[0]!=="$"&&!Ul(n)}const Ef=n=>n[0]==="_"||n==="$stable",Cf=n=>ct(n)?n.map(Ai):[Ai(n)],Iv=(n,t,e)=>{if(t._n)return t;const s=fm((...i)=>Cf(t(...i)),e);return s._c=!1,s},Fm=(n,t,e)=>{const s=n._ctx;for(const i in n){if(Ef(i))continue;const r=n[i];if(gt(r))t[i]=Iv(i,r,s);else if(r!=null){const o=Cf(r);t[i]=()=>o}}},Nm=(n,t)=>{const e=Cf(t);n.slots.default=()=>e},Om=(n,t,e)=>{for(const s in t)(e||!Ef(s))&&(n[s]=t[s])},Mv=(n,t,e)=>{const s=n.slots=Rm();if(n.vnode.shapeFlag&32){const i=t._;i?(Om(s,t,e),e&&Fg(s,"_",i,!0)):Fm(t,s)}else t&&Nm(n,t)},Lv=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=vt;if(s.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:Om(i,t,e):(r=!t.$stable,Fm(t,i)),o=t}else t&&(Nm(n,t),o={default:1});if(r)for(const l in i)!Ef(l)&&o[l]==null&&delete i[l]},fs=qv;function Dv(n){return Fv(n)}function Fv(n,t){const e=ld();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:c,setText:h,setElementText:d,parentNode:u,nextSibling:f,setScopeId:p=ve,insertStaticContent:y}=n,m=(S,C,R,H=null,F=null,$=null,K=void 0,q=null,W=!!C.dynamicChildren)=>{if(S===C)return;S&&!wa(S,C)&&(H=Ht(S),Pt(S,F,$,!0),S=null),C.patchFlag===-2&&(W=!1,C.dynamicChildren=null);const{type:U,ref:nt,shapeFlag:Y}=C;switch(U){case Pd:v(S,C,R,H);break;case Qi:A(S,C,R,H);break;case kf:S==null&&x(C,R,H,K);break;case Ns:O(S,C,R,H,F,$,K,q,W);break;default:Y&1?T(S,C,R,H,F,$,K,q,W):Y&6?tt(S,C,R,H,F,$,K,q,W):(Y&64||Y&128)&&U.process(S,C,R,H,F,$,K,q,W,Hr)}nt!=null&&F&&xd(nt,S&&S.ref,$,C||S,!C)},v=(S,C,R,H)=>{if(S==null)s(C.el=l(C.children),R,H);else{const F=C.el=S.el;C.children!==S.children&&h(F,C.children)}},A=(S,C,R,H)=>{S==null?s(C.el=c(C.children||""),R,H):C.el=S.el},x=(S,C,R,H)=>{[S.el,S.anchor]=y(S.children,C,R,H,S.el,S.anchor)},E=({el:S,anchor:C},R,H)=>{let F;for(;S&&S!==C;)F=f(S),s(S,R,H),S=F;s(C,R,H)},_=({el:S,anchor:C})=>{let R;for(;S&&S!==C;)R=f(S),i(S),S=R;i(C)},T=(S,C,R,H,F,$,K,q,W)=>{C.type==="svg"?K="svg":C.type==="math"&&(K="mathml"),S==null?P(C,R,H,F,$,K,q,W):I(S,C,F,$,K,q,W)},P=(S,C,R,H,F,$,K,q)=>{let W,U;const{props:nt,shapeFlag:Y,transition:it,dirs:ut}=S;if(W=S.el=o(S.type,$,nt&&nt.is,nt),Y&8?d(W,S.children):Y&16&&D(S.children,W,null,H,F,Tf(S,$),K,q),ut&&Gr(S,null,H,"created"),k(W,S,S.scopeId,K,H),nt){for(const jt in nt)jt!=="value"&&!Ul(jt)&&r(W,jt,null,nt[jt],$,H);"value"in nt&&r(W,"value",null,nt.value,$),(U=nt.onVnodeBeforeMount)&&_i(U,H,S)}ut&&Gr(S,null,H,"beforeMount");const _t=Nv(F,it);_t&&it.beforeEnter(W),s(W,C,R),((U=nt&&nt.onVnodeMounted)||_t||ut)&&fs(()=>{U&&_i(U,H,S),_t&&it.enter(W),ut&&Gr(S,null,H,"mounted")},F)},k=(S,C,R,H,F)=>{if(R&&p(S,R),H)for(let $=0;$<H.length;$++)p(S,H[$]);if(F){let $=F.subTree;if(C===$||Wm($.type)&&($.ssContent===C||$.ssFallback===C)){const K=F.vnode;k(S,K,K.scopeId,K.slotScopeIds,F.parent)}}},D=(S,C,R,H,F,$,K,q,W=0)=>{for(let U=W;U<S.length;U++){const nt=S[U]=q?Xn(S[U]):Ai(S[U]);m(null,nt,C,R,H,F,$,K,q)}},I=(S,C,R,H,F,$,K)=>{const q=C.el=S.el;let{patchFlag:W,dynamicChildren:U,dirs:nt}=C;W|=S.patchFlag&16;const Y=S.props||vt,it=C.props||vt;let ut;if(R&&Vr(R,!1),(ut=it.onVnodeBeforeUpdate)&&_i(ut,R,C,S),nt&&Gr(C,S,R,"beforeUpdate"),R&&Vr(R,!0),(Y.innerHTML&&it.innerHTML==null||Y.textContent&&it.textContent==null)&&d(q,""),U?N(S.dynamicChildren,U,q,R,H,Tf(C,F),$):K||lt(S,C,q,null,R,H,Tf(C,F),$,!1),W>0){if(W&16)j(q,Y,it,R,F);else if(W&2&&Y.class!==it.class&&r(q,"class",null,it.class,F),W&4&&r(q,"style",Y.style,it.style,F),W&8){const _t=C.dynamicProps;for(let jt=0;jt<_t.length;jt++){const Lt=_t[jt],Ms=Y[Lt],ds=it[Lt];(ds!==Ms||Lt==="value")&&r(q,Lt,Ms,ds,F,R)}}W&1&&S.children!==C.children&&d(q,C.children)}else!K&&U==null&&j(q,Y,it,R,F);((ut=it.onVnodeUpdated)||nt)&&fs(()=>{ut&&_i(ut,R,C,S),nt&&Gr(C,S,R,"updated")},H)},N=(S,C,R,H,F,$,K)=>{for(let q=0;q<C.length;q++){const W=S[q],U=C[q],nt=W.el&&(W.type===Ns||!wa(W,U)||W.shapeFlag&70)?u(W.el):R;m(W,U,nt,null,H,F,$,K,!0)}},j=(S,C,R,H,F)=>{if(C!==R){if(C!==vt)for(const $ in C)!Ul($)&&!($ in R)&&r(S,$,C[$],null,F,H);for(const $ in R){if(Ul($))continue;const K=R[$],q=C[$];K!==q&&$!=="value"&&r(S,$,q,K,F,H)}"value"in R&&r(S,"value",C.value,R.value,F)}},O=(S,C,R,H,F,$,K,q,W)=>{const U=C.el=S?S.el:l(""),nt=C.anchor=S?S.anchor:l("");let{patchFlag:Y,dynamicChildren:it,slotScopeIds:ut}=C;ut&&(q=q?q.concat(ut):ut),S==null?(s(U,R,H),s(nt,R,H),D(C.children||[],R,nt,F,$,K,q,W)):Y>0&&Y&64&&it&&S.dynamicChildren?(N(S.dynamicChildren,it,R,F,$,K,q),(C.key!=null||F&&C===F.subTree)&&Bm(S,C,!0)):lt(S,C,R,nt,F,$,K,q,W)},tt=(S,C,R,H,F,$,K,q,W)=>{C.slotScopeIds=q,S==null?C.shapeFlag&512?F.ctx.activate(C,R,H,K,W):M(C,R,H,F,$,K,W):G(S,C,W)},M=(S,C,R,H,F,$,K)=>{const q=S.component=eA(S,H,F);if(mm(S)&&(q.ctx.renderer=Hr),iA(q,!1,K),q.asyncDep){if(F&&F.registerDep(q,L,K),!S.el){const W=q.subTree=Zs(Qi);A(null,W,C,R)}}else L(q,S,C,R,F,$,K)},G=(S,C,R)=>{const H=C.component=S.component;if(Vv(S,C,R))if(H.asyncDep&&!H.asyncResolved){B(H,C,R);return}else H.next=C,H.update();else C.el=S.el,H.vnode=C},L=(S,C,R,H,F,$,K)=>{const q=()=>{if(S.isMounted){let{next:Y,bu:it,u:ut,parent:_t,vnode:jt}=S;{const Vi=Hm(S);if(Vi){Y&&(Y.el=jt.el,B(S,Y,K)),Vi.asyncDep.then(()=>{S.isUnmounted||q()});return}}let Lt=Y,Ms;Vr(S,!1),Y?(Y.el=jt.el,B(S,Y,K)):Y=jt,it&&ef(it),(Ms=Y.props&&Y.props.onVnodeBeforeUpdate)&&_i(Ms,_t,Y,jt),Vr(S,!0);const ds=Gm(S),Gi=S.subTree;S.subTree=ds,m(Gi,ds,u(Gi.el),Ht(Gi),S,F,$),Y.el=ds.el,Lt===null&&Wv(S,ds.el),ut&&fs(ut,F),(Ms=Y.props&&Y.props.onVnodeUpdated)&&fs(()=>_i(Ms,_t,Y,jt),F)}else{let Y;const{el:it,props:ut}=C,{bm:_t,m:jt,parent:Lt,root:Ms,type:ds}=S,Gi=Yl(C);Vr(S,!1),_t&&ef(_t),!Gi&&(Y=ut&&ut.onVnodeBeforeMount)&&_i(Y,Lt,C),Vr(S,!0);{Ms.ce&&Ms.ce._injectChildStyle(ds);const Vi=S.subTree=Gm(S);m(null,Vi,R,H,S,F,$),C.el=Vi.el}if(jt&&fs(jt,F),!Gi&&(Y=ut&&ut.onVnodeMounted)){const Vi=C;fs(()=>_i(Y,Lt,Vi),F)}(C.shapeFlag&256||Lt&&Yl(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&S.a&&fs(S.a,F),S.isMounted=!0,C=R=H=null}};S.scope.on();const W=S.effect=new $g(q);S.scope.off();const U=S.update=W.run.bind(W),nt=S.job=W.runIfDirty.bind(W);nt.i=S,nt.id=S.uid,W.scheduler=()=>yf(nt),Vr(S,!0),U()},B=(S,C,R)=>{C.component=S;const H=S.vnode.props;S.vnode=C,S.next=null,kv(S,C.props,H,R),Lv(S,C.children,R),yi(),cm(S),wi()},lt=(S,C,R,H,F,$,K,q,W=!1)=>{const U=S&&S.children,nt=S?S.shapeFlag:0,Y=C.children,{patchFlag:it,shapeFlag:ut}=C;if(it>0){if(it&128){Ue(U,Y,R,H,F,$,K,q,W);return}else if(it&256){Tt(U,Y,R,H,F,$,K,q,W);return}}ut&8?(nt&16&&hs(U,F,$),Y!==U&&d(R,Y)):nt&16?ut&16?Ue(U,Y,R,H,F,$,K,q,W):hs(U,F,$,!0):(nt&8&&d(R,""),ut&16&&D(Y,R,H,F,$,K,q,W))},Tt=(S,C,R,H,F,$,K,q,W)=>{S=S||es,C=C||es;const U=S.length,nt=C.length,Y=Math.min(U,nt);let it;for(it=0;it<Y;it++){const ut=C[it]=W?Xn(C[it]):Ai(C[it]);m(S[it],ut,R,null,F,$,K,q,W)}U>nt?hs(S,F,$,!0,!1,Y):D(C,R,H,F,$,K,q,W,Y)},Ue=(S,C,R,H,F,$,K,q,W)=>{let U=0;const nt=C.length;let Y=S.length-1,it=nt-1;for(;U<=Y&&U<=it;){const ut=S[U],_t=C[U]=W?Xn(C[U]):Ai(C[U]);if(wa(ut,_t))m(ut,_t,R,null,F,$,K,q,W);else break;U++}for(;U<=Y&&U<=it;){const ut=S[Y],_t=C[it]=W?Xn(C[it]):Ai(C[it]);if(wa(ut,_t))m(ut,_t,R,null,F,$,K,q,W);else break;Y--,it--}if(U>Y){if(U<=it){const ut=it+1,_t=ut<nt?C[ut].el:H;for(;U<=it;)m(null,C[U]=W?Xn(C[U]):Ai(C[U]),R,_t,F,$,K,q,W),U++}}else if(U>it)for(;U<=Y;)Pt(S[U],F,$,!0),U++;else{const ut=U,_t=U,jt=new Map;for(U=_t;U<=it;U++){const Ls=C[U]=W?Xn(C[U]):Ai(C[U]);Ls.key!=null&&jt.set(Ls.key,U)}let Lt,Ms=0;const ds=it-_t+1;let Gi=!1,Vi=0;const zh=new Array(ds);for(U=0;U<ds;U++)zh[U]=0;for(U=ut;U<=Y;U++){const Ls=S[U];if(Ms>=ds){Pt(Ls,F,$,!0);continue}let Wi;if(Ls.key!=null)Wi=jt.get(Ls.key);else for(Lt=_t;Lt<=it;Lt++)if(zh[Lt-_t]===0&&wa(Ls,C[Lt])){Wi=Lt;break}Wi===void 0?Pt(Ls,F,$,!0):(zh[Wi-_t]=U+1,Wi>=Vi?Vi=Wi:Gi=!0,m(Ls,C[Wi],R,null,F,$,K,q,W),Ms++)}const E0=Gi?Ov(zh):es;for(Lt=E0.length-1,U=ds-1;U>=0;U--){const Ls=_t+U,Wi=C[Ls],C0=Ls+1<nt?C[Ls+1].el:H;zh[U]===0?m(null,Wi,R,C0,F,$,K,q,W):Gi&&(Lt<0||U!==E0[Lt]?ue(Wi,R,C0,2):Lt--)}}},ue=(S,C,R,H,F=null)=>{const{el:$,type:K,transition:q,children:W,shapeFlag:U}=S;if(U&6){ue(S.component.subTree,C,R,H);return}if(U&128){S.suspense.move(C,R,H);return}if(U&64){K.move(S,C,R,Hr);return}if(K===Ns){s($,C,R);for(let Y=0;Y<W.length;Y++)ue(W[Y],C,R,H);s(S.anchor,C,R);return}if(K===kf){E(S,C,R);return}if(H!==2&&U&1&&q)if(H===0)q.beforeEnter($),s($,C,R),fs(()=>q.enter($),F);else{const{leave:Y,delayLeave:it,afterLeave:ut}=q,_t=()=>{S.ctx.isUnmounted?i($):s($,C,R)},jt=()=>{Y($,()=>{_t(),ut&&ut()})};it?it($,_t,jt):jt()}else s($,C,R)},Pt=(S,C,R,H=!1,F=!1)=>{const{type:$,props:K,ref:q,children:W,dynamicChildren:U,shapeFlag:nt,patchFlag:Y,dirs:it,cacheIndex:ut}=S;if(Y===-2&&(F=!1),q!=null&&(yi(),xd(q,null,R,S,!0),wi()),ut!=null&&(C.renderCache[ut]=void 0),nt&256){C.ctx.deactivate(S);return}const _t=nt&1&&it,jt=!Yl(S);let Lt;if(jt&&(Lt=K&&K.onVnodeBeforeUnmount)&&_i(Lt,C,S),nt&6)zi(S.component,R,H);else{if(nt&128){S.suspense.unmount(R,H);return}_t&&Gr(S,null,C,"beforeUnmount"),nt&64?S.type.remove(S,C,R,Hr,H):U&&!U.hasOnce&&($!==Ns||Y>0&&Y&64)?hs(U,C,R,!1,!0):($===Ns&&Y&384||!F&&nt&16)&&hs(W,C,R),H&&Mt(S)}(jt&&(Lt=K&&K.onVnodeUnmounted)||_t)&&fs(()=>{Lt&&_i(Lt,C,S),_t&&Gr(S,null,C,"unmounted")},R)},Mt=S=>{const{type:C,el:R,anchor:H,transition:F}=S;if(C===Ns){Xs(R,H);return}if(C===kf){_(S);return}const $=()=>{i(R),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:K,delayLeave:q}=F,W=()=>K(R,$);q?q(S.el,$,W):W()}else $()},Xs=(S,C)=>{let R;for(;S!==C;)R=f(S),i(S),S=R;i(C)},zi=(S,C,R)=>{const{bum:H,scope:F,job:$,subTree:K,um:q,m:W,a:U,parent:nt,slots:{__:Y}}=S;$m(W),$m(U),H&&ef(H),nt&&ct(Y)&&Y.forEach(it=>{nt.renderCache[it]=void 0}),F.stop(),$&&($.flags|=8,Pt(K,S,C,R)),q&&fs(q,C),fs(()=>{S.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},hs=(S,C,R,H=!1,F=!1,$=0)=>{for(let K=$;K<S.length;K++)Pt(S[K],C,R,H,F)},Ht=S=>{if(S.shapeFlag&6)return Ht(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const C=f(S.anchor||S.el),R=C&&C[iv];return R?f(R):C};let On=!1;const Au=(S,C,R)=>{S==null?C._vnode&&Pt(C._vnode,null,null,!0):m(C._vnode||null,S,C,null,null,null,R),C._vnode=S,On||(On=!0,cm(),hm(),On=!1)},Hr={p:m,um:Pt,m:ue,r:Mt,mt:M,mc:D,pc:lt,pbc:N,n:Ht,o:n};return{render:Au,hydrate:void 0,createApp:Cv(Au)}}function Tf({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Vr({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function Nv(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Bm(n,t,e=!1){const s=n.children,i=t.children;if(ct(s)&&ct(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=Xn(i[r]),l.el=o.el),!e&&l.patchFlag!==-2&&Bm(o,l)),l.type===Pd&&(l.el=o.el),l.type===Qi&&!l.el&&(l.el=o.el)}}function Ov(n){const t=n.slice(),e=[0];let s,i,r,o,l;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(i=e[e.length-1],n[i]<h){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,n[e[l]]<h?r=l+1:o=l;h<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function Hm(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hm(t)}function $m(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const Bv=Symbol.for("v-scx"),Hv=()=>Cd(Bv);function Pf(n,t,e){return Um(n,t,e)}function Um(n,t,e=vt){const{immediate:s,deep:i,flush:r,once:o}=e,l=Gt({},e),c=t&&s||!t&&r!=="post";let h;if(sc){if(r==="sync"){const p=Hv();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=ve,p.resume=ve,p.pause=ve,p}}const d=Fe;l.call=(p,y,m)=>Js(p,d,y,m);let u=!1;r==="post"?l.scheduler=p=>{fs(p,d&&d.suspense)}:r!=="sync"&&(u=!0,l.scheduler=(p,y)=>{y?p():yf(p)}),l.augmentJob=p=>{t&&(p.flags|=4),u&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=Xw(n,t,l);return sc&&(h?h.push(f):c&&f()),f}function $v(n,t,e){const s=this.proxy,i=Jt(n)?n.includes(".")?jm(s,n):()=>s[n]:n.bind(s,s);let r;gt(t)?r=t:(r=t.handler,e=t);const o=ec(this),l=Um(i,r.bind(s),e);return o(),l}function jm(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const Uv=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${zn(t)}Modifiers`]||n[`${Ur(t)}Modifiers`];function jv(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||vt;let i=e;const r=t.startsWith("update:"),o=r&&Uv(s,t.slice(7));o&&(o.trim&&(i=e.map(d=>Jt(d)?d.trim():d)),o.number&&(i=e.map(uw)));let l,c=s[l=tf(t)]||s[l=tf(zn(t))];!c&&r&&(c=s[l=tf(Ur(t))]),c&&Js(c,n,6,i);const h=s[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Js(h,n,6,i)}}function zm(n,t,e=!1){const s=t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},l=!1;if(!gt(n)){const c=h=>{const d=zm(h,t,!0);d&&(l=!0,Gt(o,d))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!r&&!l?(Vt(n)&&s.set(n,null),null):(ct(r)?r.forEach(c=>o[c]=null):Gt(o,r),Vt(n)&&s.set(n,o),o)}function Td(n,t){return!n||!bi(t)?!1:(t=t.slice(2).replace(/Once$/,""),kt(n,t[0].toLowerCase()+t.slice(1))||kt(n,Ur(t))||kt(n,t))}function CS(){}function Gm(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:c,render:h,renderCache:d,props:u,data:f,setupState:p,ctx:y,inheritAttrs:m}=n,v=Ad(n);let A,x;try{if(e.shapeFlag&4){const _=i||s,T=_;A=Ai(h.call(T,_,d,u,p,f,y)),x=l}else{const _=t;A=Ai(_.length>1?_(u,{attrs:l,slots:o,emit:c}):_(u,null)),x=t.props?l:zv(l)}}catch(_){Zl.length=0,wd(_,n,1),A=Zs(Qi)}let E=A;if(x&&m!==!1){const _=Object.keys(x),{shapeFlag:T}=E;_.length&&T&7&&(r&&_.some(ss)&&(x=Gv(x,r)),E=Wr(E,x,!1,!0))}return e.dirs&&(E=Wr(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&Kl(E,e.transition),A=E,Ad(v),A}const zv=n=>{let t;for(const e in n)(e==="class"||e==="style"||bi(e))&&((t||(t={}))[e]=n[e]);return t},Gv=(n,t)=>{const e={};for(const s in n)(!ss(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function Vv(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:l,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Vm(s,o,h):!!o;if(c&8){const d=t.dynamicProps;for(let u=0;u<d.length;u++){const f=d[u];if(o[f]!==s[f]&&!Td(h,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Vm(s,o,h):!0:!!o;return!1}function Vm(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!Td(e,r))return!0}return!1}function Wv({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const Wm=n=>n.__isSuspense;function qv(n,t){t&&t.pendingBranch?ct(n)?t.effects.push(...n):t.effects.push(n):sv(n)}const Ns=Symbol.for("v-fgt"),Pd=Symbol.for("v-txt"),Qi=Symbol.for("v-cmt"),kf=Symbol.for("v-stc"),Zl=[];let ps=null;function xe(n=!1){Zl.push(ps=n?null:[])}function Xv(){Zl.pop(),ps=Zl[Zl.length-1]||null}let tc=1;function qm(n,t=!1){tc+=n,n<0&&ps&&t&&(ps.hasOnce=!0)}function Xm(n){return n.dynamicChildren=tc>0?ps||es:null,Xv(),tc>0&&ps&&ps.push(n),n}function De(n,t,e,s,i,r){return Xm(ht(n,t,e,s,i,r,!0))}function Kv(n,t,e,s,i){return Xm(Zs(n,t,e,s,i,!0))}function Km(n){return n?n.__v_isVNode===!0:!1}function wa(n,t){return n.type===t.type&&n.key===t.key}const Ym=({key:n})=>n!=null?n:null,kd=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Jt(n)||_e(n)||gt(n)?{i:Qs,r:n,k:t,f:!!e}:n:null);function ht(n,t=null,e=null,s=0,i=null,r=n===Ns?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Ym(t),ref:t&&kd(t),scopeId:um,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Qs};return l?(Rf(c,e),r&128&&n.normalize(c)):e&&(c.shapeFlag|=Jt(e)?8:16),tc>0&&!o&&ps&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&ps.push(c),c}const Zs=Yv;function Yv(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===bv)&&(n=Qi),Km(n)){const l=Wr(n,t,!0);return e&&Rf(l,e),tc>0&&!r&&ps&&(l.shapeFlag&6?ps[ps.indexOf(n)]=l:ps.push(l)),l.patchFlag=-2,l}if(hA(n)&&(n=n.__vccOpts),t){t=Jv(t);let{class:l,style:c}=t;l&&!Jt(l)&&(t.class=hd(l)),Vt(c)&&(mf(c)&&!ct(c)&&(c=Gt({},c)),t.style=cd(c))}const o=Jt(n)?1:Wm(n)?128:nv(n)?64:Vt(n)?4:gt(n)?2:0;return ht(n,t,e,s,i,o,r,!0)}function Jv(n){return n?mf(n)||Im(n)?Gt({},n):n:null}function Wr(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:c}=n,h=t?Qv(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Ym(h),ref:t&&t.ref?e&&r?ct(r)?r.concat(kd(t)):[r,kd(t)]:kd(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Ns?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Wr(n.ssContent),ssFallback:n.ssFallback&&Wr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&Kl(d,c.clone(d)),d}function Jm(n=" ",t=0){return Zs(Pd,null,n,t)}function qr(n="",t=!1){return t?(xe(),Kv(Qi,null,n)):Zs(Qi,null,n)}function Ai(n){return n==null||typeof n=="boolean"?Zs(Qi):ct(n)?Zs(Ns,null,n.slice()):Km(n)?Xn(n):Zs(Pd,null,String(n))}function Xn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Wr(n)}function Rf(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(ct(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Rf(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!Im(t)?t._ctx=Qs:i===3&&Qs&&(Qs.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else gt(t)?(t={default:t,_ctx:Qs},e=32):(t=String(t),s&64?(e=16,t=[Jm(t)]):e=8);n.children=t,n.shapeFlag|=e}function Qv(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=hd([t.class,s.class]));else if(i==="style")t.style=cd([t.style,s.style]);else if(bi(i)){const r=t[i],o=s[i];o&&r!==o&&!(ct(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function _i(n,t,e,s=null){Js(n,t,7,[e,s])}const Zv=Pm();let tA=0;function eA(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||Zv,r={uid:tA++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ww(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lm(s,i),emitsOptions:zm(s,i),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:s.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=jv.bind(null,r),n.ce&&n.ce(r),r}let Fe=null;const sA=()=>Fe||Qs;let Rd,If;{const n=ld(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Rd=t("__VUE_INSTANCE_SETTERS__",e=>Fe=e),If=t("__VUE_SSR_SETTERS__",e=>sc=e)}const ec=n=>{const t=Fe;return Rd(n),n.scope.on(),()=>{n.scope.off(),Rd(t)}},Qm=()=>{Fe&&Fe.scope.off(),Rd(null)};function Zm(n){return n.vnode.shapeFlag&4}let sc=!1;function iA(n,t=!1,e=!1){t&&If(t);const{props:s,children:i}=n.vnode,r=Zm(n);Pv(n,s,r,t),Mv(n,i,e||t);const o=r?nA(n,t):void 0;return t&&If(!1),o}function nA(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,wv);const{setup:s}=e;if(s){yi();const i=n.setupContext=s.length>1?oA(n):null,r=ec(n),o=pa(s,n,0,[n.props,i]),l=Ig(o);if(wi(),r(),(l||n.sp)&&!Yl(n)&&gm(n),l){if(o.then(Qm,Qm),t)return o.then(c=>{tb(n,c)}).catch(c=>{wd(c,n,0)});n.asyncDep=o}else tb(n,o)}else eb(n)}function tb(n,t,e){gt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Vt(t)&&(n.setupState=rm(t)),eb(n)}function eb(n,t,e){const s=n.type;n.render||(n.render=s.render||ve);{const i=ec(n);yi();try{vv(n)}finally{wi(),i()}}}const rA={get(n,t){return Le(n,"get",""),n[t]}};function oA(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,rA),slots:n.slots,emit:n.emit,expose:t}}function Mf(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(rm($w(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Jl)return Jl[e](n)},has(t,e){return e in t||e in Jl}})):n.proxy}const aA=/(?:^|[-_])(\w)/g,lA=n=>n.replace(aA,t=>t.toUpperCase()).replace(/[-_]/g,"");function cA(n,t=!0){return gt(n)?n.displayName||n.name:n.name||t&&n.__name}function sb(n,t,e=!1){let s=cA(t);if(!s&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(s=i[1])}if(!s&&n&&n.parent){const i=r=>{for(const o in r)if(r[o]===t)return o};s=i(n.components||n.parent.type.components)||i(n.appContext.components)}return s?lA(s):e?"App":"Anonymous"}function hA(n){return gt(n)&&"__vccOpts"in n}const ic=(n,t)=>Ww(n,t,sc),dA="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lf;const ib=typeof window!="undefined"&&window.trustedTypes;if(ib)try{Lf=ib.createPolicy("vue",{createHTML:n=>n})}catch(n){}const nb=Lf?n=>Lf.createHTML(n):n=>n,uA="http://www.w3.org/2000/svg",fA="http://www.w3.org/1998/Math/MathML",Zi=typeof document!="undefined"?document:null,rb=Zi&&Zi.createElement("template"),pA={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?Zi.createElementNS(uA,n):t==="mathml"?Zi.createElementNS(fA,n):e?Zi.createElement(n,{is:e}):Zi.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Zi.createTextNode(n),createComment:n=>Zi.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Zi.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{rb.innerHTML=nb(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const l=rb.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Kn="transition",nc="animation",va=Symbol("_vtc"),ob={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gA=Gt({},ov,ob),Xr=(n,t=[])=>{ct(n)?n.forEach(e=>e(...t)):n&&n(...t)},ab=n=>n?ct(n)?n.some(t=>t.length>1):n.length>1:!1;function mA(n){const t={};for(const O in n)O in ob||(t[O]=n[O]);if(n.css===!1)return t;const{name:e="v",type:s,duration:i,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:l=`${e}-enter-to`,appearFromClass:c=r,appearActiveClass:h=o,appearToClass:d=l,leaveFromClass:u=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=n,y=bA(i),m=y&&y[0],v=y&&y[1],{onBeforeEnter:A,onEnter:x,onEnterCancelled:E,onLeave:_,onLeaveCancelled:T,onBeforeAppear:P=A,onAppear:k=x,onAppearCancelled:D=E}=t,I=(O,tt,M,G)=>{O._enterCancelled=G,Yn(O,tt?d:l),Yn(O,tt?h:o),M&&M()},N=(O,tt)=>{O._isLeaving=!1,Yn(O,u),Yn(O,p),Yn(O,f),tt&&tt()},j=O=>(tt,M)=>{const G=O?k:x,L=()=>I(tt,O,M);Xr(G,[tt,L]),lb(()=>{Yn(tt,O?c:r),xi(tt,O?d:l),ab(G)||cb(tt,s,m,L)})};return Gt(t,{onBeforeEnter(O){Xr(A,[O]),xi(O,r),xi(O,o)},onBeforeAppear(O){Xr(P,[O]),xi(O,c),xi(O,h)},onEnter:j(!1),onAppear:j(!0),onLeave(O,tt){O._isLeaving=!0;const M=()=>N(O,tt);xi(O,u),O._enterCancelled?(xi(O,f),Ff()):(Ff(),xi(O,f)),lb(()=>{O._isLeaving&&(Yn(O,u),xi(O,p),ab(_)||cb(O,s,v,M))}),Xr(_,[O,M])},onEnterCancelled(O){I(O,!1,void 0,!0),Xr(E,[O])},onAppearCancelled(O){I(O,!0,void 0,!0),Xr(D,[O])},onLeaveCancelled(O){N(O),Xr(T,[O])}})}function bA(n){if(n==null)return null;if(Vt(n))return[Df(n.enter),Df(n.leave)];{const t=Df(n);return[t,t]}}function Df(n){return fw(n)}function xi(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[va]||(n[va]=new Set)).add(t)}function Yn(n,t){t.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const e=n[va];e&&(e.delete(t),e.size||(n[va]=void 0))}function lb(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let yA=0;function cb(n,t,e,s){const i=n._endId=++yA,r=()=>{i===n._endId&&s()};if(e!=null)return setTimeout(r,e);const{type:o,timeout:l,propCount:c}=hb(n,t);if(!o)return s();const h=o+"end";let d=0;const u=()=>{n.removeEventListener(h,f),r()},f=p=>{p.target===n&&++d>=c&&u()};setTimeout(()=>{d<c&&u()},l+1),n.addEventListener(h,f)}function hb(n,t){const e=window.getComputedStyle(n),s=y=>(e[y]||"").split(", "),i=s(`${Kn}Delay`),r=s(`${Kn}Duration`),o=db(i,r),l=s(`${nc}Delay`),c=s(`${nc}Duration`),h=db(l,c);let d=null,u=0,f=0;t===Kn?o>0&&(d=Kn,u=o,f=r.length):t===nc?h>0&&(d=nc,u=h,f=c.length):(u=Math.max(o,h),d=u>0?o>h?Kn:nc:null,f=d?d===Kn?r.length:c.length:0);const p=d===Kn&&/\b(transform|all)(,|$)/.test(s(`${Kn}Property`).toString());return{type:d,timeout:u,propCount:f,hasTransform:p}}function db(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,s)=>ub(e)+ub(n[s])))}function ub(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Ff(){return document.body.offsetHeight}function wA(n,t,e){const s=n[va];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const fb=Symbol("_vod"),vA=Symbol("_vsh"),AA=Symbol(""),_A=/(^|;)\s*display\s*:/;function xA(n,t,e){const s=n.style,i=Jt(e);let r=!1;if(e&&!i){if(t)if(Jt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Id(s,l,"")}else for(const o in t)e[o]==null&&Id(s,o,"");for(const o in e)o==="display"&&(r=!0),Id(s,o,e[o])}else if(i){if(t!==e){const o=s[AA];o&&(e+=";"+o),s.cssText=e,r=_A.test(e)}}else t&&n.removeAttribute("style");fb in n&&(n[fb]=r?s.display:"",n[vA]&&(s.display="none"))}const pb=/\s*!important$/;function Id(n,t,e){if(ct(e))e.forEach(s=>Id(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=SA(n,t);pb.test(e)?n.setProperty(Ur(s),e.replace(pb,""),"important"):n[s]=e}}const gb=["Webkit","Moz","ms"],Nf={};function SA(n,t){const e=Nf[t];if(e)return e;let s=zn(t);if(s!=="filter"&&s in n)return Nf[t]=s;s=Dg(s);for(let i=0;i<gb.length;i++){const r=gb[i]+s;if(r in n)return Nf[t]=r}return t}const mb="http://www.w3.org/1999/xlink";function bb(n,t,e,s,i,r=yw(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(mb,t.slice(6,t.length)):n.setAttributeNS(mb,t,e):e==null||r&&!Og(e)?n.removeAttribute(t):n.setAttribute(t,r?"":jn(e)?String(e):e)}function yb(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?nb(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const l=typeof n[t];l==="boolean"?e=Og(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{n[t]=e}catch(l){}o&&n.removeAttribute(i||t)}function EA(n,t,e,s){n.addEventListener(t,e,s)}function CA(n,t,e,s){n.removeEventListener(t,e,s)}const wb=Symbol("_vei");function TA(n,t,e,s,i=null){const r=n[wb]||(n[wb]={}),o=r[t];if(s&&o)o.value=s;else{const[l,c]=PA(t);if(s){const h=r[t]=IA(s,i);EA(n,l,h,c)}else o&&(CA(n,l,o,c),r[t]=void 0)}}const vb=/(?:Once|Passive|Capture)$/;function PA(n){let t;if(vb.test(n)){t={};let s;for(;s=n.match(vb);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ur(n.slice(2)),t]}let Of=0;const kA=Promise.resolve(),RA=()=>Of||(kA.then(()=>Of=0),Of=Date.now());function IA(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Js(MA(s,e.value),t,5,[s])};return e.value=n,e.attached=RA(),e}function MA(n,t){if(ct(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Ab=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,LA=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?wA(n,s,o):t==="style"?xA(n,e,s):bi(t)?ss(t)||TA(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):DA(n,t,s,o))?(yb(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&bb(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!Jt(s))?yb(n,zn(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),bb(n,t,s,o))};function DA(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&Ab(t)&&gt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ab(t)&&Jt(e)?!1:t in n}const _b=new WeakMap,xb=new WeakMap,Md=Symbol("_moveCb"),Sb=Symbol("_enterCb"),FA=(n=>(delete n.props.mode,n))({name:"TransitionGroup",props:Gt({},gA,{tag:String,moveClass:String}),setup(n,{slots:t}){const e=sA(),s=rv();let i,r;return wm(()=>{if(!i.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!HA(i[0].el,e.vnode.el,o)){i=[];return}i.forEach(NA),i.forEach(OA);const l=i.filter(BA);Ff(),l.forEach(c=>{const h=c.el,d=h.style;xi(h,o),d.transform=d.webkitTransform=d.transitionDuration="";const u=h[Md]=f=>{f&&f.target!==h||(!f||/transform$/.test(f.propertyName))&&(h.removeEventListener("transitionend",u),h[Md]=null,Yn(h,o))};h.addEventListener("transitionend",u)}),i=[]}),()=>{const o=xt(n),l=mA(o);let c=o.tag||Ns;if(i=[],r)for(let h=0;h<r.length;h++){const d=r[h];d.el&&d.el instanceof Element&&(i.push(d),Kl(d,wf(d,l,s,e)),_b.set(d,d.el.getBoundingClientRect()))}r=t.default?pm(t.default()):[];for(let h=0;h<r.length;h++){const d=r[h];d.key!=null&&Kl(d,wf(d,l,s,e))}return Zs(c,null,r)}}});function NA(n){const t=n.el;t[Md]&&t[Md](),t[Sb]&&t[Sb]()}function OA(n){xb.set(n,n.el.getBoundingClientRect())}function BA(n){const t=_b.get(n),e=xb.get(n),s=t.left-e.left,i=t.top-e.top;if(s||i){const r=n.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",n}}function HA(n,t,e){const s=n.cloneNode(),i=n[va];i&&i.forEach(l=>{l.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),e.split(/\s+/).forEach(l=>l&&s.classList.add(l)),s.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(s);const{hasTransform:o}=hb(s);return r.removeChild(s),o}const $A=Gt({patchProp:LA},pA);let Eb;function UA(){return Eb||(Eb=Dv($A))}const jA=(...n)=>{const t=UA().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=GA(s);if(!i)return;const r=t._component;!gt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,zA(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function zA(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function GA(n){return Jt(n)?document.querySelector(n):n}const Ve=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Bf=[.001,0,0,.001,0,0],Hf=1.35,gs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},VA="pdfjs_internal_editor_",dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},At={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},WA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ne={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ld={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},se={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Aa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Dd={ERRORS:0,WARNINGS:1,INFOS:5},Fd={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nd={moveTo:0,lineTo:1,curveTo:2,closePath:3},qA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Od=Dd.WARNINGS;function XA(n){Number.isInteger(n)&&(Od=n)}function KA(){return Od}function Bd(n){Od>=Dd.INFOS&&console.log(`Info: ${n}`)}function ft(n){Od>=Dd.WARNINGS&&console.log(`Warning: ${n}`)}function Dt(n){throw new Error(n)}function ie(n,t){n||Dt(t)}function YA(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Cb(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=e_(n)}catch(i){}}const s=t?URL.parse(n,t):URL.parse(n);return YA(s)?s:null}function Tb(n,t,e=!1){const s=URL.parse(n);return s?(s.hash=t,s.href):e&&Cb(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function wt(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Kr=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Pb extends Kr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class $f extends Kr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Uf extends Kr{constructor(t){super(t,"InvalidPDFException")}}class Hd extends Kr{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class JA extends Kr{constructor(t){super(t,"FormatError")}}class Qn extends Kr{constructor(t){super(t,"AbortException")}}function kb(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Dt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function rc(n){typeof n!="string"&&Dt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function QA(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function ZA(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function t_(){try{return new Function(""),!0}catch(n){return!1}}class Se{static get isLittleEndian(){return wt(this,"isLittleEndian",ZA())}static get isEvalSupported(){return wt(this,"isEvalSupported",t_())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder!="undefined")}static get platform(){if(typeof navigator!="undefined"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return wt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return wt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return wt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const jf=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class et{static makeHexColor(t,e,s){return`#${jf[t]}${jf[e]}${jf[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const i=t[s],r=t[s+1];t[s]=i*e[0]+r*e[2]+e[4],t[s+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const i=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5];for(let d=0;d<6;d+=2){const u=t[s+d],f=t[s+d+1];t[s+d]=u*i+f*o+c,t[s+d+1]=u*r+f*l+h}}static applyInverseTransform(t,e){const s=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const i=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],d=t[0],u=t[1],f=t[2],p=t[3];let y=i*d+c,m=y,v=i*f+c,A=v,x=l*u+h,E=x,_=l*p+h,T=_;if(r!==0||o!==0){const P=r*d,k=r*f,D=o*u,I=o*p;y+=D,A+=D,v+=I,m+=I,x+=P,T+=P,_+=k,E+=k}s[0]=Math.min(s[0],y,v,m,A),s[1]=Math.min(s[1],x,_,E,T),s[2]=Math.max(s[2],y,v,m,A),s[3]=Math.max(s[3],x,_,E,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],i=t[1],r=t[2],o=t[3],l=we(s,2)+we(i,2),c=s*r+i*o,h=we(r,2)+we(o,2),d=(l+h)/2,u=Math.sqrt(we(d,2)-(l*h-we(c,2)));e[0]=Math.sqrt(d+u||1),e[1]=Math.sqrt(d-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,i,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,s,i,r,o,l,c,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,c),w(this,nn,Fp).call(this,t,s,r,l,e,i,o,c,3*(-t+3*(s-r)+l),6*(t-2*s+r),3*(s-t),h),w(this,nn,Fp).call(this,t,s,r,l,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),h)}}nn=new WeakSet,_u=function(t,e,s,i,r,o,l,c,h,d){if(h<=0||h>=1)return;const u=1-h,f=h*h,p=f*h,y=u*(u*(u*t+3*h*e)+3*f*s)+p*i,m=u*(u*(u*r+3*h*o)+3*f*l)+p*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],m)},Fp=function(t,e,s,i,r,o,l,c,h,d,u,f){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&w(this,nn,_u).call(this,t,e,s,i,r,o,l,c,-u/d,f);return}const p=we(d,2)-4*u*h;if(p<0)return;const y=Math.sqrt(p),m=2*h;w(this,nn,_u).call(this,t,e,s,i,r,o,l,c,(-d+y)/m,f),w(this,nn,_u).call(this,t,e,s,i,r,o,l,c,(-d-y)/m,f)},b(et,nn);function e_(n){return decodeURIComponent(escape(n))}let zf=null,Rb=null;function s_(n){return zf||(zf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Rb=new Map([["","t"]])),n.replaceAll(zf,(t,e,s)=>e?e.normalize("NFKC"):Rb.get(s))}function Ib(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),kb(n)}const Gf="pdfjs_internal_id_";function i_(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,i,...r]=e;if(!n(s)&&!Number.isInteger(s)||!t(i))return!1;const o=r.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function We(n,t,e){return Math.min(Math.max(n,t),e)}function Mb(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(kb(n))}function n_(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):rc(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})}),typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const tn="http://www.w3.org/2000/svg",to=class to{};z(to,"CSS",96),z(to,"PDF",72),z(to,"PDF_TO_CSS_UNITS",to.CSS/to.PDF);let Zn=to;function oc(n,t="text"){return V(this,null,function*(){if(_a(n,document.baseURI)){const e=yield fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})})}class ac{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let d,u,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,u=0,f=0,p=1;break;case 90:d=0,u=1,f=1,p=0;break;case 270:d=0,u=-1,f=-1,p=0;break;case 0:d=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let y,m,v,A;d===0?(y=Math.abs(h-t[1])*s+r,m=Math.abs(c-t[0])*s+o,v=(t[3]-t[1])*s,A=(t[2]-t[0])*s):(y=Math.abs(c-t[0])*s+r,m=Math.abs(h-t[1])*s+o,v=(t[2]-t[0])*s,A=(t[3]-t[1])*s),this.transform=[d*s,u*s,f*s,p*s,y-d*s*c-f*s*h,m-u*s*c-p*s*h],this.width=v,this.height=A}get rawDims(){const t=this.viewBox;return wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new ac({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return et.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];et.applyTransform(e,this.transform);const s=[t[2],t[3]];return et.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return et.applyInverseTransform(s,this.transform),s}}class Vf extends Kr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function $d(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Wf(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function r_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function o_(n,t="document.pdf"){if(typeof n!="string")return t;if($d(n))return ft('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch(o){}return r||t}class Lb{constructor(){z(this,"started",Object.create(null));z(this,"times",[])}time(t){t in this.started&&ft(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ft(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function _a(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ti(n){n.preventDefault()}function ne(n){n.preventDefault(),n.stopPropagation()}class qf{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,wc)||g(this,wc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,wc).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(o+=d,l+=u):h==="+"&&(o-=d,l-=u),new Date(Date.UTC(s,i,r,o,l,c))}}wc=new WeakMap,b(qf,wc);function a_(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new ac({viewBox:r,userUnit:1,scale:t,rotation:e})}function Xf(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ft(`Not a valid color format: "${n}"`),[0,0,0])}function l_(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,Xf(s))}t.remove()}function Kt(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function Si(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function Yr(n,t,e=!1,s=!0){if(t instanceof ac){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,l=Se.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${r}px`,d=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,u=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=d,o.height=u):(o.width=u,o.height=d)}s&&n.setAttribute("data-main-rotation",t.rotation)}class en{constructor(){const{pixelRatio:t}=en;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,i){let r=1/0,o=1/0,l=1/0;s>0&&(r=Math.sqrt(s/(t*e))),i!==-1&&(o=i/t,l=i/e);const c=Math.min(r,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Kf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],rn=class rn{constructor(t){b(this,Ce);b(this,tr,null);b(this,eo,null);b(this,Bs);b(this,er,null);b(this,vc,null);b(this,Ta,null);g(this,Bs,t),a(rn,Ac)||g(rn,Ac,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=g(this,tr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Bs)._uiManager._signal;t.addEventListener("contextmenu",ti,{signal:e}),t.addEventListener("pointerdown",w(rn,su,I0),{signal:e});const s=g(this,er,document.createElement("div"));s.className="buttons",t.append(s);const i=a(this,Bs).toolbarPosition;if(i){const{style:r}=t,o=a(this,Bs)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,Ce,D0).call(this),t}get div(){return a(this,tr)}hide(){var t;a(this,tr).classList.add("hidden"),(t=a(this,eo))==null||t.hideDropdown()}show(){var t;a(this,tr).classList.remove("hidden"),(t=a(this,vc))==null||t.shown()}addAltText(t){return V(this,null,function*(){const e=yield t.render();w(this,Ce,Gh).call(this,e),a(this,er).prepend(e,a(this,Ce,xu)),g(this,vc,t)})}addColorPicker(t){g(this,eo,t);const e=t.renderButton();w(this,Ce,Gh).call(this,e),a(this,er).prepend(e,a(this,Ce,xu))}addEditSignatureButton(t){return V(this,null,function*(){const e=g(this,Ta,yield t.renderEditButton(a(this,Bs)));w(this,Ce,Gh).call(this,e),a(this,er).prepend(e,a(this,Ce,xu))})}updateEditSignatureButton(t){a(this,Ta)&&(a(this,Ta).title=t)}remove(){var t;a(this,tr).remove(),(t=a(this,eo))==null||t.destroy(),g(this,eo,null)}};tr=new WeakMap,eo=new WeakMap,Bs=new WeakMap,er=new WeakMap,vc=new WeakMap,Ta=new WeakMap,Ac=new WeakMap,su=new WeakSet,I0=function(t){t.stopPropagation()},Ce=new WeakSet,M0=function(t){a(this,Bs)._focusEventsAllowed=!1,ne(t)},L0=function(t){a(this,Bs)._focusEventsAllowed=!0,ne(t)},Gh=function(t){const e=a(this,Bs)._uiManager._signal;t.addEventListener("focusin",w(this,Ce,M0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",w(this,Ce,L0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ti,{signal:e})},D0=function(){const{editorType:t,_uiManager:e}=a(this,Bs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",a(rn,Ac)[t]),w(this,Ce,Gh).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),a(this,er).append(s)},xu=function(){const t=document.createElement("div");return t.className="divider",t},b(rn,su),b(rn,Ac,null);let Yf=rn;class c_{constructor(t){b(this,sr);b(this,_c,null);b(this,so,null);b(this,io);g(this,io,t)}show(t,e,s){const[i,r]=w(this,sr,N0).call(this,e,s),{style:o}=a(this,so)||g(this,so,w(this,sr,F0).call(this));t.append(a(this,so)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,so).remove()}}_c=new WeakMap,so=new WeakMap,io=new WeakMap,sr=new WeakSet,F0=function(){const t=g(this,so,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ti,{signal:a(this,io)._signal});const e=g(this,_c,document.createElement("div"));return e.className="buttons",t.append(e),w(this,sr,O0).call(this),t},N0=function(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const l=r.x+(e?r.width:0);if(o>s){i=l,s=o;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,s]},O0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=a(this,io)._signal;t.addEventListener("contextmenu",ti,{signal:s}),t.addEventListener("click",()=>{a(this,io).highlightSelection("floating_button")},{signal:s}),a(this,_c).append(t)};function Jf(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}class h_{constructor(){b(this,iu,0)}get id(){return`${VA}${Ze(this,iu)._++}`}}iu=new WeakMap;const Tp=class Tp{constructor(){b(this,ka);b(this,Pa,Ib());b(this,xc,0);b(this,Oe,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",r)}getFromFile(t){return V(this,null,function*(){const{lastModified:e,name:s,size:i,type:r}=t;return w(this,ka,Su).call(this,`${e}_${s}_${i}_${r}`,t)})}getFromUrl(t){return V(this,null,function*(){return w(this,ka,Su).call(this,t,t)})}getFromBlob(t,e){return V(this,null,function*(){const s=yield e;return w(this,ka,Su).call(this,t,s)})}getFromId(t){return V(this,null,function*(){a(this,Oe)||g(this,Oe,new Map);const e=a(this,Oe).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){a(this,Oe)||g(this,Oe,new Map);let s=a(this,Oe).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${a(this,Pa)}_${Ze(this,xc)._++}`,refCounter:1,isSvg:!1},a(this,Oe).set(t,s),a(this,Oe).set(s.id,s),s}getSvgUrl(t){const e=a(this,Oe).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;a(this,Oe)||g(this,Oe,new Map);const e=a(this,Oe).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Pa)}_`)}};Pa=new WeakMap,xc=new WeakMap,Oe=new WeakMap,ka=new WeakSet,Su=function(t,e){return V(this,null,function*(){a(this,Oe)||g(this,Oe,new Map);let s=a(this,Oe).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,Pa)}_${Ze(this,xc)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=yield oc(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=Tp._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,d)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,h()},o.onload=()=>V(this,null,function*(){const u=s.svgUrl=o.result;l.src=(yield r)?`${u}#svgView(preserveAspectRatio(none))`:u}),l.onerror=o.onerror=d});o.readAsDataURL(i),yield c}else s.bitmap=yield createImageBitmap(i);s.refCounter=1}catch(i){ft(i),s=null}return a(this,Oe).set(t,s),s&&a(this,Oe).set(s.id,s),s})};let Qf=Tp;class d_{constructor(t=128){b(this,te,[]);b(this,ir,!1);b(this,Sc);b(this,Yt,-1);g(this,Sc,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&t(),a(this,ir))return;const c={cmd:t,undo:e,post:s,type:r};if(a(this,Yt)===-1){a(this,te).length>0&&(a(this,te).length=0),g(this,Yt,0),a(this,te).push(c);return}if(o&&a(this,te)[a(this,Yt)].type===r){l&&(c.undo=a(this,te)[a(this,Yt)].undo),a(this,te)[a(this,Yt)]=c;return}const h=a(this,Yt)+1;h===a(this,Sc)?a(this,te).splice(0,1):(g(this,Yt,h),h<a(this,te).length&&a(this,te).splice(h)),a(this,te).push(c)}undo(){if(a(this,Yt)===-1)return;g(this,ir,!0);const{undo:t,post:e}=a(this,te)[a(this,Yt)];t(),e==null||e(),g(this,ir,!1),g(this,Yt,a(this,Yt)-1)}redo(){if(a(this,Yt)<a(this,te).length-1){g(this,Yt,a(this,Yt)+1),g(this,ir,!0);const{cmd:t,post:e}=a(this,te)[a(this,Yt)];t(),e==null||e(),g(this,ir,!1)}}hasSomethingToUndo(){return a(this,Yt)!==-1}hasSomethingToRedo(){return a(this,Yt)<a(this,te).length-1}cleanType(t){if(a(this,Yt)!==-1){for(let e=a(this,Yt);e>=0;e--)if(a(this,te)[e].type!==t){a(this,te).splice(e+1,a(this,Yt)-e),g(this,Yt,e);return}a(this,te).length=0,g(this,Yt,-1)}}destroy(){g(this,te,null)}}te=new WeakMap,ir=new WeakMap,Sc=new WeakMap,Yt=new WeakMap;class lc{constructor(t){b(this,nu);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Se.platform;for(const[s,i,r={}]of t)for(const o of s){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(w(this,nu,B0).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(t,e)||(i.bind(t,...o,e)(),r||ne(e))}}nu=new WeakSet,B0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ru=class ru{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return l_(t),wt(this,"_colors",t)}convert(t){const e=Xf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return ru._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?et.makeHexColor(...e):t}};z(ru,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Zf=ru;const Na=class Na{constructor(t,e,s,i,r,o,l,c,h,d,u,f,p,y){b(this,X);b(this,Ra,new AbortController);b(this,bs,null);b(this,ae,new Map);b(this,Te,new Map);b(this,Ia,null);b(this,on,null);b(this,Ma,null);b(this,Hs,new d_);b(this,nr,null);b(this,rr,null);b(this,La,0);b(this,no,new Set);b(this,Ci,null);b(this,si,null);b(this,ro,new Set);z(this,"_editorUndoBar",null);b(this,Ec,!1);b(this,Cc,!1);b(this,Da,!1);b(this,Tc,null);b(this,Ti,null);b(this,or,null);b(this,Fa,null);b(this,ar,!1);b(this,Pi,null);b(this,ou,new h_);b(this,lr,!1);b(this,Pc,!1);b(this,cr,null);b(this,oo,null);b(this,ao,null);b(this,hr,null);b(this,kc,null);b(this,fe,dt.NONE);b(this,It,new Set);b(this,an,null);b(this,dr,null);b(this,lo,null);b(this,Rc,null);b(this,Ic,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,ur,[0,0]);b(this,ki,null);b(this,ln,null);b(this,Mc,null);b(this,$s,null);const m=this._signal=a(this,Ra).signal;g(this,ln,t),g(this,Mc,e),g(this,Ia,s),g(this,dr,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:m}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),r._on("setpreference",this.onSetPreference.bind(this),{signal:m}),r._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:m}),w(this,X,U0).call(this),w(this,X,V0).call(this),w(this,X,Op).call(this),g(this,on,o.annotationStorage),g(this,Tc,o.filterFactory),g(this,lo,l),g(this,Fa,c||null),g(this,Ec,h),g(this,Cc,d),g(this,Da,u),g(this,kc,f||null),this.viewParameters={realScale:Zn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=y!==!1}static get _keyboardManager(){const t=Na.prototype,e=o=>a(o,ln).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new lc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ln).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ln).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r,o,l,c;(t=a(this,$s))==null||t.resolve(),g(this,$s,null),(e=a(this,Ra))==null||e.abort(),g(this,Ra,null),this._signal=null;for(const h of a(this,Te).values())h.destroy();a(this,Te).clear(),a(this,ae).clear(),a(this,ro).clear(),(s=a(this,hr))==null||s.clear(),g(this,bs,null),a(this,It).clear(),a(this,Hs).destroy(),(i=a(this,Ia))==null||i.destroy(),(r=a(this,dr))==null||r.destroy(),(o=a(this,Pi))==null||o.hide(),g(this,Pi,null),(l=a(this,ao))==null||l.destroy(),g(this,ao,null),a(this,Ti)&&(clearTimeout(a(this,Ti)),g(this,Ti,null)),a(this,ki)&&(clearTimeout(a(this,ki)),g(this,ki,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,kc)}get useNewAltTextFlow(){return a(this,Cc)}get useNewAltTextWhenAddingImage(){return a(this,Da)}get hcmFilter(){return wt(this,"hcmFilter",a(this,lo)?a(this,Tc).addHCMFilter(a(this,lo).foreground,a(this,lo).background):"none")}get direction(){return wt(this,"direction",getComputedStyle(a(this,ln)).direction)}get highlightColors(){return wt(this,"highlightColors",a(this,Fa)?new Map(a(this,Fa).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,rr,t)}setMainHighlightColorPicker(t){g(this,ao,t)}editAltText(t,e=!1){var s;(s=a(this,Ia))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=a(this,dr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,dr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,Da,e);break}}onPageChanging({pageNumber:t}){g(this,La,t-1)}focusMainContainer(){a(this,ln).focus()}findParent(t,e){for(const s of a(this,Te).values()){const{x:i,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+l)return s}return null}disableUserSelect(t=!1){a(this,Mc).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,ro).add(t)}removeShouldRescale(t){a(this,ro).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Zn.PDF_TO_CSS_UNITS;for(const s of a(this,ro))s.onScaleChanging();(e=a(this,rr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=e,l=e.toString(),h=w(this,X,Eu).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;e.empty();const u=w(this,X,Np).call(this,h),f=a(this,fe)===dt.NONE,p=()=>{u==null||u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(dt.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,on)&&!a(this,on).has(t.id)&&a(this,on).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,ar)&&(g(this,ar,!1),w(this,X,Cu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,It))if(e.div.contains(t)){g(this,oo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,oo))return;const[t,e]=a(this,oo);g(this,oo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){w(this,X,Op).call(this),w(this,X,Bp).call(this)}removeEditListeners(){w(this,X,G0).call(this),w(this,X,Hp).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of a(this,si))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of a(this,si))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=a(this,bs))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of a(this,It)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){return V(this,null,function*(){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,si))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){ft(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const h=yield i.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)w(this,X,$p).call(this,c);w(this,X,Up).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){ft(`paste: "${r.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,fe)!==dt.NONE&&!this.isEditorHandlingKeyboard&&Na._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,ar)&&(g(this,ar,!1),w(this,X,Cu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(w(this,X,j0).call(this),w(this,X,Bp).call(this),w(this,X,ts).call(this,{isEditing:a(this,fe)!==dt.NONE,isEmpty:w(this,X,Vh).call(this),hasSomethingToUndo:a(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:a(this,Hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,X,z0).call(this),w(this,X,Hp).call(this),w(this,X,ts).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,si)){g(this,si,t);for(const e of a(this,si))w(this,X,$n).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,ou).id}get currentLayer(){return a(this,Te).get(a(this,La))}getLayer(t){return a(this,Te).get(t)}get currentPageIndex(){return a(this,La)}addLayer(t){a(this,Te).set(t.pageIndex,t),a(this,lr)?t.enable():t.disable()}removeLayer(t){a(this,Te).delete(t.pageIndex)}updateMode(t,e=null,s=!1){return V(this,null,function*(){var i,r,o;if(a(this,fe)!==t&&!(a(this,$s)&&(yield a(this,$s).promise,!a(this,$s)))){if(g(this,$s,Promise.withResolvers()),(i=a(this,rr))==null||i.commitOrRemove(),g(this,fe,t),t===dt.NONE){this.setEditingState(!1),w(this,X,q0).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,$s).resolve();return}t===dt.SIGNATURE&&(yield(o=a(this,dr))==null?void 0:o.loadSignatures()),this.setEditingState(!0),yield w(this,X,W0).call(this),this.unselectAll();for(const l of a(this,Te).values())l.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),a(this,$s).resolve();return}for(const l of a(this,ae).values())l.annotationElementId===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();a(this,$s).resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,fe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(a(this,si)){switch(t){case At.CREATE:this.currentLayer.addNewEditor(e);return;case At.HIGHLIGHT_DEFAULT_COLOR:(s=a(this,ao))==null||s.updateColor(e);break;case At.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Rc)||g(this,Rc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of a(this,It))i.updateParams(t,e);for(const i of a(this,si))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r,o;for(const l of a(this,ae).values())l.editorType===t&&l.show(e);((o=(r=a(this,Rc))==null?void 0:r.get(At.HIGHLIGHT_SHOW_ALL))!=null?o:!0)!==e&&w(this,X,$n).call(this,[[At.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Pc)!==t){g(this,Pc,t);for(const e of a(this,Te).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of a(this,ae).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return a(this,ae).get(t)}addEditor(t){a(this,ae).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(a(this,Ti)&&clearTimeout(a(this,Ti)),g(this,Ti,setTimeout(()=>{this.focusMainContainer(),g(this,Ti,null)},0))),a(this,ae).delete(t.id),t.annotationElementId&&((e=a(this,hr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,no).has(t.annotationElementId))&&((s=a(this,on))==null||s.remove(t.id))}addDeletedAnnotationElement(t){a(this,no).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,no).has(t)}removeDeletedAnnotationElement(t){a(this,no).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,bs)!==t&&(g(this,bs,t),t&&w(this,X,$n).call(this,t.propertiesToUpdate))}updateUI(t){a(this,X,X0)===t&&w(this,X,$n).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){w(this,X,$n).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,It).has(t)){a(this,It).delete(t),t.unselect(),w(this,X,ts).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,It).add(t),t.select(),w(this,X,$n).call(this,t.propertiesToUpdate),w(this,X,ts).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,rr))==null||e.commitOrRemove();for(const s of a(this,It))s!==t&&s.unselect();a(this,It).clear(),a(this,It).add(t),t.select(),w(this,X,$n).call(this,t.propertiesToUpdate),w(this,X,ts).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,It).has(t)}get firstSelectedEditor(){return a(this,It).values().next().value}unselect(t){t.unselect(),a(this,It).delete(t),w(this,X,ts).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,It).size!==0}get isEnterHandled(){return a(this,It).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Hs).undo(),w(this,X,ts).call(this,{hasSomethingToUndo:a(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,X,Vh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Hs).redo(),w(this,X,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Hs).hasSomethingToRedo(),isEmpty:w(this,X,Vh).call(this)})}addCommands(t){a(this,Hs).add(t),w(this,X,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,X,Vh).call(this)})}cleanUndoStack(t){a(this,Hs).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,It)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},i=()=>{for(const o of e)w(this,X,$p).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=a(this,bs))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,bs)||this.hasSelection}selectAll(){for(const t of a(this,It))t.commit();w(this,X,Up).call(this,a(this,ae).values())}unselectAll(){var t;if(!(a(this,bs)&&(a(this,bs).commitOrRemove(),a(this,fe)!==dt.NONE))&&!((t=a(this,rr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,It))e.unselect();a(this,It).clear(),w(this,X,ts).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,ur)[0]+=t,a(this,ur)[1]+=e;const[i,r]=a(this,ur),o=[...a(this,It)],l=1e3;a(this,ki)&&clearTimeout(a(this,ki)),g(this,ki,setTimeout(()=>{g(this,ki,null),a(this,ur)[0]=a(this,ur)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,ae).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of o)a(this,ae).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Ci,new Map);for(const t of a(this,It))a(this,Ci).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Ci))return!1;this.disableUserSelect(!1);const t=a(this,Ci);g(this,Ci,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},l]of t)l.newX=i,l.newY=r,l.newPageIndex=o,e||(e=i!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const s=(i,r,o,l)=>{if(a(this,ae).has(i.id)){const c=a(this,Te).get(l);c?i._setParentAndPosition(c,r,o):(i.pageIndex=l,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:l}]of t)s(i,r,o,l)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:l}]of t)s(i,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Ci))for(const s of a(this,Ci).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,It).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,bs)===t}getActive(){return a(this,bs)}getMode(){return a(this,fe)}get imageManager(){return wt(this,"imageManager",new Qf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,d=e.rangeCount;h<d;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,d,u,f)=>({x:(d-i)/o,y:1-(h+u-s)/r,width:f/o,height:u/r});break;case"180":l=(h,d,u,f)=>({x:1-(h+u-s)/r,y:1-(d+f-i)/o,width:u/r,height:f/o});break;case"270":l=(h,d,u,f)=>({x:1-(d+f-i)/o,y:(h-s)/r,width:f/o,height:u/r});break;default:l=(h,d,u,f)=>({x:(h-s)/r,y:(d-i)/o,width:u/r,height:f/o});break}const c=[];for(let h=0,d=e.rangeCount;h<d;h++){const u=e.getRangeAt(h);if(!u.collapsed)for(const{x:f,y:p,width:y,height:m}of u.getClientRects())y===0||m===0||c.push(l(f,p,y,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Ma)||g(this,Ma,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Ma))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=a(this,Ma))==null?void 0:i.get(t.data.id);if(!e)return;const s=a(this,on).getRawValue(e);s&&(a(this,fe)===dt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const i=(r=a(this,hr))==null?void 0:r.get(t);i&&(i.setCanvas(e,s),a(this,hr).delete(t))}addMissingCanvas(t,e){(a(this,hr)||g(this,hr,new Map)).set(t,e)}};Ra=new WeakMap,bs=new WeakMap,ae=new WeakMap,Te=new WeakMap,Ia=new WeakMap,on=new WeakMap,Ma=new WeakMap,Hs=new WeakMap,nr=new WeakMap,rr=new WeakMap,La=new WeakMap,no=new WeakMap,Ci=new WeakMap,si=new WeakMap,ro=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Da=new WeakMap,Tc=new WeakMap,Ti=new WeakMap,or=new WeakMap,Fa=new WeakMap,ar=new WeakMap,Pi=new WeakMap,ou=new WeakMap,lr=new WeakMap,Pc=new WeakMap,cr=new WeakMap,oo=new WeakMap,ao=new WeakMap,hr=new WeakMap,kc=new WeakMap,fe=new WeakMap,It=new WeakMap,an=new WeakMap,dr=new WeakMap,lo=new WeakMap,Rc=new WeakMap,Ic=new WeakMap,ur=new WeakMap,ki=new WeakMap,ln=new WeakMap,Mc=new WeakMap,$s=new WeakMap,X=new WeakSet,Eu=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Np=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of a(this,Te).values())if(s.hasTextLayer(t))return s;return null},H0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=w(this,X,Eu).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(a(this,Pi)||g(this,Pi,new c_(this)),a(this,Pi).show(s,i,this.direction==="ltr"))},$0=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,an)&&((r=a(this,Pi))==null||r.hide(),g(this,an,null),w(this,X,ts).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,an))return;const i=w(this,X,Eu).call(this,t).closest(".textLayer");if(!i){a(this,an)&&((o=a(this,Pi))==null||o.hide(),g(this,an,null),w(this,X,ts).call(this,{hasSelectedText:!1}));return}if((l=a(this,Pi))==null||l.hide(),g(this,an,e),w(this,X,ts).call(this,{hasSelectedText:!0}),!(a(this,fe)!==dt.HIGHLIGHT&&a(this,fe)!==dt.NONE)&&(a(this,fe)===dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,ar,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,fe)===dt.HIGHLIGHT?w(this,X,Np).call(this,i):null;c==null||c.toggleDrawing();const h=new AbortController,d=this.combinedSignal(h),u=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&w(this,X,Cu).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:d}),window.addEventListener("blur",u,{signal:d})}},Cu=function(t=""){a(this,fe)===dt.HIGHLIGHT?this.highlightSelection(t):a(this,Ec)&&w(this,X,H0).call(this)},U0=function(){document.addEventListener("selectionchange",w(this,X,$0).bind(this),{signal:this._signal})},j0=function(){if(a(this,or))return;g(this,or,new AbortController);const t=this.combinedSignal(a(this,or));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},z0=function(){var t;(t=a(this,or))==null||t.abort(),g(this,or,null)},Op=function(){if(a(this,cr))return;g(this,cr,new AbortController);const t=this.combinedSignal(a(this,cr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},G0=function(){var t;(t=a(this,cr))==null||t.abort(),g(this,cr,null)},Bp=function(){if(a(this,nr))return;g(this,nr,new AbortController);const t=this.combinedSignal(a(this,nr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Hp=function(){var t;(t=a(this,nr))==null||t.abort(),g(this,nr,null)},V0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ts=function(t){Object.entries(t).some(([s,i])=>a(this,Ic)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Ic),t)}),a(this,fe)===dt.HIGHLIGHT&&t.hasSelectedEditor===!1&&w(this,X,$n).call(this,[[At.HIGHLIGHT_FREE,!0]]))},$n=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},W0=function(){return V(this,null,function*(){if(!a(this,lr)){g(this,lr,!0);const t=[];for(const e of a(this,Te).values())t.push(e.enable());yield Promise.all(t);for(const e of a(this,ae).values())e.enable()}})},q0=function(){if(this.unselectAll(),a(this,lr)){g(this,lr,!1);for(const t of a(this,Te).values())t.disable();for(const t of a(this,ae).values())t.disable()}},$p=function(t){const e=a(this,Te).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},X0=function(){let t=null;for(t of a(this,It));return t},Vh=function(){if(a(this,ae).size===0)return!0;if(a(this,ae).size===1)for(const t of a(this,ae).values())return t.isEmpty();return!1},Up=function(t){for(const e of a(this,It))e.unselect();a(this,It).clear();for(const e of t)e.isEmpty()||(a(this,It).add(e),e.select());w(this,X,ts).call(this,{hasSelectedEditor:this.hasSelection})},z(Na,"TRANSLATE_SMALL",1),z(Na,"TRANSLATE_BIG",10);let Jr=Na;const qe=class qe{constructor(t){b(this,ni);b(this,pe,null);b(this,Ri,!1);b(this,ii,null);b(this,Oa,null);b(this,Ii,null);b(this,ys,null);b(this,Ba,!1);b(this,Mi,null);b(this,os,null);b(this,cn,null);b(this,co,null);b(this,Li,!1);g(this,os,t),g(this,Li,t._uiManager.useNewAltTextFlow),a(qe,fr)||g(qe,fr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){var e;(e=qe._l10n)!=null||(qe._l10n=t)}render(){return V(this,null,function*(){const t=g(this,ii,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,Oa,document.createElement("span"));t.append(e),a(this,Li)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(qe,fr).missing),e.setAttribute("data-l10n-id",a(qe,fr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,os)._uiManager._signal;t.addEventListener("contextmenu",ti,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),a(this,os)._uiManager.editAltText(a(this,os)),a(this,Li)&&a(this,os)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,ni,Wh)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,Ba,!0),i(r))},{signal:s}),yield w(this,ni,Tu).call(this),t})}finish(){a(this,ii)&&(a(this,ii).focus({focusVisible:a(this,Ba)}),g(this,Ba,!1))}isEmpty(){return a(this,Li)?a(this,pe)===null:!a(this,pe)&&!a(this,Ri)}hasData(){return a(this,Li)?a(this,pe)!==null||!!a(this,cn):this.isEmpty()}get guessedText(){return a(this,cn)}setGuessedText(t){return V(this,null,function*(){a(this,pe)===null&&(g(this,cn,t),g(this,co,yield qe._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),w(this,ni,Tu).call(this))})}toggleAltTextBadge(t=!1){var e;if(!a(this,Li)||a(this,pe)){(e=a(this,Mi))==null||e.remove(),g(this,Mi,null);return}if(!a(this,Mi)){const s=g(this,Mi,document.createElement("div"));s.className="noAltTextBadge",a(this,os).div.append(s)}a(this,Mi).classList.toggle("hidden",!t)}serialize(t){let e=a(this,pe);return!t&&a(this,cn)===e&&(e=a(this,co)),{altText:e,decorative:a(this,Ri),guessedText:a(this,cn),textWithDisclaimer:a(this,co)}}get data(){return{altText:a(this,pe),decorative:a(this,Ri)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(g(this,cn,s),g(this,co,i)),!(a(this,pe)===t&&a(this,Ri)===e)&&(r||(g(this,pe,t),g(this,Ri,e)),w(this,ni,Tu).call(this))}toggle(t=!1){a(this,ii)&&(!t&&a(this,ys)&&(clearTimeout(a(this,ys)),g(this,ys,null)),a(this,ii).disabled=!t)}shown(){a(this,os)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,ni,Wh)}})}destroy(){var t,e;(t=a(this,ii))==null||t.remove(),g(this,ii,null),g(this,Oa,null),g(this,Ii,null),(e=a(this,Mi))==null||e.remove(),g(this,Mi,null)}};pe=new WeakMap,Ri=new WeakMap,ii=new WeakMap,Oa=new WeakMap,Ii=new WeakMap,ys=new WeakMap,Ba=new WeakMap,Mi=new WeakMap,os=new WeakMap,cn=new WeakMap,co=new WeakMap,Li=new WeakMap,fr=new WeakMap,ni=new WeakSet,Wh=function(){return a(this,pe)&&"added"||a(this,pe)===null&&this.guessedText&&"review"||"missing"},Tu=function(){return V(this,null,function*(){var i,r,o;const t=a(this,ii);if(!t)return;if(a(this,Li)){if(t.classList.toggle("done",!!a(this,pe)),t.setAttribute("data-l10n-id",a(qe,fr)[a(this,ni,Wh)]),(i=a(this,Oa))==null||i.setAttribute("data-l10n-id",a(qe,fr)[`${a(this,ni,Wh)}-label`]),!a(this,pe)){(r=a(this,Ii))==null||r.remove();return}}else{if(!a(this,pe)&&!a(this,Ri)){t.classList.remove("done"),(o=a(this,Ii))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Ii);if(!e){g(this,Ii,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,os).id}`;const l=100,c=a(this,os)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,ys)),g(this,ys,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,ys,setTimeout(()=>{g(this,ys,null),a(this,Ii).classList.add("show"),a(this,os)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;a(this,ys)&&(clearTimeout(a(this,ys)),g(this,ys,null)),(h=a(this,Ii))==null||h.classList.remove("show")},{signal:c})}a(this,Ri)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,pe)),e.parentNode||t.append(e);const s=a(this,os).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)})},b(qe,fr,null),z(qe,"_l10n",null);let Ud=qe;const Pp=class Pp{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){b(this,pr);b(this,Ha);b(this,ho,!1);b(this,Lc,null);b(this,Dc);b(this,Fc);b(this,Nc);b(this,Oc);b(this,hn,null);b(this,uo);b(this,dn,null);b(this,fo);b(this,un,null);g(this,Ha,t),g(this,Lc,s),g(this,Dc,e),g(this,Fc,i),g(this,Nc,r),g(this,Oc,o),g(this,fo,new AbortController),g(this,uo,AbortSignal.any([l,a(this,fo).signal])),t.addEventListener("touchstart",w(this,pr,K0).bind(this),{passive:!1,signal:a(this,uo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/en.pixelRatio}destroy(){var t,e;(t=a(this,fo))==null||t.abort(),g(this,fo,null),(e=a(this,hn))==null||e.abort(),g(this,hn,null)}};Ha=new WeakMap,ho=new WeakMap,Lc=new WeakMap,Dc=new WeakMap,Fc=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,hn=new WeakMap,uo=new WeakMap,dn=new WeakMap,fo=new WeakMap,un=new WeakMap,pr=new WeakSet,K0=function(t){var i,r,o;if((i=a(this,Dc))!=null&&i.call(this))return;if(t.touches.length===1){if(a(this,hn))return;const l=g(this,hn,new AbortController),c=AbortSignal.any([a(this,uo),l.signal]),h=a(this,Ha),d={capture:!0,signal:c,passive:!1},u=f=>{var p;f.pointerType==="touch"&&((p=a(this,hn))==null||p.abort(),g(this,hn,null))};h.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),u(f))},d),h.addEventListener("pointerup",u,d),h.addEventListener("pointercancel",u,d);return}if(!a(this,un)){g(this,un,new AbortController);const l=AbortSignal.any([a(this,uo),a(this,un).signal]),c=a(this,Ha),h={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",w(this,pr,Y0).bind(this),h);const d=w(this,pr,J0).bind(this);c.addEventListener("touchend",d,h),c.addEventListener("touchcancel",d,h),h.capture=!0,c.addEventListener("pointerdown",ne,h),c.addEventListener("pointermove",ne,h),c.addEventListener("pointercancel",ne,h),c.addEventListener("pointerup",ne,h),(r=a(this,Fc))==null||r.call(this)}if(ne(t),t.touches.length!==2||(o=a(this,Lc))!=null&&o.call(this)){g(this,dn,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),g(this,dn,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},Y0=function(t){var _;if(!a(this,dn)||t.touches.length!==2)return;ne(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:l}=s,c=a(this,dn),{touch0X:h,touch0Y:d,touch1X:u,touch1Y:f}=c,p=u-h,y=f-d,m=o-i,v=l-r,A=Math.hypot(m,v)||1,x=Math.hypot(p,y)||1;if(!a(this,ho)&&Math.abs(x-A)<=Pp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,ho)){g(this,ho,!0);return}const E=[(i+o)/2,(r+l)/2];(_=a(this,Nc))==null||_.call(this,E,x,A)},J0=function(t){var e;t.touches.length>=2||(a(this,un)&&(a(this,un).abort(),g(this,un,null),(e=a(this,Oc))==null||e.call(this)),a(this,dn)&&(ne(t),g(this,dn,null),g(this,ho,!1)))};let jd=Pp;const bt=class bt{constructor(t){b(this,ot);b(this,po,null);b(this,ri,null);b(this,zt,null);b(this,$a,!1);b(this,gr,null);b(this,Bc,"");b(this,go,!1);b(this,Pe,null);b(this,mo,null);b(this,fn,null);b(this,mr,null);b(this,Hc,"");b(this,bo,!1);b(this,ws,null);b(this,$c,!1);b(this,yo,!1);b(this,pn,!1);b(this,Di,null);b(this,Ua,0);b(this,ja,0);b(this,Us,null);b(this,wo,null);z(this,"_isCopy",!1);z(this,"_editToolbar",null);z(this,"_initialOptions",Object.create(null));z(this,"_initialData",null);z(this,"_isVisible",!0);z(this,"_uiManager",null);z(this,"_focusEventsAllowed",!0);b(this,Uc,!1);b(this,au,bt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=bt.prototype._resizeWithKeyboard,e=Jr.TRANSLATE_SMALL,s=Jr.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new lc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new u_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){var i;if((i=bt._l10n)!=null||(bt._l10n=t),bt._l10nResizer||(bt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),bt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Dt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Uc)}set _isDraggable(t){var e;g(this,Uc,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,au)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):w(this,ot,qh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,bo)?g(this,bo,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,i]=this.parentDimensions;this.setAt(t*s,e*i,this.width*s,this.height*i),this._onTranslated()}translate(t,e){w(this,ot,jp).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,ws)||g(this,ws,[this.x,this.y,this.width,this.height]),w(this,ot,jp).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,ws)||g(this,ws,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,h]=this.getBaseTranslation();o+=c,l+=h;const{style:d}=s;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,ws)&&(a(this,ws)[0]!==this.x||a(this,ws)[1]!==this.y)}get _hasBeenResized(){return!!a(this,ws)&&(a(this,ws)[2]!==this.width||a(this,ws)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=bt,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=We(r,0,s-l),o=We(o,0,i-c);break;case 90:r=We(r,0,s-c),o=We(o,l,i);break;case 180:r=We(r,l,s),o=We(o,c,i);break;case 270:r=We(r,c,s),o=We(o,0,i-l);break}this.x=r/=s,this.y=o/=i;const[h,d]=this.getBaseTranslation();r+=h,o+=d,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return w(s=bt,jc,zp).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return w(s=bt,jc,zp).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,a(this,go)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!a(this,go)&&e.endsWith("%");if(i&&r)return;const[o,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!a(this,go)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,zt))==null||t.finish()}addEditToolbar(){return V(this,null,function*(){return this._editToolbar||a(this,yo)?this._editToolbar:(this._editToolbar=new Yf(this),this.div.append(this._editToolbar.render()),a(this,zt)&&(yield this._editToolbar.addAltText(a(this,zt))),this._editToolbar)})}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,zt))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return V(this,null,function*(){a(this,zt)||(Ud.initialize(bt._l10n),g(this,zt,new Ud(this)),a(this,po)&&(a(this,zt).data=a(this,po),g(this,po,null)),yield this.addEditToolbar())})}get altTextData(){var t;return(t=a(this,zt))==null?void 0:t.data}set altTextData(t){a(this,zt)&&(a(this,zt).data=t)}get guessedAltText(){var t;return(t=a(this,zt))==null?void 0:t.guessedText}setGuessedAltText(t){return V(this,null,function*(){var e;yield(e=a(this,zt))==null?void 0:e.setGuessedText(t)})}serializeAltText(t){var e;return(e=a(this,zt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,zt)&&!a(this,zt).isEmpty()}hasAltTextData(){var t,e;return(e=(t=a(this,zt))==null?void 0:t.hasData())!=null?e:!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,$a)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),w(this,ot,qp).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Jf(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,wo)||g(this,wo,new jd({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:w(this,ot,ty).bind(this),onPinching:w(this,ot,ey).bind(this),onPinchEnd:w(this,ot,sy).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,bo,!0),this._isDraggable){w(this,ot,iy).call(this,t);return}w(this,ot,Wp).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Di)&&clearTimeout(a(this,Di)),g(this,Di,setTimeout(()=>{var t;g(this,Di,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,h=t/i,d=e/i,u=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(s){case 0:return[u+h+l,o-f-d-y+c,u+h+p+l,o-f-d+c];case 90:return[u+d+l,o-f+h+c,u+d+y+l,o-f+h+p+c];case 180:return[u-h-p+l,o-f+d+c,u-h+l,o-f+d+y+c];case 270:return[u-d-y+l,o-f-h-p+c,u-d+l,o-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,l=r-s,c=o-i;switch(this.rotation){case 0:return[s,e-o,l,c];case 90:return[s,e-i,c,l];case 180:return[r,e-i,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){g(this,yo,!0)}disableEditMode(){g(this,yo,!1)}isInEditMode(){return a(this,yo)}shouldGetKeyboardEvents(){return a(this,pn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}rebuild(){w(this,ot,qp).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Dt("An editor must be serializable")}static deserialize(t,e,s){return V(this,null,function*(){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,g(i,po,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[l,c,h,d]=i.getRectInCurrentCoords(t.rect,o);return i.x=l/r,i.y=c/o,i.width=h/r,i.height=d/o,i})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,mr))==null||t.abort(),g(this,mr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Di)&&(clearTimeout(a(this,Di)),g(this,Di,null)),w(this,ot,qh).call(this),this.removeEditToolbar(),a(this,Us)){for(const s of a(this,Us).values())clearTimeout(s);g(this,Us,null)}this.parent=null,(e=a(this,wo))==null||e.destroy(),g(this,wo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,ot,Q0).call(this),a(this,Pe).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,fn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Pe).children;if(!a(this,ri)){g(this,ri,Array.from(e));const o=w(this,ot,ny).bind(this),l=w(this,ot,ry).bind(this),c=this._uiManager._signal;for(const h of a(this,ri)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",w(this,ot,oy).bind(this,d),{signal:c}),h.setAttribute("data-l10n-id",bt._l10nResizer[d])}}const s=a(this,ri)[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,ri).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)a(this,Pe).append(a(this,Pe).firstChild);else if(r>i)for(let l=0;l<r-i;l++)a(this,Pe).firstChild.before(a(this,Pe).lastChild);let o=0;for(const l of e){const h=a(this,ri)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",bt._l10nResizer[h])}}w(this,ot,Xp).call(this,0),g(this,pn,!0),a(this,Pe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,pn)&&w(this,ot,Vp).call(this,a(this,Hc),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){w(this,ot,qh).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=a(this,zt))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=a(this,Pe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=a(this,zt))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,$c)}set isEditing(t){g(this,$c,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){g(this,go,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Us)||g(this,Us,new Map);const{action:s}=t;let i=a(this,Us).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),a(this,Us).delete(s),a(this,Us).size===0&&g(this,Us,null)},bt._telemetryTimeout),a(this,Us).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,$a,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,$a,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};po=new WeakMap,ri=new WeakMap,zt=new WeakMap,$a=new WeakMap,gr=new WeakMap,Bc=new WeakMap,go=new WeakMap,Pe=new WeakMap,mo=new WeakMap,fn=new WeakMap,mr=new WeakMap,Hc=new WeakMap,bo=new WeakMap,ws=new WeakMap,$c=new WeakMap,yo=new WeakMap,pn=new WeakMap,Di=new WeakMap,Ua=new WeakMap,ja=new WeakMap,Us=new WeakMap,wo=new WeakMap,Uc=new WeakMap,au=new WeakMap,ot=new WeakSet,jp=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},jc=new WeakSet,zp=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Pu=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},Q0=function(){if(a(this,Pe))return;g(this,Pe,document.createElement("div")),a(this,Pe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");a(this,Pe).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",w(this,ot,Z0).bind(this,s),{signal:e}),i.addEventListener("contextmenu",ti,{signal:e}),i.tabIndex=-1}this.div.prepend(a(this,Pe))},Z0=function(t,e){var d;e.preventDefault();const{isMac:s}=Se.platform;if(e.button!==0||e.ctrlKey&&s)return;(d=a(this,zt))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,mo,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,ot,Vp).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ne,{passive:!1,signal:o}),window.addEventListener("contextmenu",ti,{signal:o}),g(this,fn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var u;r.abort(),this.parent.togglePointerEvents(!0),(u=a(this,zt))==null||u.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,w(this,ot,ku).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Gp=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},ku=function(){if(!a(this,fn))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=a(this,fn);g(this,fn,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===s&&c===i||this.addCommands({cmd:w(this,ot,Gp).bind(this,r,o,l,c),undo:w(this,ot,Gp).bind(this,t,e,s,i),mustExec:!0})},Vp=function(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,h=bt.MIN_SIZE/s,d=bt.MIN_SIZE/i,u=w(this,ot,Pu).call(this,this.rotation),f=(L,B)=>[u[0]*L+u[2]*B,u[1]*L+u[3]*B],p=w(this,ot,Pu).call(this,360-this.rotation),y=(L,B)=>[p[0]*L+p[2]*B,p[1]*L+p[3]*B];let m,v,A=!1,x=!1;switch(t){case"topLeft":A=!0,m=(L,B)=>[0,0],v=(L,B)=>[L,B];break;case"topMiddle":m=(L,B)=>[L/2,0],v=(L,B)=>[L/2,B];break;case"topRight":A=!0,m=(L,B)=>[L,0],v=(L,B)=>[0,B];break;case"middleRight":x=!0,m=(L,B)=>[L,B/2],v=(L,B)=>[0,B/2];break;case"bottomRight":A=!0,m=(L,B)=>[L,B],v=(L,B)=>[0,0];break;case"bottomMiddle":m=(L,B)=>[L/2,B],v=(L,B)=>[L/2,0];break;case"bottomLeft":A=!0,m=(L,B)=>[0,B],v=(L,B)=>[L,0];break;case"middleLeft":x=!0,m=(L,B)=>[0,B/2],v=(L,B)=>[L,B/2];break}const E=m(l,c),_=v(l,c);let T=f(..._);const P=bt._round(r+T[0]),k=bt._round(o+T[1]);let D=1,I=1,N,j;if(e.fromKeyboard)({deltaX:N,deltaY:j}=e);else{const{screenX:L,screenY:B}=e,[lt,Tt]=a(this,mo);[N,j]=this.screenToPageTranslation(L-lt,B-Tt),a(this,mo)[0]=L,a(this,mo)[1]=B}if([N,j]=y(N/s,j/i),A){const L=Math.hypot(l,c);D=I=Math.max(Math.min(Math.hypot(_[0]-E[0]-N,_[1]-E[1]-j)/L,1/l,1/c),h/l,d/c)}else x?D=We(Math.abs(_[0]-E[0]-N),h,1)/l:I=We(Math.abs(_[1]-E[1]-j),d,1)/c;const O=bt._round(l*D),tt=bt._round(c*I);T=f(...v(O,tt));const M=P-T[0],G=k-T[1];a(this,ws)||g(this,ws,[this.x,this.y,this.width,this.height]),this.width=O,this.height=tt,this.x=M,this.y=G,this.setDims(s*O,i*tt),this.fixAndSetPosition(),this._onResizing()},ty=function(){var t;g(this,fn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,zt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},ey=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=w(this,ot,Pu).call(this,this.rotation),l=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,h]=this.parentDimensions,d=this.x,u=this.y,f=this.width,p=this.height,y=bt.MIN_SIZE/c,m=bt.MIN_SIZE/h;r=Math.max(Math.min(r,1/f,1/p),y/f,m/p);const v=bt._round(f*r),A=bt._round(p*r);if(v===f&&A===p)return;a(this,ws)||g(this,ws,[d,u,f,p]);const x=l(f/2,p/2),E=bt._round(d+x[0]),_=bt._round(u+x[1]),T=l(v/2,A/2);this.x=E-T[0],this.y=_-T[1],this.width=v,this.height=A,this.setDims(c*v,h*A),this.fixAndSetPosition(),this._onResizing()},sy=function(){var t;(t=a(this,zt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),w(this,ot,ku).call(this)},Wp=function(t){const{isMac:e}=Se.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},iy=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},l=h=>{i.abort(),g(this,gr,null),g(this,bo,!1),this._uiManager.endDragSession()||w(this,ot,Wp).call(this,h),s&&this._onStopDragging()};e&&(g(this,Ua,t.clientX),g(this,ja,t.clientY),g(this,gr,t.pointerId),g(this,Bc,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:d,clientY:u,pointerId:f}=h;if(f!==a(this,gr)){ne(h);return}const[p,y]=this.screenToPageTranslation(d-a(this,Ua),u-a(this,ja));g(this,Ua,d),g(this,ja,u),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",ne,o),window.addEventListener("pointerdown",h=>{h.pointerType===a(this,Bc)&&(a(this,wo)||h.isPrimary)&&l(h),ne(h)},o));const c=h=>{if(!a(this,gr)||a(this,gr)===h.pointerId){l(h);return}ne(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},qp=function(){if(a(this,mr)||!this.div)return;g(this,mr,new AbortController);const t=this._uiManager.combinedSignal(a(this,mr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ny=function(t){bt._resizerKeyboardManager.exec(this,t)},ry=function(t){var e;a(this,pn)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Pe)&&w(this,ot,qh).call(this)},oy=function(t){g(this,Hc,a(this,pn)?t:"")},Xp=function(t){if(a(this,ri))for(const e of a(this,ri))e.tabIndex=t},qh=function(){g(this,pn,!1),w(this,ot,Xp).call(this,-1),w(this,ot,ku).call(this)},b(bt,jc),z(bt,"_l10n",null),z(bt,"_l10nResizer",null),z(bt,"_borderLineWidth",-1),z(bt,"_colorManager",new Zf),z(bt,"_zIndex",1),z(bt,"_telemetryTimeout",1e3);let Ut=bt;class u_ extends Ut{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Db=3285377520,Os=4294901760,Ei=65535;class Fb{constructor(t){this.h1=t?t&4294967295:Db,this.h2=t?t&4294967295:Db}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let m=0,v=t.length;m<v;m++){const A=t.charCodeAt(m);A<=255?e[s++]=A:(e[s++]=A>>>8,e[s++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let l=0,c=0,h=this.h1,d=this.h2;const u=3432918353,f=461845907,p=u&Ei,y=f&Ei;for(let m=0;m<i;m++)m&1?(l=o[m],l=l*u&Os|l*p&Ei,l=l<<15|l>>>17,l=l*f&Os|l*y&Ei,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[m],c=c*u&Os|c*p&Ei,c=c<<15|c>>>17,c=c*f&Os|c*y&Ei,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*u&Os|l*p&Ei,l=l<<15|l>>>17,l=l*f&Os|l*y&Ei,i&1?h^=l:d^=l}this.h1=h,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Os|t*36045&Ei,e=e*4283543511&Os|((e<<16|t>>>16)*2950163797&Os)>>>16,t^=e>>>1,t=t*444984403&Os|t*60499&Ei,e=e*3301882366&Os|((e<<16|t>>>16)*3120437893&Os)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tp=Object.freeze({map:null,hash:"",transfer:void 0});class ep{constructor(){b(this,lu);b(this,vo,!1);b(this,Ao,null);b(this,ke,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=a(this,ke).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return a(this,ke).get(t)}remove(t){if(a(this,ke).delete(t),a(this,ke).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,ke).values())if(e instanceof Ut)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=a(this,ke).get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,a(this,ke).set(t,e);i&&w(this,lu,ay).call(this),e instanceof Ut&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,ke).has(t)}get size(){return a(this,ke).size}resetModified(){a(this,vo)&&(g(this,vo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Nb(this)}get serializable(){if(a(this,ke).size===0)return tp;const t=new Map,e=new Fb,s=[],i=Object.create(null);let r=!1;for(const[o,l]of a(this,ke)){const c=l instanceof Ut?l.serialize(!1,i):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:tp}get editorStats(){var s;let t=null;const e=new Map;for(const i of a(this,ke).values()){if(!(i instanceof Ut))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const l=t[o]||(t[o]=new Map);for(const[c,h]of Object.entries(r)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const u=(s=d.get(h))!=null?s:0;d.set(h,u+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){g(this,Ao,null)}get modifiedIds(){if(a(this,Ao))return a(this,Ao);const t=[];for(const e of a(this,ke).values())!(e instanceof Ut)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return g(this,Ao,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,ke).entries()}}vo=new WeakMap,Ao=new WeakMap,ke=new WeakMap,lu=new WeakSet,ay=function(){a(this,vo)||(g(this,vo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class Nb extends ep{constructor(e){super();b(this,zc);const{map:s,hash:i,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);g(this,zc,{map:o,hash:i,transfer:r})}get print(){Dt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,zc)}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}}zc=new WeakMap;class f_{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,za,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,za).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return V(this,arguments,function*({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||a(this,za).has(t.loadedName))){if(ie(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,c=new FontFace(r,o,l);this.addNativeFontFace(c);try{yield c.load(),a(this,za).add(r),s==null||s(t)}catch(h){ft(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Dt("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return V(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{yield s.loaded}catch(i){throw ft(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}})}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Ve||Se.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ie(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(_,T){return _.charCodeAt(T)<<24|_.charCodeAt(T+1)<<16|_.charCodeAt(T+2)<<8|_.charCodeAt(T+3)&255}function i(_,T,P,k){const D=_.substring(0,T),I=_.substring(T+P);return D+k+I}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function d(_,T){if(++h>30){ft("Load test font never loaded."),T();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,_,T))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,u.length,u);const y=16,m=1482184792;let v=s(f,y);for(r=0,o=u.length-3;r<o;r+=4)v=v-m+s(u,r)|0;r<u.length&&(v=v-m+s(u+"XXX",r)|0),f=i(f,y,4,QA(v));const A=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${u}";src:${A}}`;this.insertRule(x);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const _ of[t.loadedName,u]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=_,E.append(T)}this._document.body.append(E),d(u,()=>{E.remove(),e.complete()})}}za=new WeakMap;class p_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Mb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){ft(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const zd={DATA:1,ERROR:2},re={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ob(){}function ns(n){if(n instanceof Qn||n instanceof Uf||n instanceof Pb||n instanceof Hd||n instanceof $f)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Dt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Qn(n.message);case"InvalidPDFException":return new Uf(n.message);case"PasswordException":return new Pb(n.message,n.code);case"ResponseException":return new Hd(n.message,n.status,n.missing);case"UnknownErrorException":return new $f(n.message,n.details)}return new $f(n.message,n.toString())}class cc{constructor(t,e,s){b(this,js);b(this,Ga,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",w(this,js,ly).bind(this),{signal:a(this,Ga).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:h.desiredSize},i),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,c.postMessage({sourceName:o,targetName:l,stream:re.PULL,streamId:r,desiredSize:h.desiredSize}),d.promise},cancel:h=>{ie(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:re.CANCEL,streamId:r,reason:ns(h)}),d.promise}},s)}destroy(){var t;(t=a(this,Ga))==null||t.abort(),g(this,Ga,null)}}Ga=new WeakMap,js=new WeakSet,ly=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){w(this,js,hy).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===zd.DATA)i.resolve(t.data);else if(t.callback===zd.ERROR)i.reject(ns(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:zd.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:zd.ERROR,callbackId:t.callbackId,reason:ns(o)})});return}if(t.streamId){w(this,js,cy).call(this,t);return}e(t.data)},cy=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(h,d=1,u){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:re.ENQUEUE,streamId:e,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:re.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){ie(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:re.ERROR,streamId:e,reason:ns(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:re.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:re.START_COMPLETE,streamId:e,reason:ns(h)})})},hy=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case re.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ns(t.reason));break;case re.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ns(t.reason));break;case re.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:re.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||Ob).then(function(){r.postMessage({sourceName:s,targetName:i,stream:re.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:re.PULL_COMPLETE,streamId:e,reason:ns(h)})});break;case re.ENQUEUE:if(ie(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case re.CLOSE:if(ie(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),w(this,js,Ru).call(this,o,e);break;case re.ERROR:ie(o,"error should have stream controller"),o.controller.error(ns(t.reason)),w(this,js,Ru).call(this,o,e);break;case re.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ns(t.reason)),w(this,js,Ru).call(this,o,e);break;case re.CANCEL:if(!l)break;const c=ns(t.reason);Promise.try(l.onCancel||Ob,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:re.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:re.CANCEL_COMPLETE,streamId:e,reason:ns(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ru=function(t,e){return V(this,null,function*(){var s,i,r;yield Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]})};class Bb{constructor({enableHWA:t=!1}){b(this,Gc,!1);g(this,Gc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,Gc)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Dt("Abstract method `_createCanvas` called.")}}Gc=new WeakMap;class g_ extends Bb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Hb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return V(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const s=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(s).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})})}_fetch(t){return V(this,null,function*(){Dt("Abstract method `_fetch` called.")})}}class $b extends Hb{_fetch(t){return V(this,null,function*(){const e=yield oc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):rc(e)})}}class Ub{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}class m_ extends Ub{constructor({docId:e,ownerDocument:s=globalThis.document}){super();b(this,J);b(this,_o);b(this,Va);b(this,gn);b(this,mn);b(this,Be);b(this,xo);b(this,So,0);g(this,mn,e),g(this,Be,s)}addFilter(e){if(!e)return"none";let s=a(this,J,je).get(e);if(s)return s;const[i,r,o]=w(this,J,Iu).call(this,e),l=e.length===1?i:`${i}${r}${o}`;if(s=a(this,J,je).get(l),s)return a(this,J,je).set(e,s),s;const c=`g_${a(this,mn)}_transfer_map_${Ze(this,So)._++}`,h=w(this,J,Nl).call(this,c);a(this,J,je).set(e,h),a(this,J,je).set(l,h);const d=w(this,J,Ol).call(this,c);return w(this,J,Yh).call(this,i,r,o,d),h}addHCMFilter(e,s){var y;const i=`${e}-${s}`,r="base";let o=a(this,J,Xh).get(r);if((o==null?void 0:o.key)===i||(o?((y=o.filter)==null||y.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},a(this,J,Xh).set(r,o)),!e||!s))return o.url;const l=w(this,J,Jh).call(this,e);e=et.makeHexColor(...l);const c=w(this,J,Jh).call(this,s);if(s=et.makeHexColor(...c),a(this,J,Fl).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let m=0;m<=255;m++){const v=m/255;h[m]=v<=.03928?v/12.92:we((v+.055)/1.055,2.4)}const d=h.join(","),u=`g_${a(this,mn)}_hcm_filter`,f=o.filter=w(this,J,Ol).call(this,u);w(this,J,Yh).call(this,d,d,d,f),w(this,J,Kp).call(this,f);const p=(m,v)=>{const A=l[m]/255,x=c[m]/255,E=new Array(v+1);for(let _=0;_<=v;_++)E[_]=A+_/v*(x-A);return E.join(",")};return w(this,J,Yh).call(this,p(0,5),p(1,5),p(2,5),f),o.url=w(this,J,Nl).call(this,u),o.url}addAlphaFilter(e){let s=a(this,J,je).get(e);if(s)return s;const[i]=w(this,J,Iu).call(this,[e]),r=`alpha_${i}`;if(s=a(this,J,je).get(r),s)return a(this,J,je).set(e,s),s;const o=`g_${a(this,mn)}_alpha_map_${Ze(this,So)._++}`,l=w(this,J,Nl).call(this,o);a(this,J,je).set(e,l),a(this,J,je).set(r,l);const c=w(this,J,Ol).call(this,o);return w(this,J,Yp).call(this,i,c),l}addLuminosityFilter(e){let s=a(this,J,je).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=w(this,J,Iu).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=a(this,J,je).get(r),s)return a(this,J,je).set(e,s),s;const o=`g_${a(this,mn)}_luminosity_map_${Ze(this,So)._++}`,l=w(this,J,Nl).call(this,o);a(this,J,je).set(e,l),a(this,J,je).set(r,l);const c=w(this,J,Ol).call(this,o);return w(this,J,dy).call(this,c),e&&w(this,J,Yp).call(this,i,c),l}addHighlightHCMFilter(e,s,i,r,o){var x;const l=`${s}-${i}-${r}-${o}`;let c=a(this,J,Xh).get(e);if((c==null?void 0:c.key)===l||(c?((x=c.filter)==null||x.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,J,Xh).set(e,c)),!s||!i))return c.url;const[h,d]=[s,i].map(w(this,J,Jh).bind(this));let u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,y]=[r,o].map(w(this,J,Jh).bind(this));f<u&&([u,f,p,y]=[f,u,y,p]),a(this,J,Fl).style.color="";const m=(E,_,T)=>{const P=new Array(256),k=(f-u)/T,D=E/255,I=(_-E)/(255*T);let N=0;for(let j=0;j<=T;j++){const O=Math.round(u+j*k),tt=D+j*I;for(let M=N;M<=O;M++)P[M]=tt;N=O+1}for(let j=N;j<256;j++)P[j]=P[N-1];return P.join(",")},v=`g_${a(this,mn)}_hcm_${e}_filter`,A=c.filter=w(this,J,Ol).call(this,v);return w(this,J,Kp).call(this,A),w(this,J,Yh).call(this,m(p[0],y[0],5),m(p[1],y[1],5),m(p[2],y[2],5),A),c.url=w(this,J,Nl).call(this,v),c.url}destroy(e=!1){var s,i,r,o;e&&((s=a(this,xo))!=null&&s.size)||((i=a(this,gn))==null||i.parentNode.parentNode.remove(),g(this,gn,null),(r=a(this,Va))==null||r.clear(),g(this,Va,null),(o=a(this,xo))==null||o.clear(),g(this,xo,null),g(this,So,0))}}_o=new WeakMap,Va=new WeakMap,gn=new WeakMap,mn=new WeakMap,Be=new WeakMap,xo=new WeakMap,So=new WeakMap,J=new WeakSet,je=function(){return a(this,Va)||g(this,Va,new Map)},Xh=function(){return a(this,xo)||g(this,xo,new Map)},Fl=function(){if(!a(this,gn)){const e=a(this,Be).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=a(this,Be).createElementNS(tn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,gn,a(this,Be).createElementNS(tn,"defs")),e.append(i),i.append(a(this,gn)),a(this,Be).body.append(e)}return a(this,gn)},Iu=function(e){if(e.length===1){const h=e[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=h[f]/255;const u=d.join(",");return[u,u,u]}const[s,i,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,l[h]=i[h]/255,c[h]=r[h]/255;return[o.join(","),l.join(","),c.join(",")]},Nl=function(e){if(a(this,_o)===void 0){g(this,_o,"");const s=a(this,Be).URL;s!==a(this,Be).baseURI&&($d(s)?ft('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,_o,Tb(s,"")))}return`url(${a(this,_o)}#${e})`},dy=function(e){const s=a(this,Be).createElementNS(tn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},Kp=function(e){const s=a(this,Be).createElementNS(tn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Ol=function(e){const s=a(this,Be).createElementNS(tn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),a(this,J,Fl).append(s),s},Kh=function(e,s,i){const r=a(this,Be).createElementNS(tn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},Yh=function(e,s,i,r){const o=a(this,Be).createElementNS(tn,"feComponentTransfer");r.append(o),w(this,J,Kh).call(this,o,"feFuncR",e),w(this,J,Kh).call(this,o,"feFuncG",s),w(this,J,Kh).call(this,o,"feFuncB",i)},Yp=function(e,s){const i=a(this,Be).createElementNS(tn,"feComponentTransfer");s.append(i),w(this,J,Kh).call(this,i,"feFuncA",e)},Jh=function(e){return a(this,J,Fl).style.color=e,Xf(getComputedStyle(a(this,J,Fl)).getPropertyValue("color"))};class jb{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return V(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${t}`;return this._fetch(s).catch(i=>{throw new Error(`Unable to load font data at: ${s}`)})})}_fetch(t){return V(this,null,function*(){Dt("Abstract method `_fetch` called.")})}}class zb extends jb{_fetch(t){return V(this,null,function*(){const e=yield oc(t,"arraybuffer");return new Uint8Array(e)})}}class Gb{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return V(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const s=`${this.baseUrl}${t}`;return this._fetch(s).catch(i=>{throw new Error(`Unable to load wasm data at: ${s}`)})})}_fetch(t){return V(this,null,function*(){Dt("Abstract method `_fetch` called.")})}}class Vb extends Gb{_fetch(t){return V(this,null,function*(){const e=yield oc(t,"arraybuffer");return new Uint8Array(e)})}}Ve&&ft("Please use the `legacy` build in Node.js environments.");function sp(n){return V(this,null,function*(){const e=yield process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)})}class b_ extends Ub{}class y_ extends Bb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(rt&&rt.tagName.toUpperCase()==="SCRIPT"&&rt.src||new URL("assets/index.js",document.baseURI).href)("@napi-rs/canvas").createCanvas(t,e)}}class w_ extends Hb{_fetch(t){return V(this,null,function*(){return sp(t)})}}class v_ extends jb{_fetch(t){return V(this,null,function*(){return sp(t)})}}class A_ extends Gb{_fetch(t){return V(this,null,function*(){return sp(t)})}}const Ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ip(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class np{isModifyingCurrentTransform(){return!1}getPattern(){Dt("Abstract method `getPattern` called.")}}class __ extends np{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===Ee.STROKE||i===Ee.FILL){const o=e.current.getClippedPathBoundingBox(i,Kt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=et.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),ip(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=t.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(s);r.setTransform(u)}else ip(t,this._bbox),r=this._createGradient(t);return r}}function rp(n,t,e,s,i,r,o,l){const c=t.coords,h=t.colors,d=n.data,u=n.width*4;let f;c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,m=(c[s]+t.offsetX)*t.scaleX,v=(c[s+1]+t.offsetY)*t.scaleY,A=(c[i]+t.offsetX)*t.scaleX,x=(c[i+1]+t.offsetY)*t.scaleY;if(y>=x)return;const E=h[r],_=h[r+1],T=h[r+2],P=h[o],k=h[o+1],D=h[o+2],I=h[l],N=h[l+1],j=h[l+2],O=Math.round(y),tt=Math.round(x);let M,G,L,B,lt,Tt,Ue,ue;for(let Pt=O;Pt<=tt;Pt++){if(Pt<v){const Ht=Pt<y?0:(y-Pt)/(y-v);M=p-(p-m)*Ht,G=E-(E-P)*Ht,L=_-(_-k)*Ht,B=T-(T-D)*Ht}else{let Ht;Pt>x?Ht=1:v===x?Ht=0:Ht=(v-Pt)/(v-x),M=m-(m-A)*Ht,G=P-(P-I)*Ht,L=k-(k-N)*Ht,B=D-(D-j)*Ht}let Mt;Pt<y?Mt=0:Pt>x?Mt=1:Mt=(y-Pt)/(y-x),lt=p-(p-A)*Mt,Tt=E-(E-I)*Mt,Ue=_-(_-N)*Mt,ue=T-(T-j)*Mt;const Xs=Math.round(Math.min(M,lt)),zi=Math.round(Math.max(M,lt));let hs=u*Pt+Xs*4;for(let Ht=Xs;Ht<=zi;Ht++)Mt=(M-Ht)/(M-lt),Mt<0?Mt=0:Mt>1&&(Mt=1),d[hs++]=G-(G-Tt)*Mt|0,d[hs++]=L-(L-Ue)*Mt|0,d[hs++]=B-(B-ue)*Mt|0,d[hs++]=255}}function x_(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(s.length/l)-1,h=l-1;for(r=0;r<c;r++){let d=r*l;for(let u=0;u<h;u++,d++)rp(n,e,s[d],s[d+1],s[d+l],i[d],i[d+1],i[d+l]),rp(n,e,s[d+l+1],s[d+1],s[d+l],i[d+l+1],i[d+1],i[d+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)rp(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class S_ extends np{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,u=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),p=h/u,y=d/f,m={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/y},v=u+2*2,A=f+2*2,x=s.getCanvas("mesh",v,A),E=x.context,_=E.createImageData(u,f);if(e){const P=_.data;for(let k=0,D=P.length;k<D;k+=4)P[k]=e[0],P[k+1]=e[1],P[k+2]=e[2],P[k+3]=255}for(const P of this._figures)x_(_,P,m);return E.putImageData(_,2,2),{canvas:x.canvas,offsetX:l-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,i){ip(t,this._bbox);const r=new Float32Array(2);if(i===Ee.SHADING)et.singularValueDecompose2dScale(Kt(t),r);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;et.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else et.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===Ee.SHADING?null:this._background,e.cachedCanvases);return i!==Ee.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class E_ extends np{getPattern(){return"hotpink"}}function C_(n){switch(n[0]){case"RadialAxial":return new __(n);case"Mesh":return new S_(n);case"Dummy":return new E_}throw new Error(`Unknown IR type: ${n[0]}`)}const Wb={COLORED:1,UNCOLORED:2},cu=class cu{constructor(t,e,s,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),Bd("TilingType: "+r);const d=e[0],u=e[1],f=e[2],p=e[3],y=f-d,m=p-u,v=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,v);const[A,x]=v;et.singularValueDecompose2dScale(this.baseTransform,v);const E=A*v[0],_=x*v[1];let T=y,P=m,k=!1,D=!1;const I=Math.ceil(c*E),N=Math.ceil(h*_),j=Math.ceil(y*E),O=Math.ceil(m*_);I>=j?T=c:k=!0,N>=O?P=h:D=!0;const tt=this.getSizeAndScale(T,this.ctx.canvas.width,E),M=this.getSizeAndScale(P,this.ctx.canvas.height,_),G=t.cachedCanvases.getCanvas("pattern",tt.size,M.size),L=G.context,B=l.createCanvasGraphics(L);if(B.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(B,i,o),L.translate(-tt.scale*d,-M.scale*u),B.transform(tt.scale,0,0,M.scale,0,0),L.save(),this.clipBbox(B,d,u,f,p),B.baseTransform=Kt(B.ctx),B.executeOperatorList(s),B.endDrawing(),L.restore(),k||D){const lt=G.canvas;k&&(T=c),D&&(P=h);const Tt=this.getSizeAndScale(T,this.ctx.canvas.width,E),Ue=this.getSizeAndScale(P,this.ctx.canvas.height,_),ue=Tt.size,Pt=Ue.size,Mt=t.cachedCanvases.getCanvas("pattern-workaround",ue,Pt),Xs=Mt.context,zi=k?Math.floor(y/c):0,hs=D?Math.floor(m/h):0;for(let Ht=0;Ht<=zi;Ht++)for(let On=0;On<=hs;On++)Xs.drawImage(lt,ue*Ht,Pt*On,ue,Pt,0,0,ue,Pt);return{canvas:Mt.canvas,scaleX:Tt.scale,scaleY:Ue.scale,offsetX:d,offsetY:u}}return{canvas:G.canvas,scaleX:tt.scale,scaleY:M.scale,offsetX:d,offsetY:u}}getSizeAndScale(t,e,s){const i=Math.max(cu.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,l=r-s;t.ctx.rect(e,s,o,l),et.axialAlignedBoundingBox([e,s,i,r],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case Wb.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case Wb.UNCOLORED:const l=et.makeHexColor(s[0],s[1],s[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new JA(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,i){let r=s;i!==Ee.SHADING&&(r=et.transform(r,e.baseTransform),this.matrix&&(r=et.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};z(cu,"MAX_PATTERN_SIZE",3e3);let op=cu;function T_({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Se.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],d=s>>3,u=s&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let y=0;y<i;y++){for(const v=t+d;t<v;t++){const A=t<f?n[t]:255;e[p++]=A&128?h:c,e[p++]=A&64?h:c,e[p++]=A&32?h:c,e[p++]=A&16?h:c,e[p++]=A&8?h:c,e[p++]=A&4?h:c,e[p++]=A&2?h:c,e[p++]=A&1?h:c}if(u===0)continue;const m=t<f?n[t++]:255;for(let v=0;v<u;v++)e[p++]=m&1<<7-v?h:c}return{srcPos:t,destPos:p}}const qb=16,Xb=100,P_=15,Kb=10,rs=16,ap=new DOMMatrix,ms=new Float32Array(2),xa=new Float32Array([1/0,1/0,-1/0,-1/0]);function k_(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},n.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},n.transform=function(e,s,i,r,o,l){t.transform(e,s,i,r,o,l),this.__originalTransform(e,s,i,r,o,l)},n.setTransform=function(e,s,i,r,o,l){t.setTransform(e,s,i,r,o,l),this.__originalSetTransform(e,s,i,r,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,l){t.bezierCurveTo(e,s,i,r,o,l),this.__originalBezierCurveTo(e,s,i,r,o,l)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class R_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Gd(n,t,e,s,i,r,o,l,c,h){const[d,u,f,p,y,m]=Kt(n);if(u===0&&f===0){const x=o*d+y,E=Math.round(x),_=l*p+m,T=Math.round(_),P=(o+c)*d+y,k=Math.abs(Math.round(P)-E)||1,D=(l+h)*p+m,I=Math.abs(Math.round(D)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),E,T),n.drawImage(t,e,s,i,r,0,0,k,I),n.setTransform(d,u,f,p,y,m),[k,I]}if(d===0&&p===0){const x=l*f+y,E=Math.round(x),_=o*u+m,T=Math.round(_),P=(l+h)*f+y,k=Math.abs(Math.round(P)-E)||1,D=(o+c)*u+m,I=Math.abs(Math.round(D)-T)||1;return n.setTransform(0,Math.sign(u),Math.sign(f),0,E,T),n.drawImage(t,e,s,i,r,0,0,I,k),n.setTransform(d,u,f,p,y,m),[I,k]}n.drawImage(t,e,s,i,r,o,l,c,h);const v=Math.hypot(d,u),A=Math.hypot(f,p);return[v*c,A*h]}class Yb{constructor(t,e){z(this,"alphaIsShape",!1);z(this,"fontSize",0);z(this,"fontSizeScale",1);z(this,"textMatrix",null);z(this,"textMatrixScale",1);z(this,"fontMatrix",Bf);z(this,"leading",0);z(this,"x",0);z(this,"y",0);z(this,"lineX",0);z(this,"lineY",0);z(this,"charSpacing",0);z(this,"wordSpacing",0);z(this,"textHScale",1);z(this,"textRenderingMode",Ne.FILL);z(this,"textRise",0);z(this,"fillColor","#000000");z(this,"strokeColor","#000000");z(this,"patternFill",!1);z(this,"patternStroke",!1);z(this,"fillAlpha",1);z(this,"strokeAlpha",1);z(this,"lineWidth",1);z(this,"activeSMask",null);z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=xa.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ee.FILL,e=null){const s=this.minMax.slice();if(t===Ee.STROKE){e||Dt("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(e,ms);const i=ms[0]*this.lineWidth/2,r=ms[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(xa,0)}getClippedPathBoundingBox(t=Ee.FILL,e=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Jb(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%rs,r=(e-i)/rs,o=i===0?r:r+1,l=n.createImageData(s,rs);let c=0,h;const d=t.data,u=l.data;let f,p,y,m;if(t.kind===Ld.GRAYSCALE_1BPP){const v=d.byteLength,A=new Uint32Array(u.buffer,0,u.byteLength>>2),x=A.length,E=s+7>>3,_=4294967295,T=Se.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?rs:i,h=0,p=0;p<y;p++){const P=v-c;let k=0;const D=P>E?s:P*8-7,I=D&-8;let N=0,j=0;for(;k<I;k+=8)j=d[c++],A[h++]=j&128?_:T,A[h++]=j&64?_:T,A[h++]=j&32?_:T,A[h++]=j&16?_:T,A[h++]=j&8?_:T,A[h++]=j&4?_:T,A[h++]=j&2?_:T,A[h++]=j&1?_:T;for(;k<D;k++)N===0&&(j=d[c++],N=128),A[h++]=j&N?_:T,N>>=1}for(;h<x;)A[h++]=0;n.putImageData(l,0,f*rs)}}else if(t.kind===Ld.RGBA_32BPP){for(p=0,m=s*rs*4,f=0;f<r;f++)u.set(d.subarray(c,c+m)),c+=m,n.putImageData(l,0,p),p+=rs;f<o&&(m=s*i*4,u.set(d.subarray(c,c+m)),n.putImageData(l,0,p))}else if(t.kind===Ld.RGB_24BPP)for(y=rs,m=s*y,f=0;f<o;f++){for(f>=r&&(y=i,m=s*y),h=0,p=m;p--;)u[h++]=d[c++],u[h++]=d[c++],u[h++]=d[c++],u[h++]=255;n.putImageData(l,0,f*rs)}else throw new Error(`bad image kind: ${t.kind}`)}function Qb(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%rs,r=(e-i)/rs,o=i===0?r:r+1,l=n.createImageData(s,rs);let c=0;const h=t.data,d=l.data;for(let u=0;u<o;u++){const f=u<r?rs:i;({srcPos:c}=T_({src:h,srcPos:c,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,u*rs)}}function hc(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Vd(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function Zb(n,t){if(t)return!0;et.singularValueDecompose2dScale(n,ms);const e=Math.fround(en.pixelRatio*Zn.PDF_TO_CSS_UNITS);return ms[0]<=e&&ms[1]<=e}const I_=["butt","round","square"],M_=["miter","round","bevel"],L_={},t0={},kp=class kp{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:l=null},c,h){b(this,oi);this.ctx=t,this.current=new Yb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new R_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),Vd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const h=c-l>Kb&&typeof s=="function",d=h?Date.now()+P_:0;let u=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(y=o[l],y!==Fd.dependency)this[y].apply(this,r[l]);else for(const m of r[l]){const v=m.startsWith("g_")?f:p;if(!v.has(m))return v.get(m,s),l}if(l++,l===c)return l;if(h&&++u>Kb){if(Date.now()>d)return s(),l;u=0}}}endDrawing(){w(this,oi,Jp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),w(this,oi,Qp).call(this)}_scaleImage(t,e){var f,p;const s=(f=t.width)!=null?f:t.displayWidth,i=(p=t.height)!=null?p:t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=i,h="prescale1",d,u;for(;r>2&&l>1||o>2&&c>1;){let y=l,m=c;r>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/y),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),d=this.cachedCanvases.getCanvas(h,y,m),u=d.context,u.clearRect(0,0,y,m),u.drawImage(t,0,0,l,c,0,0,y,m),t=d.canvas,l=y,c=m,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,l=Kt(e);let c,h,d,u;if((t.bitmap||t.data)&&t.count>1){const I=t.bitmap||t.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(I),c||(c=new Map,this._cachedBitmapsMap.set(I,c));const N=c.get(h);if(N&&!o){const j=Math.round(Math.min(l[0],l[2])+l[4]),O=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:N,offsetX:j,offsetY:O}}d=N}d||(u=this.cachedCanvases.getCanvas("maskCanvas",s,i),Qb(u.context,t));let f=et.transform(l,[1/s,0,0,-1/i,0,0]);f=et.transform(f,[1,0,0,1,0,-i]);const p=xa.slice();et.axialAlignedBoundingBox([0,0,s,i],f,p);const[y,m,v,A]=p,x=Math.round(v-y)||1,E=Math.round(A-m)||1,_=this.cachedCanvases.getCanvas("fillCanvas",x,E),T=_.context,P=y,k=m;T.translate(-P,-k),T.transform(...f),d||(d=this._scaleImage(u.canvas,Si(T)),d=d.img,c&&o&&c.set(h,d)),T.imageSmoothingEnabled=Zb(Kt(T),t.interpolate),Gd(T,d,0,0,d.width,d.height,0,0,s,i),T.globalCompositeOperation="source-in";const D=et.transform(Si(T),[1,0,0,1,-P,-k]);return T.fillStyle=o?r.getPattern(e,this,D,Ee.FILL):r,T.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,_.canvas)),{canvas:_.canvas,offsetX:Math.round(P),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=I_[t]}setLineJoin(t){this.ctx.lineJoin=M_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),hc(this.suspendedCtx,r),k_(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],l=i[2]-r,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,s,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,l,c,h,d,u){let f=t.canvas,p=c-d,y=h-u;if(o){const v=et.makeHexColor(...o);if(p<0||y<0||p+s>f.width||y+i>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,i),x=A.context;x.drawImage(f,-p,-y),x.globalCompositeOperation="destination-atop",x.fillStyle=v,x.fillRect(0,0,s,i),x.globalCompositeOperation="source-over",f=A.canvas,p=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,y,s,i),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(p,y,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const m=new Path2D;m.rect(c,h,s,i),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,p,y,s,i,c,h,s,i),e.restore()}save(){this.inSMaskMode&&hc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,i,r,o){this.ctx.transform(t,e,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[i]=e;if(!s){i||(i=e[0]=new Path2D),this[t](i);return}if(!(i instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,l=i.length;o<l;)switch(i[o++]){case Nd.moveTo:r.moveTo(i[o++],i[o++]);break;case Nd.lineTo:r.lineTo(i[o++],i[o++]);break;case Nd.curveTo:r.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Nd.closePath:r.closePath();break;default:ft(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=r}et.axialAlignedBoundingBox(s,Kt(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Si(s),Ee.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ee.STROKE,Kt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,Si(s),Ee.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=L_}eoClip(){this.pendingClip=t0}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(i).translate(o,l).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var d;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||Bf,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ft("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((d=s.systemFontInfo)==null?void 0:d.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let h=e;e<qb?h=qb:e>Xb&&(h=Xb),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const o=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,u=h&Ne.FILL_STROKE_MASK,f=!!(h&Ne.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let m;if((c.disableFontFace||f||p||y)&&(m=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||y){o.save(),o.translate(e,s),o.scale(d,-d);let v;if((u===Ne.FILL||u===Ne.FILL_STROKE)&&(i?(v=o.getTransform(),o.setTransform(...i),o.fill(w(this,oi,Zp).call(this,m,v,i))):o.fill(m)),u===Ne.STROKE||u===Ne.FILL_STROKE)if(r){v||(v=o.getTransform()),o.setTransform(...r);const{a:A,b:x,c:E,d:_}=v,T=et.inverseTransform(r),P=et.transform([A,x,E,_,0,0],T);et.singularValueDecompose2dScale(P,ms),o.lineWidth*=Math.max(ms[0],ms[1])/d,o.stroke(w(this,oi,Zp).call(this,m,v,r))}else o.lineWidth/=d,o.stroke(m);o.restore()}else(u===Ne.FILL||u===Ne.FILL_STROKE)&&o.fillText(t,e,s),(u===Ne.STROKE||u===Ne.FILL_STROKE)&&o.strokeText(t,e,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Kt(o),x:e,y:s,fontSize:d,path:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return wt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,d=e.textHScale*h,u=t.length,f=s.vertical,p=f?1:-1,y=s.defaultVMetrics,m=i*e.fontMatrix[0],v=e.textRenderingMode===Ne.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(d,-1):r.scale(d,1);let A,x;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,Si(r),Ee.FILL);A=Kt(r),r.restore(),r.fillStyle=k}if(e.patternStroke){r.save();const k=e.strokeColor.getPattern(r,this,Si(r),Ee.STROKE);x=Kt(r),r.restore(),r.strokeStyle=k}let E=e.lineWidth;const _=e.textMatrixScale;if(_===0||E===0){const k=e.textRenderingMode&Ne.FILL_STROKE_MASK;(k===Ne.STROKE||k===Ne.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=_;if(o!==1&&(r.scale(o,o),E/=o),r.lineWidth=E,s.isInvalidPDFjsFont){const k=[];let D=0;for(const I of t)k.push(I.unicode),D+=I.width;r.fillText(k.join(""),0,0),e.x+=D*m*d,r.restore(),this.compose();return}let T=0,P;for(P=0;P<u;++P){const k=t[P];if(typeof k=="number"){T+=p*k*i/1e3;continue}let D=!1;const I=(k.isSpace?c:0)+l,N=k.fontChar,j=k.accent;let O,tt,M=k.width;if(f){const L=k.vmetric||y,B=-(k.vmetric?L[1]:M*.5)*m,lt=L[2]*m;M=L?-L[0]:M,O=B/o,tt=(T+lt)/o}else O=T/o,tt=0;if(s.remeasure&&M>0){const L=r.measureText(N).width*1e3/i*o;if(M<L&&this.isFontSubpixelAAEnabled){const B=M/L;D=!0,r.save(),r.scale(B,1),O/=B}else M!==L&&(O+=(M-L)/2e3*i/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(v&&!j)r.fillText(N,O,tt);else if(this.paintChar(N,O,tt,A,x),j){const L=O+i*j.offset.x/o,B=tt-i*j.offset.y/o;this.paintChar(j.fontChar,L,B,A,x)}}const G=f?M*m-I*h:M*m+I*h;T+=G,D&&r.restore()}f?e.y-=T:e.x+=T*d,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,l=i.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,d=s.textHScale*o,u=s.fontMatrix||Bf,f=t.length,p=s.textRenderingMode===Ne.INVISIBLE;let y,m,v,A;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(d,o),y=0;y<f;++y){if(m=t[y],typeof m=="number"){A=l*m*r/1e3,this.ctx.translate(A,0),s.x+=A*d;continue}const x=(m.isSpace?h:0)+c,E=i.charProcOperatorList[m.operatorListId];E?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...u),this.executeOperatorList(E),this.restore()):ft(`Type3 character "${m.operatorListId}" is not available.`);const _=[m.width,0];et.applyTransform(_,u),v=_[0]*r+x,e.translate(v,0),s.x+=v*d}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,o){const l=new Path2D;l.rect(s,i,r-s,o-i),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Kt(this.ctx),i={createCanvasGraphics:r=>new kp(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new op(t,this.ctx,i,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=et.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=et.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=C_(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,Si(e),Ee.SHADING);const i=Si(e);if(i){const{width:r,height:o}=e.canvas,l=xa.slice();et.axialAlignedBoundingBox([0,0,r,o],i,l);const[c,h,d,u]=l;this.ctx.fillRect(c,h,d-c,u-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Dt("Should not call beginInlineImage")}beginImageData(){Dt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Kt(this.ctx),e)){et.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,i,r,o]=e,l=new Path2D;l.rect(s,i,r-s,o-i),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Bd("TODO: Support non-isolated groups."),t.knockout&&ft("Knockout groups not supported.");const s=Kt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=xa.slice();et.axialAlignedBoundingBox(t.bbox,Kt(e),i);const r=[0,0,e.canvas.width,e.canvas.height];i=et.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),h=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(d,c,h),f=u.context;f.translate(-o,-l),f.transform(...s);let p=new Path2D;const[y,m,v,A]=t.bbox;if(p.rect(y,m,v-y,A-m),t.matrix){const x=new Path2D;x.addPath(p,new DOMMatrix(t.matrix)),p=x}f.clip(p),t.smask?this.smaskStack.push({canvas:u.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),hc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Kt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=xa.slice();et.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(w(this,oi,Jp).call(this),Vd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l,et.singularValueDecompose2dScale(Kt(this.ctx),ms);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:u,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(ms[0],0,0,-ms[1],0,l*ms[1]),Vd(this.ctx)}else{Vd(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,l),this.ctx.clip(c)}}this.current=new Yb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,oi,Qp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this._createMaskCanvas(t),r=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Kt(l);l.transform(e,s,i,r,0,0);const h=this._createMaskCanvas(t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let d=0,u=o.length;d<u;d+=2){const f=et.transform(c,[e,s,i,r,o[d],o[d+1]]);l.drawImage(h.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:h}=r,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),u=d.context;u.save();const f=this.getObject(o,r);Qb(u,f),u.globalCompositeOperation="source-in",u.fillStyle=i?s.getPattern(u,this,Si(e),Ee.FILL):s,u.fillRect(0,0,l,c),u.restore(),e.save(),e.transform(...h),e.scale(1,-1),Gd(e,d.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ft("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){ft("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let h=0,d=i.length;h<d;h+=2)c.push({transform:[e,0,0,s,i[h],i[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Jb(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,Si(i));i.imageSmoothingEnabled=Zb(Kt(i),t.interpolate),Gd(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Jb(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Gd(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===t0?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=l=1/c;else{const d=c*t;o=l=d<1?1/d:1}else if(t===0)o=1/c,l=1/h;else{const d=c*t,u=h*t;o=d<1?1/d:1,l=u<1?1/u:1}}else{const c=Math.abs(e*r-s*i),h=Math.hypot(e,s),d=Math.hypot(i,r);if(t===0)o=d/c,l=h/c;else{const u=t*c;o=d>u?d/u:1,l=h>u?h/u:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(t);return}const l=s.getLineDash();e&&s.save(),s.scale(r,o),ap.a=1/r,ap.d=1/o;const c=new Path2D;if(c.addPath(t,ap),l.length>0){const h=Math.max(r,o);s.setLineDash(l.map(d=>d/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};oi=new WeakSet,Jp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Qp=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Zp=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let Sa=kp;for(const n in Fd)Sa.prototype[n]!==void 0&&(Sa.prototype[Fd[n]]=Sa.prototype[n]);class ei{static get workerPort(){return a(this,Vc)}static set workerPort(t){if(!(typeof Worker!="undefined"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,Vc,t)}static get workerSrc(){return a(this,Wc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,Wc,t)}}Vc=new WeakMap,Wc=new WeakMap,b(ei,Vc,null),b(ei,Wc,"");class D_{constructor({parsedData:t,rawData:e}){b(this,Wa);b(this,qc);g(this,Wa,t),g(this,qc,e)}getRaw(){return a(this,qc)}get(t){var e;return(e=a(this,Wa).get(t))!=null?e:null}[Symbol.iterator](){return a(this,Wa).entries()}}Wa=new WeakMap,qc=new WeakMap;const Ea=Symbol("INTERNAL");class F_{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){b(this,Xc,!1);b(this,Kc,!1);b(this,Yc,!1);b(this,qa,!0);g(this,Xc,!!(t&gs.DISPLAY)),g(this,Kc,!!(t&gs.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(a(this,Yc))return a(this,qa);if(!a(this,qa))return!1;const{print:t,view:e}=this.usage;return a(this,Xc)?(e==null?void 0:e.viewState)!=="OFF":a(this,Kc)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==Ea&&Dt("Internal method `_setVisible` called."),g(this,Yc,s),g(this,qa,e)}}Xc=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,qa=new WeakMap;class N_{constructor(t,e=gs.DISPLAY){b(this,Jc);b(this,br,null);b(this,Ft,new Map);b(this,Xa,null);b(this,Ka,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,Ka,t.order);for(const s of t.groups)a(this,Ft).set(s.id,new F_(e,s));if(t.baseState==="OFF")for(const s of a(this,Ft).values())s._setVisible(Ea,!1);for(const s of t.on)a(this,Ft).get(s)._setVisible(Ea,!0);for(const s of t.off)a(this,Ft).get(s)._setVisible(Ea,!1);g(this,Xa,this.getHash())}}isVisible(t){if(a(this,Ft).size===0)return!0;if(!t)return Bd("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Ft).has(t.id)?a(this,Ft).get(t.id).visible:(ft(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return w(this,Jc,tg).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Ft).has(e))return ft(`Optional content group not found: ${e}`),!0;if(a(this,Ft).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Ft).has(e))return ft(`Optional content group not found: ${e}`),!0;if(!a(this,Ft).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Ft).has(e))return ft(`Optional content group not found: ${e}`),!0;if(!a(this,Ft).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Ft).has(e))return ft(`Optional content group not found: ${e}`),!0;if(a(this,Ft).get(e).visible)return!1}return!0}return ft(`Unknown optional content policy ${t.policy}.`),!0}return ft(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=a(this,Ft).get(t);if(!i){ft(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==t&&((r=a(this,Ft).get(l))==null||r._setVisible(Ea,!1,!0));i._setVisible(Ea,!!e,!0),g(this,br,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=a(this,Ft).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}g(this,br,null)}get hasInitialVisibility(){return a(this,Xa)===null||this.getHash()===a(this,Xa)}getOrder(){return a(this,Ft).size?a(this,Ka)?a(this,Ka).slice():[...a(this,Ft).keys()]:null}getGroup(t){return a(this,Ft).get(t)||null}getHash(){if(a(this,br)!==null)return a(this,br);const t=new Fb;for(const[e,s]of a(this,Ft))t.update(`${e}:${s.visible}`);return g(this,br,t.hexdigest())}[Symbol.iterator](){return a(this,Ft).entries()}}br=new WeakMap,Ft=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,Jc=new WeakSet,tg=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=w(this,Jc,tg).call(this,r);else if(a(this,Ft).has(r))o=a(this,Ft).get(r).visible;else return ft(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class O_{constructor(t,{disableRange:e=!1,disableStream:s=!1}){ie(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});ie(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ie(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new B_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new H_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class B_{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=Wf(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return V(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class H_{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return V(this,null,function*(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $_(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let d=l(e);return d=unescape(d),d=c(d),d=h(d),r(d)}if(e=o(n),e){const d=h(e);return r(d)}if(e=s("filename","i").exec(n),e){e=e[1];let d=l(e);return d=h(d),r(d)}function s(d,u){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function i(d,u){if(d){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const f=new TextDecoder(d,{fatal:!0}),p=rc(u);u=f.decode(p),t=!1}catch(f){}}return u}function r(d){return t&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),t&&(d=i("iso-8859-1",d))),d}function o(d){const u=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,m,v,A]=f;if(m=parseInt(m,10),m in u){if(m===0)break;continue}u[m]=[v,A]}const y=[];for(let m=0;m<u.length&&m in u;++m){let[v,A]=u[m];A=l(A),v&&(A=unescape(A),m===0&&(A=c(A))),y.push(A)}return y.join("")}function l(d){if(d.startsWith('"')){const u=d.slice(1).split('\\"');for(let f=0;f<u.length;++f){const p=u[f].indexOf('"');p!==-1&&(u[f]=u[f].slice(0,p),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}d=u.join('"')}return d}function c(d){const u=d.indexOf("'");if(u===-1)return d;const f=d.slice(0,u),y=d.slice(u+1).replace(/^[^']*'/,"");return i(f,y)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),i(f,y);try{y=atob(y)}catch(m){}return i(f,y)})}return""}function e0(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function Wd(n){var t,e;return(e=(t=URL.parse(n))==null?void 0:t.origin)!=null?e:null}function s0({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function i0(n){const t=n.get("Content-Disposition");if(t){let e=$_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(s){}if(Wf(e))return e}return null}function dc(n,t){return new Hd(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function n0(n){return n===200||n===206}function r0(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function o0(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ft(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class a0{constructor(t){z(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=e0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return ie(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new j_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class U_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,r0(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Wd(r.url),!n0(r.status))throw dc(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=s0({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=i0(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return V(this,null,function*(){var s;yield this._headersCapability.promise;const{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:o0(t),done:!1})})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class j_{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,r0(r,this._withCredentials,this._abortController)).then(l=>{const c=Wd(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!n0(l.status))throw dc(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return V(this,null,function*(){var s;yield this._readCapability.promise;const{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:o0(t),done:!1})})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const lp=200,cp=206;function z_(n){const t=n.response;return typeof t!="string"?t:rc(t).buffer}class G_{constructor({url:t,httpHeaders:e,withCredentials:s}){z(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=e0(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=cp):i.expectedStatus=lp,e.responseType="arraybuffer",ie(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||lp;if(!(r===lp&&s.expectedStatus===cp)&&r!==s.expectedStatus){s.onError(i.status);return}const l=z_(i);if(r===cp){const c=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:l}):(ft('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class V_{constructor(t){this._source=t,this._manager=new G_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ie(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W_(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new q_(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class W_{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Wd(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=s0({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=i0(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=dc(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return V(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class q_{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Wd((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){var e;(e=this._storedError)!=null||(this._storedError=dc(t,this._url));for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return V(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const X_=/^[a-z][a-z0-9\-+.]+:/i;function K_(n){if(X_.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class Y_{constructor(t){this.source=t,this.url=K_(t.url),ie(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return ie(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new J_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Q_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class J_{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=dc(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return V(this,null,function*(){var s;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q_{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return V(this,null,function*(){var s;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Z_=1e5,l0=30,le=class le{constructor({textContentSource:t,container:e,viewport:s}){b(this,yn);b(this,yr,Promise.withResolvers());b(this,as,null);b(this,Qc,!1);b(this,Zc,!!((S0=globalThis.FontInspector)!=null&&S0.enabled));b(this,Eo,null);b(this,bn,null);b(this,th,0);b(this,eh,0);b(this,Co,null);b(this,Ya,null);b(this,Ja,0);b(this,wr,0);b(this,Qa,Object.create(null));b(this,sh,[]);b(this,Za,null);b(this,To,[]);b(this,ih,new WeakMap);b(this,nh,null);var c;if(t instanceof ReadableStream)g(this,Za,t);else if(typeof t=="object")g(this,Za,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,as,g(this,Ya,e)),g(this,wr,s.scale*en.pixelRatio),g(this,Ja,s.rotation),g(this,bn,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:l}=s.rawDims;g(this,nh,[1,0,0,-1,-o,l+r]),g(this,eh,i),g(this,th,r),w(c=le,vs,py).call(c),Yr(e,s),a(this,yr).promise.finally(()=>{a(le,el).delete(this),g(this,bn,null),g(this,Qa,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Se.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Co).read().then(({value:e,done:s})=>{var i;if(s){a(this,yr).resolve();return}(i=a(this,Eo))!=null||g(this,Eo,e.lang),Object.assign(a(this,Qa),e.styles),w(this,yn,uy).call(this,e.items),t()},a(this,yr).reject)};return g(this,Co,a(this,Za).getReader()),a(le,el).add(this),t(),a(this,yr).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*en.pixelRatio,i=t.rotation;if(i!==a(this,Ja)&&(e==null||e(),g(this,Ja,i),Yr(a(this,Ya),{rotation:i})),s!==a(this,wr)){e==null||e(),g(this,wr,s);const o={div:null,properties:null,ctx:w(r=le,vs,Mu).call(r,a(this,Eo))};for(const l of a(this,To))o.properties=a(this,ih).get(l),o.div=l,w(this,yn,eg).call(this,o)}}cancel(){var e;const t=new Qn("TextLayer task cancelled.");(e=a(this,Co))==null||e.cancel(t).catch(()=>{}),g(this,Co,null),a(this,yr).reject(t)}get textDivs(){return a(this,To)}get textContentItemsStr(){return a(this,sh)}static cleanup(){if(!(a(this,el).size>0)){a(this,tl).clear();for(const{canvas:t}of a(this,Po).values())t.remove();a(this,Po).clear()}}};yr=new WeakMap,as=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,Eo=new WeakMap,bn=new WeakMap,th=new WeakMap,eh=new WeakMap,Co=new WeakMap,Ya=new WeakMap,Ja=new WeakMap,wr=new WeakMap,Qa=new WeakMap,sh=new WeakMap,Za=new WeakMap,To=new WeakMap,ih=new WeakMap,nh=new WeakMap,tl=new WeakMap,Po=new WeakMap,rh=new WeakMap,vr=new WeakMap,el=new WeakMap,yn=new WeakSet,uy=function(t){var i,r,o;if(a(this,Qc))return;(o=(r=a(this,bn)).ctx)!=null||(r.ctx=w(i=le,vs,Mu).call(i,a(this,Eo)));const e=a(this,To),s=a(this,sh);for(const l of t){if(e.length>Z_){ft("Ignoring additional textDivs for performance reasons."),g(this,Qc,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const c=a(this,as);g(this,as,document.createElement("span")),a(this,as).classList.add("markedContent"),l.id!==null&&a(this,as).setAttribute("id",`${l.id}`),c.append(a(this,as))}else l.type==="endMarkedContent"&&g(this,as,a(this,as).parentNode);continue}s.push(l.str),w(this,yn,fy).call(this,l)}},fy=function(t){var m;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,To).push(e);const i=et.transform(a(this,nh),t.transform);let r=Math.atan2(i[1],i[0]);const o=a(this,Qa)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Zc)&&o.fontSubstitution||o.fontFamily;l=le.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),h=c*w(m=le,vs,gy).call(m,l,o,a(this,Eo));let d,u;r===0?(d=i[4],u=i[5]-h):(d=i[4]+h*Math.sin(r),u=i[5]-h*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;a(this,as)===a(this,Ya)?(p.left=`${(100*d/a(this,eh)).toFixed(2)}%`,p.top=`${(100*u/a(this,th)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${u.toFixed(2)}px)`),p.fontSize=`${f}${(a(le,vr)*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Zc)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);v!==A&&Math.max(v,A)/Math.min(v,A)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?t.height:t.width),a(this,ih).set(e,s),a(this,bn).div=e,a(this,bn).properties=s,w(this,yn,eg).call(this,a(this,bn)),s.hasText&&a(this,as).append(e),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),a(this,as).append(v)}},eg=function(t){var l;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(a(le,vr)>1&&(o=`scale(${1/a(le,vr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:d}=s;w(l=le,vs,sg).call(l,i,d*a(this,wr),c);const{width:u}=i.measureText(e.textContent);u>0&&(o=`scaleX(${h*a(this,wr)/u}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},vs=new WeakSet,Mu=function(t=null){let e=a(this,Po).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Po).set(t,e),a(this,rh).set(e,{size:0,family:""})}return e},sg=function(t,e,s){const i=a(this,rh).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},py=function(){if(a(this,vr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,vr,t.getBoundingClientRect().height),t.remove()},gy=function(t,e,s){const i=a(this,tl).get(t);if(i)return i;const r=w(this,vs,Mu).call(this,s);r.canvas.width=r.canvas.height=l0,w(this,vs,sg).call(this,r,l0,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+c):(Se.platform.isFirefox&&ft("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),a(this,tl).set(t,h),h},b(le,vs),b(le,tl,new Map),b(le,Po,new Map),b(le,rh,new WeakMap),b(le,vr,null),b(le,el,new Set);let uc=le;class fc{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(fc.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)i(h)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const tx=65536,ex=100;function c0(n={}){var Hr,Mp;typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new dp,{docId:e}=t,s=n.url?sx(n.url):null,i=n.data?ix(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=(Hr=n.password)!=null?Hr:null,c=n.range instanceof h0?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:tx;let d=n.worker instanceof Ca?n.worker:null;const u=n.verbosity,f=typeof n.docBaseUrl=="string"&&!$d(n.docBaseUrl)?n.docBaseUrl:null,p=qd(n.cMapUrl),y=n.cMapPacked!==!1,m=n.CMapReaderFactory||(Ve?w_:$b),v=qd(n.iccUrl),A=qd(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Ve?v_:zb),E=qd(n.wasmUrl),_=n.WasmFactory||(Ve?A_:Vb),T=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ve,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ve&&(Se.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ve,O=n.fontExtraProperties===!0,tt=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,G=n.disableRange===!0,L=n.disableStream===!0,B=n.disableAutoFetch===!0,lt=n.pdfBug===!0,Tt=n.CanvasFactory||(Ve?y_:g_),Ue=n.FilterFactory||(Ve?b_:m_),ue=n.enableHWA===!0,Pt=n.useWasm!==!1,Mt=c?c.length:(Mp=n.length)!=null?Mp:NaN,Xs=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ve&&!j,zi=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===$b&&x===zb&&_===Vb&&p&&A&&E&&_a(p,document.baseURI)&&_a(A,document.baseURI)&&_a(E,document.baseURI)),hs=null;XA(u);const Ht={canvasFactory:new Tt({ownerDocument:M,enableHWA:ue}),filterFactory:new Ue({docId:e,ownerDocument:M}),cMapReaderFactory:zi?null:new m({baseUrl:p,isCompressed:y}),standardFontDataFactory:zi?null:new x({baseUrl:A}),wasmFactory:zi?null:new _({baseUrl:E})};if(!d){const S={verbosity:u,port:ei.workerPort};d=S.port?Ca.fromPort(S):new Ca(S),t._worker=d}const On={docId:e,apiVersion:"5.2.133",data:i,password:l,disableAutoFetch:B,rangeChunkSize:h,length:Mt,docBaseUrl:f,enableXfa:tt,evaluatorOptions:{maxImageSize:P,disableFontFace:j,ignoreErrors:T,isEvalSupported:k,isOffscreenCanvasSupported:D,isImageDecoderSupported:I,canvasMaxAreaInBytes:N,fontExtraProperties:O,useSystemFonts:Xs,useWasm:Pt,useWorkerFetch:zi,cMapUrl:p,iccUrl:v,standardFontDataUrl:A,wasmUrl:E}},Au={ownerDocument:M,pdfBug:lt,styleElement:hs,loadingParams:{disableAutoFetch:B,enableXfa:tt}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const S=d.messageHandler.sendWithPromise("GetDocRequest",On,i?[i.buffer]:null);let C;if(c)C=new O_(c,{disableRange:G,disableStream:L});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let R;if(Ve)if(_a(s)){if(typeof fetch=="undefined"||typeof Response=="undefined"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");R=a0}else R=Y_;else R=_a(s)?a0:V_;C=new R({url:s,length:Mt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:G,disableStream:L})}return S.then(R=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const H=new cc(e,R,d.port),F=new cx(H,t,C,Au,Ht);t._transport=F,H.send("Ready",null)})}).catch(t._capability.reject),t}function sx(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ve)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ix(n){if(Ve&&typeof Buffer!="undefined"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return rc(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qd(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const hp=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,nx=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",rx=i_.bind(null,hp,nx),du=class du{constructor(){z(this,"_capability",Promise.withResolvers());z(this,"_transport",null);z(this,"_worker",null);z(this,"docId",`d${Ze(du,hu)._++}`);z(this,"destroyed",!1);z(this,"onPassword",null);z(this,"onProgress",null)}get promise(){return this._capability.promise}destroy(){return V(this,null,function*(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),yield(e=this._transport)==null?void 0:e.destroy()}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null})}getData(){return V(this,null,function*(){return this._transport.getData()})}};hu=new WeakMap,b(du,hu,0);let dp=du;class h0{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Dt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ox{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ax{constructor(t,e,s,i=!1){b(this,ko);b(this,wn,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new Lb:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new d0,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new ac({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return V(this,null,function*(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null})}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=Jn.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:u=!1}){var _,T;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(s,i,d,u),{renderingIntent:p,cacheKey:y}=f;g(this,wn,!1),l||(l=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(y);m||(m=Object.create(null),this._intentStates.set(y,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(p&gs.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const A=P=>{var k;m.renderTasks.delete(x),v&&g(this,wn,!0),w(this,ko,Qh).call(this),P?(x.capability.reject(P),this._abortOperatorList({intentState:m,reason:P instanceof Error?P:new Error(P)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new up({callback:A,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||(m.renderTasks=new Set)).add(x);const E=x.task;return Promise.all([m.displayReadyCapability.promise,l]).then(([P,k])=>{var D;if(this.destroyed){A();return}if((D=this._stats)==null||D.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:P,optionalContentConfig:k}),x.operatorListChanged()}).catch(A),E}getOperatorList({intent:t="display",annotationMode:e=Jn.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>fc.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:h}){var d;if(h){s(l);return}(d=l.lang)!=null||(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),g(this,wn,!1),Promise.all(t)}cleanup(t=!1){g(this,wn,!0);const e=w(this,ko,Qh).call(this);return t&&e&&this._stats&&(this._stats=new Lb),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&w(this,ko,Qh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const d=()=>{c.read().then(({value:u,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,h),d())},u=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();w(this,ko,Qh).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(u);else if(h.opListReadCapability)h.opListReadCapability.reject(u);else throw u}})};d()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Vf){let i=ex;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Qn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}wn=new WeakMap,ko=new WeakSet,Qh=function(){if(!a(this,wn)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,wn,!1),!0};class lx{constructor(){b(this,vn,new Map);b(this,uu,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};a(this,uu).then(()=>{for(const[i]of a(this,vn))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){ft("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,vn).set(e,i)}removeEventListener(t,e){const s=a(this,vn).get(e);s==null||s(),a(this,vn).delete(e)}terminate(){for(const[,t]of a(this,vn))t==null||t();a(this,vn).clear()}}vn=new WeakMap,uu=new WeakMap;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:s=KA()}={}){b(this,sl);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=a(Wt,Io))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(Wt,Io)||g(Wt,Io,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new cc("main","worker",t),this._messageHandler.on("ready",function(){}),w(this,sl,Lu).call(this)}_initialize(){if(a(Wt,Ro)||a(Wt,il,Du)){this._setupFakeWorker();return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new cc("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,w(this,sl,Lu).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{o()}catch(c){this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch(e){Bd("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(Wt,Ro)||(ft("Setting up fake worker."),g(Wt,Ro,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new lx;this._port=e;const s=`fake${Ze(Wt,fu)._++}`,i=new cc(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new cc(s,s+"_worker",e),w(this,sl,Lu).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(Wt,Io))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=a(this,Io))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(ei.workerSrc)return ei.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",V(this,null,function*(){return a(this,il,Du)?a(this,il,Du):(yield import(this.workerSrc)).WorkerMessageHandler}))}};fu=new WeakMap,Ro=new WeakMap,Io=new WeakMap,sl=new WeakSet,Lu=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},il=new WeakSet,Du=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch(e){return null}},b(Wt,il),b(Wt,fu,0),b(Wt,Ro,!1),b(Wt,Io),Ve&&(g(Wt,Ro,!0),ei.workerSrc||(ei.workerSrc="./pdf.worker.mjs")),Wt._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(e,s);return s.origin===i.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Ca=Wt;class cx{constructor(t,e,s,i,r){b(this,Mo);b(this,An,new Map);b(this,Fi,new Map);b(this,nl,new Map);b(this,rl,new Map);b(this,_n,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new d0,this.fontLoader=new f_({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return wt(this,"annotationStorage",new ep)}getRenderingIntent(t,e=Jn.ENABLE,s=null,i=!1,r=!1){let o=gs.DISPLAY,l=tp;switch(t){case"any":o=gs.ANY;break;case"display":break;case"print":o=gs.PRINT;break;default:ft(`getRenderingIntent - invalid intent: ${t}`)}const c=o&gs.PRINT&&s instanceof Nb?s:this.annotationStorage;switch(e){case Jn.DISABLE:o+=gs.ANNOTATIONS_DISABLE;break;case Jn.ENABLE:break;case Jn.ENABLE_FORMS:o+=gs.ANNOTATIONS_FORMS;break;case Jn.ENABLE_STORAGE:o+=gs.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ft(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=gs.IS_EDITING),r&&(o+=gs.OPLIST);const{ids:h,hash:d}=c.modifiedIds,u=[o,l.hash,d];return{renderingIntent:o,cacheKey:u.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,_n))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of a(this,Fi).values())t.push(i._destroy());a(this,Fi).clear(),a(this,nl).clear(),a(this,rl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,An).clear(),this.filterFactory.destroy(),uc.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Qn("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{ie(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}ie(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",s=>V(this,null,function*(){var l;yield this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}})),t.on("GetRangeReader",(s,i)=>{ie(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){i.close();return}ie(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new ox(s,this))}),t.on("DocException",s=>{e._capability.reject(ns(s))}),t.on("PasswordRequest",s=>{g(this,_n,Promise.withResolvers());try{if(!e.onPassword)throw ns(s);const i=r=>{r instanceof Error?a(this,_n).reject(r):a(this,_n).resolve({password:r})};e.onPassword(i,s.code)}catch(i){a(this,_n).reject(i)}return a(this,_n).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,Fi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const d=r.error;ft(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,u)=>globalThis.FontInspector.fontAdded(d,u):null,c=new p_(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;ie(h,"The imageRef must be defined.");for(const d of a(this,Fi).values())for(const[,u]of d.objs)if((u==null?void 0:u.ref)===h)return u.dataLen?(this.commonObjs.resolve(s,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Fi).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",s=>V(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s,i;this.annotationStorage.size<=0&&ft("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:(i=(s=this._fullReader)==null?void 0:s.filename)!=null?i:null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=a(this,nl).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,rl).set(r.refStr,t);const o=new ax(e,r,this,this._params.pdfBug);return a(this,Fi).set(e,o),o});return a(this,nl).set(e,i),i}getPageIndex(t){return hp(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return w(this,Mo,Zh).call(this,"GetFieldObjects")}hasJSActions(){return w(this,Mo,Zh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,Mo,Zh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return w(this,Mo,Zh).call(this,"GetOptionalContentConfig").then(e=>new N_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,An).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o,l,c;return{info:i[0],metadata:i[1]?new D_(i[1]):null,contentDispositionFilename:(o=(r=this._fullReader)==null?void 0:r.filename)!=null?o:null,contentLength:(c=(l=this._fullReader)==null?void 0:l.contentLength)!=null?c:null}});return a(this,An).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return V(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Fi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,An).clear(),this.filterFactory.destroy(!0),uc.cleanup()}})}cachedPageNumber(t){var s;if(!hp(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return(s=a(this,rl).get(e))!=null?s:null}}An=new WeakMap,Fi=new WeakMap,nl=new WeakMap,rl=new WeakMap,_n=new WeakMap,Mo=new WeakSet,Zh=function(t,e=null){const s=a(this,An).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return a(this,An).set(t,i),i};const pc=Symbol("INITIAL_DATA");class d0{constructor(){b(this,oh);b(this,As,Object.create(null))}get(t,e=null){if(e){const i=w(this,oh,ig).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=a(this,As)[t];if(!s||s.data===pc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=a(this,As)[t];return!!e&&e.data!==pc}delete(t){const e=a(this,As)[t];return!e||e.data===pc?!1:(delete a(this,As)[t],!0)}resolve(t,e=null){const s=w(this,oh,ig).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in a(this,As)){const{data:s}=a(this,As)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}g(this,As,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,As)){const{data:e}=a(this,As)[t];e!==pc&&(yield[t,e])}}}As=new WeakMap,oh=new WeakSet,ig=function(t){var e;return(e=a(this,As))[t]||(e[t]=Bn(Ks({},Promise.withResolvers()),{data:pc}))};class hx{constructor(t){b(this,Ar,null);z(this,"onContinue",null);z(this,"onError",null);g(this,Ar,t)}get promise(){return a(this,Ar).capability.promise}cancel(t=0){a(this,Ar).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Ar).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Ar);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ar=new WeakMap;const Do=class Do{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:f=null}){b(this,_r,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new hx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(Do,Lo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Do,Lo).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new Sa(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,_r)&&(window.cancelAnimationFrame(a(this,_r)),g(this,_r,null)),a(Do,Lo).delete(this._canvas),t||(t=new Vf(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(i=this.task).onError)==null||r.call(i,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,_r,window.requestAnimationFrame(()=>{g(this,_r,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return V(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Do,Lo).delete(this._canvas),this.callback())))})}};_r=new WeakMap,Lo=new WeakMap,b(Do,Lo,new WeakSet);let up=Do;const dx="5.2.133",ux="4f7761353";function u0(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function gc(n){return Math.max(0,Math.min(255,255*n))}class f0{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=gc(t),[t,t,t]}static G_HTML([t]){const e=u0(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(gc)}static RGB_HTML(t){return`#${t.map(u0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[gc(1-Math.min(1,t+i)),gc(1-Math.min(1,s+i)),gc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,l=Math.min(i,r,o);return["CMYK",i,r,o,l]}}class fx{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Dt("Abstract method `_createSVG` called.")}}class Xd extends fx{_createSVG(t){return document.createElementNS(tn,t)}}class p0{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}l&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var u,f;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),l&&fc.shouldBuildText(i.name)&&h.push(p)}return{textDivs:h}}const d=[[i,-1,o]];for(;d.length>0;){const[p,y,m]=d.at(-1);if(y+1===p.children.length){d.pop();continue}const v=p.children[++d.at(-1)[1]];if(v===null)continue;const{name:A}=v;if(A==="#text"){const E=document.createTextNode(v.value);h.push(E),m.append(E);continue}const x=(u=v==null?void 0:v.attributes)!=null&&u.xmlns?document.createElementNS(v.attributes.xmlns,A):document.createElement(A);if(m.append(x),v.attributes&&this.setAttributes({html:x,element:v,storage:e,intent:r,linkService:s}),((f=v.children)==null?void 0:f.length)>0)d.push([v,-1,x]);else if(v.value){const E=document.createTextNode(v.value);l&&fc.shouldBuildText(A)&&h.push(E),x.append(E)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const mc=1e3,px=9,Qr=new WeakSet;class g0{static create(t){switch(t.data.annotationType){case se.LINK:return new m0(t);case se.TEXT:return new gx(t);case se.WIDGET:switch(t.data.fieldType){case"Tx":return new mx(t);case"Btn":return t.data.radioButton?new b0(t):t.data.checkBox?new yx(t):new wx(t);case"Ch":return new vx(t);case"Sig":return new bx(t)}return new Zr(t);case se.POPUP:return new fp(t);case se.FREETEXT:return new y0(t);case se.LINE:return new _x(t);case se.SQUARE:return new xx(t);case se.CIRCLE:return new Sx(t);case se.POLYLINE:return new w0(t);case se.CARET:return new Cx(t);case se.INK:return new pp(t);case se.POLYGON:return new Ex(t);case se.HIGHLIGHT:return new v0(t);case se.UNDERLINE:return new Tx(t);case se.SQUIGGLY:return new Px(t);case se.STRIKEOUT:return new kx(t);case se.STAMP:return new A0(t);case se.FILEATTACHMENT:return new Rx(t);default:return new Zt(t)}}}const Rp=class Rp{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){b(this,ah);b(this,Fo,null);b(this,ol,!1);b(this,al,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Rp._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;a(this,Fo)||g(this,Fo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&w(this,ah,ng).call(this,e),(s=a(this,al))==null||s.popup.updateEdited(t)}resetEdited(){var t;a(this,Fo)&&(w(this,ah,ng).call(this,a(this,Fo).rect),(t=a(this,al))==null||t.popup.resetEdited(),g(this,Fo,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Zr||(r.tabIndex=mc);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof fp){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(m>0||v>0){const x=`calc(${m}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;o.borderRadius=x}else if(this instanceof b0){const x=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=x}switch(e.borderStyle.style){case Aa.SOLID:o.borderStyle="solid";break;case Aa.DASHED:o.borderStyle="dashed";break;case Aa.BEVELED:ft("Unimplemented border style: beveled");break;case Aa.INSET:ft("Unimplemented border style: inset");break;case Aa.UNDERLINE:o.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(g(this,ol,!0),o.borderColor=et.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):o.borderWidth=0}const h=et.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:u,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(h[0]-f)/d}%`,o.top=`${100*(h[1]-p)/u}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/d}%`,o.height=`${100*c/u}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],l=r.slice(1);i.target.style[s]=f0[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:f0[`${o}_rgb`](l)})};return wt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const l={detail:{[i]:r},target:t};o(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,v,A,x]=t.subarray(2,6);if(i===m&&r===v&&e===A&&s===x)return}const{style:o}=this.container;let l;if(a(this,ol)){const{borderColor:m,borderWidth:v}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const c=i-e,h=r-s,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const f=d.createElement("defs");u.append(f);const p=d.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,v=t.length;m<v;m+=8){const A=t[m],x=t[m+1],E=t[m+2],_=t[m+3],T=d.createElement("rect"),P=(E-e)/c,k=(r-x)/h,D=(A-E)/c,I=(x-_)/h;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",D),T.setAttribute("height",I),p.append(T),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${D}" height="${I}"/>`)}a(this,ol)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(u),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:t}=this,e=g(this,al,new fp({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Dt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:l}of i){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Qr.has(h)){ft(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&Qr.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Fo=new WeakMap,ol=new WeakMap,al=new WeakMap,ah=new WeakSet,ng=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)};let Zt=Rp;class m0 extends Zt{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});b(this,_s);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(w(this,_s,my).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(w(this,_s,by).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&w(this,_s,la).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),w(this,_s,la).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),w(this,_s,la).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),w(this,_s,la).call(this),!this._fieldObjects){ft('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var u;i==null||i();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:m}of y)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const m=f.defaultValue||"";h.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;h.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";h.setValue(p,{value:m});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!Qr.has(y)){ft(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}_s=new WeakSet,la=function(){this.container.setAttribute("data-internal-link","")},my=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},w(this,_s,la).call(this)},by=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),w(this,_s,la).call(this)};class gx extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Zr extends Zt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Se.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var l;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,s,i){var r,o,l;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,i),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||px,r=t.style;let o;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(h/(Hf*i))||1,u=h/d;o=Math.min(i,c(u/Hf))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(h/Hf))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=et.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class mx extends Zr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h!=null?h:l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h!=null?h:l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Qr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=mc,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",f=>{var y;const p=(y=this.data.defaultFieldValue)!=null?y:"";s.value=d.userValue=p,d.formattedValue=null});let u=f=>{const{formattedValue:p}=d;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var m;if(d.focused)return;const{target:y}=p;d.userValue&&(y.value=d.userValue),d.lastCommittedValue=y.value,d.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const y={value(m){var v;d.userValue=(v=m.detail.value)!=null?v:"",t.setValue(e,{value:d.userValue.toString()}),m.target.value=d.userValue},formattedValue(m){const{formattedValue:v}=m.detail;d.formattedValue=v,v!=null&&m.target!==document.activeElement&&(m.target.value=v),t.setValue(e,{formattedValue:v})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var E;const{charLimit:v}=m.detail,{target:A}=m;if(v===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",v);let x=d.userValue;!x||x.length<=v||(x=x.slice(0,v),A.value=d.userValue=x,t.setValue(e,{value:x}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(y,p)}),s.addEventListener("keydown",p=>{var v;d.commitKey=1;let y=-1;if(p.key==="Escape"?y=0:p.key==="Enter"&&!this.data.multiLine?y=2:p.key==="Tab"&&(d.commitKey=3),y===-1)return;const{value:m}=p.target;d.lastCommittedValue!==m&&(d.lastCommittedValue=m,d.userValue=m,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:y,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=u;u=null,s.addEventListener("blur",p=>{var m,v;if(!d.focused||!p.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(d.focused=!1);const{value:y}=p.target;d.userValue=y,d.lastCommittedValue!==y&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:d.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var T;d.lastCommittedValue=null;const{data:y,target:m}=p,{value:v,selectionStart:A,selectionEnd:x}=m;let E=A,_=x;switch(p.inputType){case"deleteWordBackward":{const P=v.substring(0,A).match(/\w*[^\w]*$/);P&&(E-=P[0].length);break}case"deleteWordForward":{const P=v.substring(A).match(/^[^\w]*\w*/);P&&(_+=P[0].length);break}case"deleteContentBackward":A===x&&(E-=1);break;case"deleteContentForward":A===x&&(_+=1);break}p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,change:y||"",willCommit:!1,selStart:E,selEnd:_}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(u&&s.addEventListener("blur",u),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class bx extends Zr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class yx extends Zr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Qr.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=mc,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s)){const d=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=d),t.setValue(h.id,{value:d})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class b0 extends Zr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Qr.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=mc,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const d=o===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const f=d&&u.id===s;u.domElement&&(u.domElement.checked=f),t.setValue(u.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wx extends m0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class vx extends Zr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Qr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=mc;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const u=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===u});for(const d of this.data.options){const u=document.createElement("option");u.textContent=d.displayValue,u.value=d.exportValue,s.value.includes(d.exportValue)&&(u.setAttribute("selected",!0),r=!1),i.append(u)}let o=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=d=>{const u=d?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[u]):f.selectedIndex===-1?null:f[f.selectedIndex][u]};let c=l(!1);const h=d=>{const u=d.target.options;return Array.prototype.map.call(u,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const u={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const m of i.options)m.selected=y.has(m.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,y=f.detail.remove;p[y].selected=!1,i.remove(y),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:y,exportValue:m}=f.detail.insert,v=i.children[p],A=document.createElement("option");A.textContent=y,A.value=m,v?v.before(A):i.append(A),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of p){const{displayValue:m,exportValue:v}=y,A=document.createElement("option");A.textContent=m,A.value=v,i.append(A)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(u,d)}),i.addEventListener("input",d=>{var p;const u=l(!0),f=l(!1);t.setValue(e,{value:u}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fp extends Zt{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Zt._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Ax({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${Gf}${s}`).join(",")),this.container}}class Ax{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:h,parentRect:d,open:u}){b(this,Nt);b(this,ll,w(this,Nt,vy).bind(this));b(this,pu,w(this,Nt,og).bind(this));b(this,gu,w(this,Nt,Ou).bind(this));b(this,cl,w(this,Nt,Nu).bind(this));b(this,hl,null);b(this,Qt,null);b(this,xn,null);b(this,dl,null);b(this,lh,null);b(this,ch,null);b(this,ul,null);b(this,Sn,!1);b(this,ai,null);b(this,En,null);b(this,hh,null);b(this,Cn,null);b(this,dh,null);b(this,No,null);b(this,Oo,!1);var f;g(this,Qt,t),g(this,dh,i),g(this,xn,o),g(this,Cn,l),g(this,ch,c),g(this,hl,e),g(this,hh,h),g(this,ul,d),g(this,lh,s),g(this,dl,qf.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,cl)),p.addEventListener("mouseenter",a(this,gu)),p.addEventListener("mouseleave",a(this,pu)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",a(this,ll));a(this,Qt).hidden=!0,u&&w(this,Nt,Nu).call(this)}render(){if(a(this,ai))return;const t=g(this,ai,document.createElement("div"));if(t.className="popup",a(this,hl)){const r=t.style.outlineColor=et.makeHexColor(...a(this,hl));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=a(this,dh),t.append(e),a(this,dl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,dl).valueOf()})),e.append(r)}const i=a(this,Nt,Fu);if(i)p0.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,xn));t.append(r)}a(this,Qt).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const l=i[r];s.append(document.createTextNode(l)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;a(this,No)||g(this,No,{contentsObj:a(this,xn),richText:a(this,Cn)}),t&&g(this,En,null),e&&(g(this,Cn,w(this,Nt,wy).call(this,e)),g(this,xn,null)),(s=a(this,ai))==null||s.remove(),g(this,ai,null)}resetEdited(){var t;a(this,No)&&({contentsObj:Ze(this,xn)._,richText:Ze(this,Cn)._}=a(this,No),g(this,No,null),(t=a(this,ai))==null||t.remove(),g(this,ai,null),g(this,En,null))}forceHide(){g(this,Oo,this.isVisible),a(this,Oo)&&(a(this,Qt).hidden=!0)}maybeShow(){a(this,Oo)&&(a(this,ai)||w(this,Nt,Ou).call(this),g(this,Oo,!1),a(this,Qt).hidden=!1)}get isVisible(){return a(this,Qt).hidden===!1}}ll=new WeakMap,pu=new WeakMap,gu=new WeakMap,cl=new WeakMap,hl=new WeakMap,Qt=new WeakMap,xn=new WeakMap,dl=new WeakMap,lh=new WeakMap,ch=new WeakMap,ul=new WeakMap,Sn=new WeakMap,ai=new WeakMap,En=new WeakMap,hh=new WeakMap,Cn=new WeakMap,dh=new WeakMap,No=new WeakMap,Oo=new WeakMap,Nt=new WeakSet,Fu=function(){const t=a(this,Cn),e=a(this,xn);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Cn).html||null},rg=function(){var t,e,s;return((s=(e=(t=a(this,Nt,Fu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},yy=function(){var t,e,s;return((s=(e=(t=a(this,Nt,Fu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},wy=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:a(this,Nt,yy),fontSize:a(this,Nt,rg)?`calc(${a(this,Nt,rg)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},vy=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Sn))&&w(this,Nt,Nu).call(this)},Ay=function(){if(a(this,En)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=a(this,ch);let o=!!a(this,ul),l=o?a(this,ul):a(this,hh);for(const y of a(this,lh))if(!l||et.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=et.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),d=o?l[2]-l[0]+5:0,u=c[0]+d,f=c[1];g(this,En,[100*(u-i)/e,100*(f-r)/s]);const{style:p}=a(this,Qt);p.left=`${a(this,En)[0]}%`,p.top=`${a(this,En)[1]}%`},Nu=function(){g(this,Sn,!a(this,Sn)),a(this,Sn)?(w(this,Nt,Ou).call(this),a(this,Qt).addEventListener("click",a(this,cl)),a(this,Qt).addEventListener("keydown",a(this,ll))):(w(this,Nt,og).call(this),a(this,Qt).removeEventListener("click",a(this,cl)),a(this,Qt).removeEventListener("keydown",a(this,ll)))},Ou=function(){a(this,ai)||this.render(),this.isVisible?a(this,Sn)&&a(this,Qt).classList.add("focused"):(w(this,Nt,Ay).call(this),a(this,Qt).hidden=!1,a(this,Qt).style.zIndex=parseInt(a(this,Qt).style.zIndex)+1e3)},og=function(){a(this,Qt).classList.remove("focused"),!(a(this,Sn)||!this.isVisible)&&(a(this,Qt).hidden=!0,a(this,Qt).style.zIndex=parseInt(a(this,Qt).style.zIndex)-1e3)};class y0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _x extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,uh,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=g(this,uh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;class xx extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,fh,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,l=g(this,fh,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}fh=new WeakMap;class Sx extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ph,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,l=g(this,ph,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}ph=new WeakMap;class w0 extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,gh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r},width:o,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(o,l,!0);let h=[];for(let u=0,f=s.length;u<f;u+=2){const p=s[u]-e[0],y=e[3]-s[u+1];h.push(`${p},${y}`)}h=h.join(" ");const d=g(this,gh,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",h),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}gh=new WeakMap;class Ex extends w0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Cx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class pp extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,bh);b(this,mh,null);b(this,Bo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dt.HIGHLIGHT:dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:h}=w(this,bh,ag).call(this,s,e),d=this.svgFactory.create(c,h,!0),u=g(this,mh,this.svgFactory.createElement("svg:g"));d.append(u),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",l);for(let f=0,p=i.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,Bo).push(y),y.setAttribute("points",i[f].join(",")),u.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,o=a(this,mh);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let l=0,c=a(this,Bo).length;l<c;l++)a(this,Bo)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:h}=w(this,bh,ag).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Bo)}addHighlightArea(){this.container.classList.add("highlightArea")}}mh=new WeakMap,Bo=new WeakMap,bh=new WeakSet,ag=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class v0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Tx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Px extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class kx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class A0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Rx extends Zt{constructor(e){var i;super(e,{isRenderable:!0});b(this,wh);b(this,yh,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",Ks({source:this},s))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",w(this,wh,lg).bind(this)),g(this,yh,i);const{isMac:r}=Se.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&w(this,wh,lg).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return a(this,yh)}addHighlightArea(){this.container.classList.add("highlightArea")}}yh=new WeakMap,wh=new WeakSet,lg=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};const Ip=class Ip{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:l}){b(this,Sr);b(this,vh,null);b(this,Ho,null);b(this,xr,new Map);b(this,Ah,null);this.div=t,g(this,vh,e),g(this,Ho,s),g(this,Ah,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return a(this,xr).size>0}render(t){return V(this,null,function*(){var o;const{annotations:e}=t,s=this.div;Yr(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Xd,annotationStorage:t.annotationStorage||new ep,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===se.POPUP;if(c){const u=i.get(l.id);if(!u)continue;r.elements=u}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=g0.create(r);if(!h.isRenderable)continue;if(!c&&l.popupRef){const u=i.get(l.popupRef);u?u.push(h):i.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),yield w(this,Sr,cg).call(this,d,l.id),h._isEditable&&(a(this,xr).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}w(this,Sr,hg).call(this)})}addLinkAnnotations(t,e){return V(this,null,function*(){const s={data:null,layer:this.div,linkService:e,svgFactory:new Xd,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=Ip._defaultBorderStyle),s.data=i;const r=g0.create(s);if(!r.isRenderable)continue;const o=r.render();yield w(this,Sr,cg).call(this,o,i.id)}})}update({viewport:t}){const e=this.div;this.viewport=t,Yr(e,{rotation:t.rotation}),w(this,Sr,hg).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,xr).values())}getEditableAnnotation(t){return a(this,xr).get(t)}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Aa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};vh=new WeakMap,Ho=new WeakMap,xr=new WeakMap,Ah=new WeakMap,Sr=new WeakSet,cg=function(t,e){return V(this,null,function*(){var o,l;const s=t.firstChild||t,i=s.id=`${Gf}${e}`,r=yield(o=a(this,Ah))==null?void 0:o.getAriaAttributes(i);if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(l=a(this,vh))==null||l.moveElementInDOM(this.div,t,s,!1)})},hg=function(){var e;if(!a(this,Ho))return;const t=this.div;for(const[s,i]of a(this,Ho)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const l=a(this,xr).get(s);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,i),l._hasNoCanvas=!1):l.canvas=i)}a(this,Ho).clear()};let gp=Ip;const Kd=/\r\n?|\n/g,Bt=class Bt extends Ut{constructor(e){super(Bn(Ks({},e),{name:"freeTextEditor"}));b(this,oe);b(this,li);b(this,xs,"");b(this,_h,`${this.id}-editor`);b(this,$o,null);b(this,Ss);g(this,li,e.color||Bt._defaultColor||Ut._defaultLineColor),g(this,Ss,e.fontSize||Bt._defaultFontSize)}static get _keyboardManager(){const e=Bt.prototype,s=o=>o.isEmpty(),i=Jr.TRANSLATE_SMALL,r=Jr.TRANSLATE_BIG;return wt(this,"_keyboardManager",new lc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){Ut.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case At.FREETEXT_SIZE:Bt._defaultFontSize=s;break;case At.FREETEXT_COLOR:Bt._defaultColor=s;break}}updateParams(e,s){switch(e){case At.FREETEXT_SIZE:w(this,oe,_y).call(this,s);break;case At.FREETEXT_COLOR:w(this,oe,xy).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[At.FREETEXT_SIZE,Bt._defaultFontSize],[At.FREETEXT_COLOR,Bt._defaultColor||Ut._defaultLineColor]]}get propertiesToUpdate(){return[[At.FREETEXT_SIZE,a(this,Ss)],[At.FREETEXT_COLOR,a(this,li)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Bt._internalPadding*e,-(Bt._internalPadding+a(this,Ss))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(dt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,$o,new AbortController);const e=this._uiManager.combinedSignal(a(this,$o));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,_h)),this._isDraggable=!0,(e=a(this,$o))==null||e.abort(),g(this,$o,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,xs),s=g(this,xs,w(this,oe,Sy).call(this).trimEnd());if(e===s)return;const i=r=>{if(g(this,xs,r),!r){this.remove();return}w(this,oe,$u).call(this),this._uiManager.rebuild(this),w(this,oe,Bu).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),w(this,oe,Bu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Bt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,_h)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${a(this,Ss)}px * var(--total-scale-factor))`,i.color=a(this,li),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Jf(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,u]=this.pageDimensions,[f,p]=this.pageTranslation;let y,m;switch(this.rotation){case 0:y=e+(l[0]-f)/d,m=s+this.height-(l[1]-p)/u;break;case 90:y=e+(l[0]-f)/d,m=s-(l[1]-p)/u,[c,h]=[h,-c];break;case 180:y=e-this.width+(l[0]-f)/d,m=s-(l[1]-p)/u,[c,h]=[-c,-h];break;case 270:y=e+(l[0]-f-this.height*u)/d,m=s+(l[1]-p-this.width*d)/u,[c,h]=[-h,c];break}this.setAt(y*r,m*o,c,h)}else this._moveAfterPaste(e,s);w(this,oe,$u).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,m,v;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=w(y=Bt,Tn,dg).call(y,s.getData("text")||"").replaceAll(Kd,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],u=[];if(c.nodeType===Node.TEXT_NODE){const A=c.parentElement;if(u.push(c.nodeValue.slice(h).replaceAll(Kd,"")),A!==this.editorDiv){let x=d;for(const E of this.editorDiv.childNodes){if(E===A){x=u;continue}x.push(w(m=Bt,Tn,Hu).call(m,E))}}d.push(c.nodeValue.slice(0,h).replaceAll(Kd,""))}else if(c===this.editorDiv){let A=d,x=0;for(const E of this.editorDiv.childNodes)x++===h&&(A=u),A.push(w(v=Bt,Tn,Hu).call(v,E))}g(this,xs,`${d.join(`
`)}${r}${u.join(`
`)}`),w(this,oe,$u).call(this);const f=new Range;let p=Math.sumPrecise(d.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const x=A.nodeValue.length;if(p<=x){f.setStart(A,p),f.setEnd(A,p);break}p-=x}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(e,s,i){return V(this,null,function*(){var l;let r=null;if(e instanceof y0){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:u,id:f,popupRef:p},textContent:y,textPosition:m,parent:{page:{pageNumber:v}}}=e;if(!y||y.length===0)return null;r=e={annotationType:dt.FREETEXT,color:Array.from(h),fontSize:c,value:y.join(`
`),position:m,pageIndex:v-1,rect:d.slice(0),rotation:u,id:f,deleted:!1,popupRef:p}}const o=yield Hn(Bt,this,"deserialize").call(this,e,s,i);return g(o,Ss,e.fontSize),g(o,li,et.makeHexColor(...e.color)),g(o,xs,w(l=Bt,Tn,dg).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Bt._internalPadding*this.parentScale,i=this.getRect(s,s),r=Ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,li)),o={annotationType:dt.FREETEXT,color:r,fontSize:a(this,Ss),value:w(this,oe,Ey).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!w(this,oe,Cy).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${a(this,Ss)}px * var(--total-scale-factor))`,i.color=a(this,li),s.replaceChildren();for(const o of a(this,xs).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=Bt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,xs)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};li=new WeakMap,xs=new WeakMap,_h=new WeakMap,$o=new WeakMap,Ss=new WeakMap,oe=new WeakSet,_y=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,Ss))*this.parentScale),g(this,Ss,r),w(this,oe,Bu).call(this)},i=a(this,Ss);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:At.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xy=function(e){const s=r=>{g(this,li,this.editorDiv.style.color=r)},i=a(this,li);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:At.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Sy=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(w(i=Bt,Tn,Hu).call(i,r)),s=r);return e.join(`
`)},Bu=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},Tn=new WeakSet,Hu=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Kd,"")},$u=function(){if(this.editorDiv.replaceChildren(),!!a(this,xs))for(const e of a(this,xs).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},Ey=function(){return a(this,xs).replaceAll(""," ")},dg=function(e){return e.replaceAll(" ","")},Cy=function(e){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},b(Bt,Tn),z(Bt,"_freeTextDefaultContent",""),z(Bt,"_internalPadding",0),z(Bt,"_defaultColor",null),z(Bt,"_defaultFontSize",10),z(Bt,"_type","freetext"),z(Bt,"_editorType",dt.FREETEXT);let mp=Bt;class Q{toSVGPath(){Dt("Abstract method `toSVGPath` must be implemented.")}get box(){Dt("Abstract getter `box` must be implemented.")}serialize(t,e){Dt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*i,o[l+1]=s+t[l+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*i,o[l+1]=s+t[l]*r;return o}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}z(Q,"PRECISION",1e-4);const Pn=class Pn{constructor({x:t,y:e},s,i,r,o,l=0){b(this,ce);b(this,Es);b(this,ci,[]);b(this,fl);b(this,pl);b(this,Ni,[]);b(this,yt,new Float32Array(18));b(this,Uo);b(this,jo);b(this,xh);b(this,Sh);b(this,gl);b(this,ml);b(this,Er,[]);g(this,Es,s),g(this,ml,r*i),g(this,pl,o),a(this,yt).set([NaN,NaN,NaN,NaN,t,e],6),g(this,fl,l),g(this,Sh,a(Pn,Eh)*i),g(this,xh,a(Pn,bu)*i),g(this,gl,i),a(this,Er).push(t,e)}isEmpty(){return isNaN(a(this,yt)[8])}add({x:t,y:e}){var I;g(this,Uo,t),g(this,jo,e);const[s,i,r,o]=a(this,Es);let[l,c,h,d]=a(this,yt).subarray(8,12);const u=t-h,f=e-d,p=Math.hypot(u,f);if(p<a(this,xh))return!1;const y=p-a(this,Sh),m=y/p,v=m*u,A=m*f;let x=l,E=c;l=h,c=d,h+=v,d+=A,(I=a(this,Er))==null||I.push(t,e);const _=-A/y,T=v/y,P=_*a(this,ml),k=T*a(this,ml);return a(this,yt).set(a(this,yt).subarray(2,8),0),a(this,yt).set([h+P,d+k],4),a(this,yt).set(a(this,yt).subarray(14,18),12),a(this,yt).set([h-P,d-k],16),isNaN(a(this,yt)[6])?(a(this,Ni).length===0&&(a(this,yt).set([l+P,c+k],2),a(this,Ni).push(NaN,NaN,NaN,NaN,(l+P-s)/r,(c+k-i)/o),a(this,yt).set([l-P,c-k],14),a(this,ci).push(NaN,NaN,NaN,NaN,(l-P-s)/r,(c-k-i)/o)),a(this,yt).set([x,E,l,c,h,d],6),!this.isEmpty()):(a(this,yt).set([x,E,l,c,h,d],6),Math.abs(Math.atan2(E-c,x-l)-Math.atan2(A,v))<Math.PI/2?([l,c,h,d]=a(this,yt).subarray(2,6),a(this,Ni).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/r,((c+d)/2-i)/o),[l,c,x,E]=a(this,yt).subarray(14,18),a(this,ci).push(NaN,NaN,NaN,NaN,((x+l)/2-s)/r,((E+c)/2-i)/o),!0):([x,E,l,c,h,d]=a(this,yt).subarray(0,6),a(this,Ni).push(((x+5*l)/6-s)/r,((E+5*c)/6-i)/o,((5*l+h)/6-s)/r,((5*c+d)/6-i)/o,((l+h)/2-s)/r,((c+d)/2-i)/o),[h,d,l,c,x,E]=a(this,yt).subarray(12,18),a(this,ci).push(((x+5*l)/6-s)/r,((E+5*c)/6-i)/o,((5*l+h)/6-s)/r,((5*c+d)/6-i)/o,((l+h)/2-s)/r,((c+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Ni),e=a(this,ci);if(isNaN(a(this,yt)[6])&&!this.isEmpty())return w(this,ce,Ty).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);w(this,ce,ky).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return w(this,ce,Py).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,o){return new _0(t,e,s,i,r,o)}getOutlines(){var u,f;const t=a(this,Ni),e=a(this,ci),s=a(this,yt),[i,r,o,l]=a(this,Es),c=new Float32Array(((f=(u=a(this,Er))==null?void 0:u.length)!=null?f:0)+2);for(let p=0,y=c.length-2;p<y;p+=2)c[p]=(a(this,Er)[p]-i)/o,c[p+1]=(a(this,Er)[p+1]-r)/l;if(c[c.length-2]=(a(this,Uo)-i)/o,c[c.length-1]=(a(this,jo)-r)/l,isNaN(s[6])&&!this.isEmpty())return w(this,ce,Ry).call(this,c);const h=new Float32Array(a(this,Ni).length+24+a(this,ci).length);let d=t.length;for(let p=0;p<d;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}d=w(this,ce,My).call(this,h,d);for(let p=e.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(e[p+y])){h[d]=h[d+1]=NaN,d+=2;continue}h[d]=e[p+y],h[d+1]=e[p+y+1],d+=2}return w(this,ce,Iy).call(this,h,d),this.newFreeDrawOutline(h,c,a(this,Es),a(this,gl),a(this,fl),a(this,pl))}};Es=new WeakMap,ci=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ni=new WeakMap,yt=new WeakMap,Uo=new WeakMap,jo=new WeakMap,xh=new WeakMap,Sh=new WeakMap,gl=new WeakMap,ml=new WeakMap,Er=new WeakMap,Eh=new WeakMap,mu=new WeakMap,bu=new WeakMap,ce=new WeakSet,td=function(){const t=a(this,yt).subarray(4,6),e=a(this,yt).subarray(16,18),[s,i,r,o]=a(this,Es);return[(a(this,Uo)+(t[0]-e[0])/2-s)/r,(a(this,jo)+(t[1]-e[1])/2-i)/o,(a(this,Uo)+(e[0]-t[0])/2-s)/r,(a(this,jo)+(e[1]-t[1])/2-i)/o]},Ty=function(){const[t,e,s,i]=a(this,Es),[r,o,l,c]=w(this,ce,td).call(this);return`M${(a(this,yt)[2]-t)/s} ${(a(this,yt)[3]-e)/i} L${(a(this,yt)[4]-t)/s} ${(a(this,yt)[5]-e)/i} L${r} ${o} L${l} ${c} L${(a(this,yt)[16]-t)/s} ${(a(this,yt)[17]-e)/i} L${(a(this,yt)[14]-t)/s} ${(a(this,yt)[15]-e)/i} Z`},Py=function(t){const e=a(this,ci);t.push(`L${e[4]} ${e[5]} Z`)},ky=function(t){const[e,s,i,r]=a(this,Es),o=a(this,yt).subarray(4,6),l=a(this,yt).subarray(16,18),[c,h,d,u]=w(this,ce,td).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${c} ${h} L${d} ${u} L${(l[0]-e)/i} ${(l[1]-s)/r}`)},Ry=function(t){const e=a(this,yt),[s,i,r,o]=a(this,Es),[l,c,h,d]=w(this,ce,td).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(u,t,a(this,Es),a(this,gl),a(this,fl),a(this,pl))},Iy=function(t,e){const s=a(this,ci);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},My=function(t,e){const s=a(this,yt).subarray(4,6),i=a(this,yt).subarray(16,18),[r,o,l,c]=a(this,Es),[h,d,u,f]=w(this,ce,td).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c],e),e+=24},b(Pn,Eh,8),b(Pn,mu,2),b(Pn,bu,a(Pn,Eh)+a(Pn,mu));let Yd=Pn;class _0 extends Q{constructor(e,s,i,r,o,l){super();b(this,yu);b(this,bl);b(this,zo,new Float32Array(4));b(this,kn);b(this,Ch);b(this,Cs);b(this,Th);b(this,ee);g(this,ee,e),g(this,Cs,s),g(this,bl,i),g(this,Th,r),g(this,kn,o),g(this,Ch,l),this.lastPoint=[NaN,NaN],w(this,yu,Ly).call(this,l);const[c,h,d,u]=a(this,zo);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/d,e[f+1]=(e[f+1]-h)/u;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/d,s[f+1]=(s[f+1]-h)/u}toSVGPath(){const e=[`M${a(this,ee)[4]} ${a(this,ee)[5]}`];for(let s=6,i=a(this,ee).length;s<i;s+=6){if(isNaN(a(this,ee)[s])){e.push(`L${a(this,ee)[s+4]} ${a(this,ee)[s+5]}`);continue}e.push(`C${a(this,ee)[s]} ${a(this,ee)[s+1]} ${a(this,ee)[s+2]} ${a(this,ee)[s+3]} ${a(this,ee)[s+4]} ${a(this,ee)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],o){const l=i-e,c=r-s;let h,d;switch(o){case 0:h=Q._rescale(a(this,ee),e,r,l,-c),d=Q._rescale(a(this,Cs),e,r,l,-c);break;case 90:h=Q._rescaleAndSwap(a(this,ee),e,s,l,c),d=Q._rescaleAndSwap(a(this,Cs),e,s,l,c);break;case 180:h=Q._rescale(a(this,ee),i,s,-l,c),d=Q._rescale(a(this,Cs),i,s,-l,c);break;case 270:h=Q._rescaleAndSwap(a(this,ee),i,r,-l,-c),d=Q._rescaleAndSwap(a(this,Cs),i,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return a(this,zo)}newOutliner(e,s,i,r,o,l=0){return new Yd(e,s,i,r,o,l)}getNewOutline(e,s){const[i,r,o,l]=a(this,zo),[c,h,d,u]=a(this,bl),f=o*d,p=l*u,y=i*d+c,m=r*u+h,v=this.newOutliner({x:a(this,Cs)[0]*f+y,y:a(this,Cs)[1]*p+m},a(this,bl),a(this,Th),e,a(this,Ch),s!=null?s:a(this,kn));for(let A=2;A<a(this,Cs).length;A+=2)v.add({x:a(this,Cs)[A]*f+y,y:a(this,Cs)[A+1]*p+m});return v.getOutlines()}}bl=new WeakMap,zo=new WeakMap,kn=new WeakMap,Ch=new WeakMap,Cs=new WeakMap,Th=new WeakMap,ee=new WeakMap,yu=new WeakSet,Ly=function(e){const s=a(this,ee);let i=s[4],r=s[5];const o=[i,r,i,r];let l=i,c=r;const h=e?Math.max:Math.min;for(let u=6,f=s.length;u<f;u+=6){const p=s[u+4],y=s[u+5];if(isNaN(s[u]))et.pointBoundingBox(p,y,o),c<y?(l=p,c=y):c===y&&(l=h(l,p));else{const m=[1/0,1/0,-1/0,-1/0];et.bezierBoundingBox(i,r,...s.slice(u,u+6),m),et.rectBoundingBox(...m,o),c<m[3]?(l=m[2],c=m[3]):c===m[3]&&(l=h(l,m[2]))}i=p,r=y}const d=a(this,zo);d[0]=o[0]-a(this,kn),d[1]=o[1]-a(this,kn),d[2]=o[2]-o[0]+2*a(this,kn),d[3]=o[3]-o[1]+2*a(this,kn),this.lastPoint=[l,c]};class bp{constructor(t,e=0,s=0,i=!0){b(this,Xe);b(this,Ph);b(this,kh);b(this,Cr,[]);b(this,hi,[]);const r=[1/0,1/0,-1/0,-1/0],o=we(10,-4);for(const{x:p,y,width:m,height:v}of t){const A=Math.floor((p-e)/o)*o,x=Math.ceil((p+m+e)/o)*o,E=Math.floor((y-e)/o)*o,_=Math.ceil((y+v+e)/o)*o,T=[A,E,_,!0],P=[x,E,_,!1];a(this,Cr).push(T,P),et.rectBoundingBox(A,E,x,_,r)}const l=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,d=r[1]-s,u=a(this,Cr).at(i?-1:-2),f=[u[0],u[2]];for(const p of a(this,Cr)){const[y,m,v]=p;p[0]=(y-h)/l,p[1]=(m-d)/c,p[2]=(v-d)/c}g(this,Ph,new Float32Array([h,d,l,c])),g(this,kh,f)}getOutlines(){a(this,Cr).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of a(this,Cr))e[3]?(t.push(...w(this,Xe,ug).call(this,e)),w(this,Xe,Fy).call(this,e)):(w(this,Xe,Ny).call(this,e),t.push(...w(this,Xe,ug).call(this,e)));return w(this,Xe,Dy).call(this,t)}}Ph=new WeakMap,kh=new WeakMap,Cr=new WeakMap,hi=new WeakMap,Xe=new WeakSet,Dy=function(t){const e=[],s=new Set;for(const o of t){const[l,c,h]=o;e.push([l,c,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,h,d,u]=o;s.delete(o);let f=l,p=c;for(r=[l,h],i.push(r);;){let y;if(s.has(d))y=d;else if(s.has(u))y=u;else break;s.delete(y),[l,c,h,d,u]=y,f!==l&&(r.push(f,p,l,p===c?c:h),f=l),p=p===c?h:c}r.push(f,p)}return new Ix(i,a(this,Ph),a(this,kh))},Uu=function(t){const e=a(this,hi);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1},Fy=function([,t,e]){const s=w(this,Xe,Uu).call(this,t);a(this,hi).splice(s,0,[t,e])},Ny=function([,t,e]){const s=w(this,Xe,Uu).call(this,t);for(let i=s;i<a(this,hi).length;i++){const[r,o]=a(this,hi)[i];if(r!==t)break;if(r===t&&o===e){a(this,hi).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=a(this,hi)[i];if(r!==t)break;if(r===t&&o===e){a(this,hi).splice(i,1);return}}},ug=function(t){const[e,s,i]=t,r=[[e,s,i]],o=w(this,Xe,Uu).call(this,i);for(let l=0;l<o;l++){const[c,h]=a(this,hi)[l];for(let d=0,u=r.length;d<u;d++){const[,f,p]=r[d];if(!(h<=f||p<=c)){if(f>=c){if(p>h)r[d][1]=h;else{if(u===1)return[];r.splice(d,1),d--,u--}continue}r[d][2]=c,p>h&&r.push([e,h,p])}}}return r};class Ix extends Q{constructor(e,s,i){super();b(this,Rh);b(this,yl);g(this,yl,e),g(this,Rh,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of a(this,yl)){let[i,r]=s;e.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],o){const l=[],c=i-e,h=r-s;for(const d of a(this,yl)){const u=new Array(d.length);for(let f=0;f<d.length;f+=2)u[f]=e+d[f]*c,u[f+1]=r-d[f+1]*h;l.push(u)}return l}get box(){return a(this,Rh)}get classNamesForOutlining(){return["highlightOutline"]}}Rh=new WeakMap,yl=new WeakMap;class yp extends Yd{newFreeDrawOutline(t,e,s,i,r,o){return new Mx(t,e,s,i,r,o)}}class Mx extends _0{newOutliner(t,e,s,i,r,o=0){return new yp(t,e,s,i,r,o)}}const ls=class ls{constructor({editor:t=null,uiManager:e=null}){b(this,Ot);b(this,di,null);b(this,Go,null);b(this,wl);b(this,he,null);b(this,Ih,!1);b(this,vl,!1);b(this,Mh,null);b(this,Lh);b(this,Tr,null);b(this,ui,null);b(this,Al);var s;t?(g(this,vl,!1),g(this,Al,At.HIGHLIGHT_COLOR),g(this,Mh,t)):(g(this,vl,!0),g(this,Al,At.HIGHLIGHT_DEFAULT_COLOR)),g(this,ui,(t==null?void 0:t._uiManager)||e),g(this,Lh,a(this,ui)._eventBus),g(this,wl,(t==null?void 0:t.color)||((s=a(this,ui))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(ls,Dh)||g(ls,Dh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return wt(this,"_keyboardManager",new lc([[["Escape","mac+Escape"],ls.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ls.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ls.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ls.prototype._moveToPrevious],[["Home","mac+Home"],ls.prototype._moveToBeginning],[["End","mac+End"],ls.prototype._moveToEnd]]))}renderButton(){const t=g(this,di,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,ui)._signal;t.addEventListener("click",w(this,Ot,ca).bind(this),{signal:e}),t.addEventListener("keydown",w(this,Ot,gg).bind(this),{signal:e});const s=g(this,Go,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=a(this,wl),t.append(s),t}renderMainDropdown(){const t=g(this,he,w(this,Ot,fg).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,di)){w(this,Ot,ca).call(this,t);return}const e=t.target.getAttribute("data-color");e&&w(this,Ot,pg).call(this,e,t)}_moveToNext(t){var e,s;if(!a(this,Ot,$r)){w(this,Ot,ca).call(this,t);return}if(t.target===a(this,di)){(e=a(this,he).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=a(this,he))==null?void 0:e.firstChild)||t.target===a(this,di)){a(this,Ot,$r)&&this._hideDropdownFromKeyboard();return}a(this,Ot,$r)||w(this,Ot,ca).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!a(this,Ot,$r)){w(this,Ot,ca).call(this,t);return}(e=a(this,he).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Ot,$r)){w(this,Ot,ca).call(this,t);return}(e=a(this,he).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,he))==null||t.classList.add("hidden"),(e=a(this,Tr))==null||e.abort(),g(this,Tr,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,vl)){if(!a(this,Ot,$r)){(t=a(this,Mh))==null||t.unselect();return}this.hideDropdown(),a(this,di).focus({preventScroll:!0,focusVisible:a(this,Ih)})}}updateColor(t){if(a(this,Go)&&(a(this,Go).style.backgroundColor=t),!a(this,he))return;const e=a(this,ui).highlightColors.values();for(const s of a(this,he).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,di))==null||t.remove(),g(this,di,null),g(this,Go,null),(e=a(this,he))==null||e.remove(),g(this,he,null)}};di=new WeakMap,Go=new WeakMap,wl=new WeakMap,he=new WeakMap,Ih=new WeakMap,vl=new WeakMap,Mh=new WeakMap,Lh=new WeakMap,Tr=new WeakMap,ui=new WeakMap,Al=new WeakMap,Dh=new WeakMap,Ot=new WeakSet,fg=function(){const t=document.createElement("div"),e=a(this,ui)._signal;t.addEventListener("contextmenu",ti,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of a(this,ui).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",a(ls,Dh)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===a(this,wl)),r.addEventListener("click",w(this,Ot,pg).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",w(this,Ot,gg).bind(this),{signal:e}),t},pg=function(t,e){e.stopPropagation(),a(this,Lh).dispatch("switchannotationeditorparams",{source:this,type:a(this,Al),value:t})},gg=function(t){ls._keyboardManager.exec(this,t)},ca=function(t){if(a(this,Ot,$r)){this.hideDropdown();return}if(g(this,Ih,t.detail===0),a(this,Tr)||(g(this,Tr,new AbortController),window.addEventListener("pointerdown",w(this,Ot,Oy).bind(this),{signal:a(this,ui).combinedSignal(a(this,Tr))})),a(this,he)){a(this,he).classList.remove("hidden");return}const e=g(this,he,w(this,Ot,fg).call(this));a(this,di).append(e)},Oy=function(t){var e;(e=a(this,he))!=null&&e.contains(t.target)||this.hideDropdown()},$r=function(){return a(this,he)&&!a(this,he).classList.contains("hidden")},b(ls,Dh,null);let Jd=ls;const St=class St extends Ut{constructor(e){super(Bn(Ks({},e),{name:"highlightEditor"}));b(this,mt);b(this,_l,null);b(this,Fh,0);b(this,Rn);b(this,Vo,null);b(this,xl,null);b(this,cs,null);b(this,Nh,null);b(this,Oh,0);b(this,Wo,null);b(this,zs,null);b(this,Ts,null);b(this,Re,!1);b(this,Sl,null);b(this,In);b(this,He,null);b(this,El,"");b(this,Gs);b(this,Bh,"");this.color=e.color||St._defaultColor,g(this,Gs,e.thickness||St._defaultThickness),g(this,In,e.opacity||St._defaultOpacity),g(this,Rn,e.boxes||null),g(this,Bh,e.methodOfCreation||""),g(this,El,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(g(this,Re,!0),w(this,mt,ju).call(this,e),w(this,mt,ha).call(this)):a(this,Rn)&&(g(this,_l,e.anchorNode),g(this,Fh,e.anchorOffset),g(this,Nh,e.focusNode),g(this,Oh,e.focusOffset),w(this,mt,mg).call(this),w(this,mt,ha).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=St.prototype;return wt(this,"_keyboardManager",new lc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Re)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Gs),methodOfCreation:a(this,Bh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;Ut.initialize(e,s),St._defaultColor||(St._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case At.HIGHLIGHT_DEFAULT_COLOR:St._defaultColor=s;break;case At.HIGHLIGHT_THICKNESS:St._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return a(this,Sl)}updateParams(e,s){switch(e){case At.HIGHLIGHT_COLOR:w(this,mt,By).call(this,s);break;case At.HIGHLIGHT_THICKNESS:w(this,mt,Hy).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[At.HIGHLIGHT_DEFAULT_COLOR,St._defaultColor],[At.HIGHLIGHT_THICKNESS,St._defaultThickness]]}get propertiesToUpdate(){return[[At.HIGHLIGHT_COLOR,this.color||St._defaultColor],[At.HIGHLIGHT_THICKNESS,a(this,Gs)||St._defaultThickness],[At.HIGHLIGHT_FREE,a(this,Re)]]}addEditToolbar(){return V(this,null,function*(){const e=yield Hn(St.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(g(this,xl,new Jd({editor:this})),e.addColorPicker(a(this,xl))),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,mt,ed).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,w(this,mt,ed).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){w(this,mt,bg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,mt,ha).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?w(this,mt,bg).call(this):e&&(w(this,mt,ha).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,l;const{drawLayer:s}=this.parent;let i;a(this,Re)?(e=(e-this.rotation+360)%360,i=w(r=St,Vs,Bl).call(r,a(this,zs).box,e)):i=w(o=St,Vs,Bl).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(a(this,Ts),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(a(this,He),{bbox:w(l=St,Vs,Bl).call(l,a(this,cs).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,El)&&(e.setAttribute("aria-label",a(this,El)),e.setAttribute("role","mark")),a(this,Re)?e.classList.add("free"):this.div.addEventListener("keydown",w(this,mt,Uy).bind(this),{signal:this._uiManager._signal});const s=g(this,Wo,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,Vo);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Jf(this,a(this,Wo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,He),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,He),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:w(this,mt,zu).call(this,!0);break;case 1:case 3:w(this,mt,zu).call(this,!1);break}}select(){var e;super.select(),a(this,He)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,He),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,He)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,He),{rootClass:{selected:!1}}),a(this,Re)||w(this,mt,zu).call(this,!1))}get _mustFixPosition(){return!a(this,Re)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Ts),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,He),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:o}){const{x:l,y:c,width:h,height:d}=i.getBoundingClientRect(),u=new AbortController,f=e.combinedSignal(u),p=y=>{u.abort(),w(this,Vs,Vy).call(this,e,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ti,{signal:f}),i.addEventListener("pointermove",w(this,Vs,Gy).bind(this,e),{signal:f}),this._freeHighlight=new yp({x:r,y:o},[l,c,h,d],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static deserialize(e,s,i){return V(this,null,function*(){var m,v,A,x;let r=null;if(e instanceof v0){const{data:{quadPoints:E,rect:_,rotation:T,id:P,color:k,opacity:D,popupRef:I},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:dt.HIGHLIGHT,color:Array.from(k),opacity:D,quadPoints:E,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:T,id:P,deleted:!1,popupRef:I}}else if(e instanceof pp){const{data:{inkLists:E,rect:_,rotation:T,id:P,color:k,borderStyle:{rawWidth:D},popupRef:I},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:dt.HIGHLIGHT,color:Array.from(k),thickness:D,inkLists:E,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:T,id:P,deleted:!1,popupRef:I}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,d=yield Hn(St,this,"deserialize").call(this,e,s,i);d.color=et.makeHexColor(...o),g(d,In,h||1),c&&g(d,Gs,e.thickness),d.annotationElementId=e.id||null,d._initialData=r;const[u,f]=d.pageDimensions,[p,y]=d.pageTranslation;if(l){const E=g(d,Rn,[]);for(let _=0;_<l.length;_+=8)E.push({x:(l[_]-p)/u,y:1-(l[_+1]-y)/f,width:(l[_+2]-l[_])/u,height:(l[_+1]-l[_+5])/f});w(m=d,mt,mg).call(m),w(v=d,mt,ha).call(v),d.rotate(d.rotation)}else if(c){g(d,Re,!0);const E=c[0],_={x:E[0]-p,y:f-(E[1]-y)},T=new yp(_,[0,0,u,f],1,a(d,Gs)/2,!0,.001);for(let D=0,I=E.length;D<I;D+=2)_.x=E[D]-p,_.y=f-(E[D+1]-y),T.add(_);const{id:P,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);w(A=d,mt,ju).call(A,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),w(x=d,mt,ha).call(x),d.rotate(d.parentRotation)}return d})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=Ut._colorManager.convert(this.color),r={annotationType:dt.HIGHLIGHT,color:i,opacity:a(this,In),thickness:a(this,Gs),quadPoints:w(this,mt,jy).call(this),outlines:w(this,mt,zy).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:w(this,mt,ed).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,mt,Wy).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};_l=new WeakMap,Fh=new WeakMap,Rn=new WeakMap,Vo=new WeakMap,xl=new WeakMap,cs=new WeakMap,Nh=new WeakMap,Oh=new WeakMap,Wo=new WeakMap,zs=new WeakMap,Ts=new WeakMap,Re=new WeakMap,Sl=new WeakMap,In=new WeakMap,He=new WeakMap,El=new WeakMap,Gs=new WeakMap,Bh=new WeakMap,mt=new WeakSet,mg=function(){const e=new bp(a(this,Rn),.001);g(this,zs,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,zs).box;const s=new bp(a(this,Rn),.0025,.001,this._uiManager.direction==="ltr");g(this,cs,s.getOutlines());const{lastPoint:i}=a(this,cs);g(this,Sl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},ju=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var u,f;if(g(this,zs,e),g(this,cs,e.getNewOutline(a(this,Gs)/2+1.5,.0025)),s>=0)g(this,Ts,s),g(this,Vo,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,He,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,cs).box,path:{d:a(this,cs).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Ts),{bbox:w(u=St,Vs,Bl).call(u,a(this,zs).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,He),{bbox:w(f=St,Vs,Bl).call(f,a(this,cs).box,p),path:{d:a(this,cs).toSVGPath()}})}const[o,l,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=h;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/p,this.height=h*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/p,this.height=h*p/y;break}}const{lastPoint:d}=a(this,cs);g(this,Sl,[(d[0]-o)/c,(d[1]-l)/h])},By=function(e){const s=(o,l)=>{var c,h;this.color=o,g(this,In,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,Ts),{root:{fill:o,"fill-opacity":l}}),(h=a(this,xl))==null||h.updateColor(o)},i=this.color,r=a(this,In);this.addCommands({cmd:s.bind(this,e,St._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:At.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Hy=function(e){const s=a(this,Gs),i=r=>{g(this,Gs,r),w(this,mt,$y).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:At.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},$y=function(e){if(!a(this,Re))return;w(this,mt,ju).call(this,{highlightOutlines:a(this,zs).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},bg=function(){a(this,Ts)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Ts)),g(this,Ts,null),this.parent.drawLayer.remove(a(this,He)),g(this,He,null))},ha=function(e=this.parent){a(this,Ts)===null&&({id:Ze(this,Ts)._,clipPathId:Ze(this,Vo)._}=e.drawLayer.draw({bbox:a(this,zs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,In)},rootClass:{highlight:!0,free:a(this,Re)},path:{d:a(this,zs).toSVGPath()}},!1,!0),g(this,He,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Re)},bbox:a(this,cs).box,path:{d:a(this,cs).toSVGPath()}},a(this,Re))),a(this,Wo)&&(a(this,Wo).style.clipPath=a(this,Vo)))},Vs=new WeakSet,Bl=function([e,s,i,r],o){switch(o){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},Uy=function(e){St._keyboardManager.exec(this,e)},zu=function(e){if(!a(this,_l))return;const s=window.getSelection();e?s.setPosition(a(this,_l),a(this,Fh)):s.setPosition(a(this,Nh),a(this,Oh))},ed=function(){return a(this,Re)?this.rotation:0},jy=function(){if(a(this,Re))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=a(this,Rn),l=new Float32Array(o.length*8);let c=0;for(const{x:h,y:d,width:u,height:f}of o){const p=h*e+i,y=(1-d)*s+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=p+u*e,l[c+5]=l[c+7]=y-f*s,c+=8}return l},zy=function(e){return a(this,zs).serialize(e,w(this,mt,ed).call(this))},Gy=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Vy=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Wy=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},b(St,Vs),z(St,"_defaultColor",null),z(St,"_defaultOpacity",1),z(St,"_defaultThickness",12),z(St,"_type","highlight"),z(St,"_editorType",dt.HIGHLIGHT),z(St,"_freeHighlightId",-1),z(St,"_freeHighlight",null),z(St,"_freeHighlightClipId","");let Qd=St;class x0{constructor(){b(this,qo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){a(this,qo)[t]=e}toSVGProperties(){const t=a(this,qo);return g(this,qo,Object.create(null)),{root:t}}reset(){g(this,qo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Dt("Not implemented")}}qo=new WeakMap;const Z=class Z extends Ut{constructor(e){super(e);b(this,Et);b(this,Ps,null);b(this,Cl);z(this,"_drawId",null);g(this,Cl,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(w(this,Et,yg).call(this,e),w(this,Et,sd).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Dt("Not implemented")}static get typesMap(){Dt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(a(Z,ge).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,o=r[s],l=c=>{var d;r.updateProperty(s,c);const h=a(this,Ps).updateProperty(s,c);h&&w(this,Et,id).call(this,h),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Z._mergeSVGProperties(a(this,Ps).getPathResizingSVGProperties(w(this,Et,Gu).call(this)),{bbox:w(this,Et,Hl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Z._mergeSVGProperties(a(this,Ps).getPathResizedSVGProperties(w(this,Et,Gu).call(this)),{bbox:w(this,Et,Hl).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:w(this,Et,Hl).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Z._mergeSVGProperties(a(this,Ps).getPathTranslatedSVGProperties(w(this,Et,Gu).call(this),this.parentDimensions),{bbox:w(this,Et,Hl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Cl)&&(g(this,Cl,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){w(this,Et,vg).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,Et,sd).call(this),w(this,Et,id).call(this,a(this,Ps).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),w(this,Et,vg).call(this)):e&&(this._uiManager.addShouldRescale(this),w(this,Et,sd).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Z._mergeSVGProperties({bbox:w(this,Et,Hl).call(this)},a(this,Ps).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&w(this,Et,id).call(this,a(this,Ps).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),i}static createDrawerInstance(e,s,i,r,o){Dt("Not implemented")}static startDrawing(e,s,i,r){var v,A;const{target:o,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=r;if(a(Z,kr)&&a(Z,kr)!==d)return;const{viewport:{rotation:u}}=e,{width:f,height:p}=o.getBoundingClientRect(),y=g(Z,Xo,new AbortController),m=e.combinedSignal(y);if(a(Z,Pr)||g(Z,Pr,h),(v=a(Z,kr))!=null||g(Z,kr,d),window.addEventListener("pointerup",x=>{var E;a(Z,Pr)===x.pointerId?this._endDraw(x):(E=a(Z,Rr))==null||E.delete(x.pointerId)},{signal:m}),window.addEventListener("pointercancel",x=>{var E;a(Z,Pr)===x.pointerId?this._currentParent.endDrawingSession():(E=a(Z,Rr))==null||E.delete(x.pointerId)},{signal:m}),window.addEventListener("pointerdown",x=>{a(Z,kr)===x.pointerType&&((a(Z,Rr)||g(Z,Rr,new Set)).add(x.pointerId),a(Z,ge).isCancellable()&&(a(Z,ge).removeLastElement(),a(Z,ge).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ti,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",x=>{x.timeStamp===a(Z,Yo)&&ne(x)},{signal:m}),e.toggleDrawing(),(A=s._editorUndoBar)==null||A.hide(),a(Z,ge)){e.drawLayer.updateProperties(this._currentDrawId,a(Z,ge).startNew(l,c,f,p,u));return}s.updateUIForDefaultProperties(this),g(Z,ge,this.createDrawerInstance(l,c,f,p,u)),g(Z,Ko,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(Z,Ko).toSVGProperties(),a(Z,ge).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(g(Z,Yo,-1),!a(Z,ge))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(a(Z,Pr)===r){if(((o=a(Z,Rr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Z,ge).add(s,i)),g(Z,Yo,e.timeStamp),ne(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g(Z,ge,null),g(Z,Ko,null),g(Z,kr,null),g(Z,Yo,NaN)),a(Z,Xo)&&(a(Z,Xo).abort(),g(Z,Xo,null),g(Z,Pr,NaN),g(Z,Rr,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,a(Z,ge).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=a(Z,ge),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:At.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(At.DRAW_STEP),!a(Z,ge).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Z,ge).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(Z,Ko),mustBeCommitted:!e});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,o,l){Dt("Not implemented")}static deserialize(e,s,i){return V(this,null,function*(){var u,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,h=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),d=yield Hn(Z,this,"deserialize").call(this,e,s,i);return d.createDrawingOptions(e),w(u=d,Et,yg).call(u,{drawOutlines:h}),w(f=d,Et,sd).call(f),d.onScaleChanging(),d.rotate(),d})}serializeDraw(e){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,Ps).serialize([s,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ps=new WeakMap,Cl=new WeakMap,ge=new WeakMap,Xo=new WeakMap,Ko=new WeakMap,Pr=new WeakMap,kr=new WeakMap,Rr=new WeakMap,Yo=new WeakMap,Et=new WeakSet,yg=function({drawOutlines:e,drawId:s,drawingOptions:i}){g(this,Ps,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=w(this,Et,wg).call(this,e,this.parent),w(this,Et,id).call(this,e.box)},wg=function(e,s){const{id:i}=s.drawLayer.draw(Z._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},vg=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},sd=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=w(this,Et,wg).call(this,a(this,Ps),e)}},qy=function([e,s,i,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-e,i*(l/o),r*(o/l)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(l/o),r*(o/l)];default:return[e,s,i,r]}},Gu=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,e,i*(o/l),r*(l/o)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(o/l),r*(l/o)];default:return[e,s,i,r]}},id=function(e){if([this.x,this.y,this.width,this.height]=w(this,Et,qy).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Hl=function(){const{x:e,y:s,width:i,height:r,rotation:o,parentRotation:l,parentDimensions:[c,h]}=this;switch((o*4+l)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(c/h),r*(h/c),i*(c/h)];case 5:return[1-s,e,i*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),i*(c/h)];case 7:return[s-i*(c/h),1-e-r*(h/c),i*(c/h),r*(h/c)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(h/c),s,r*(h/c),i*(c/h)];case 13:return[1-s-i*(c/h),e-r*(h/c),i*(c/h),r*(h/c)];case 14:return[1-e,1-s-i*(c/h),r*(h/c),i*(c/h)];case 15:return[s,1-e,i*(c/h),r*(h/c)];default:return[e,s,i,r]}},z(Z,"_currentDrawId",-1),z(Z,"_currentParent",null),b(Z,ge,null),b(Z,Xo,null),b(Z,Ko,null),b(Z,Pr,NaN),b(Z,kr,null),b(Z,Rr,null),b(Z,Yo,NaN),z(Z,"_INNER_MARGIN",3);let Zd=Z;class Lx{constructor(t,e,s,i,r,o){b(this,Pl);b(this,Oi,new Float64Array(6));b(this,me);b(this,be);b(this,Jo);b(this,Tl);b(this,Ke);b(this,Ie,"");b(this,Ws,0);b(this,Qo,new bc);b(this,Zo);b(this,ta);g(this,Zo,s),g(this,ta,i),g(this,Jo,r),g(this,Tl,o),[t,e]=w(this,Pl,Vu).call(this,t,e);const l=g(this,me,[NaN,NaN,NaN,NaN,t,e]);g(this,Ke,[t,e]),g(this,be,[{line:l,points:a(this,Ke)}]),a(this,Oi).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,Tl,e)}isEmpty(){return!a(this,be)||a(this,be).length===0}isCancellable(){return a(this,Ke).length<=10}add(t,e){[t,e]=w(this,Pl,Vu).call(this,t,e);const[s,i,r,o]=a(this,Oi).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,Zo)*l,a(this,ta)*c)<=2?null:(a(this,Ke).push(t,e),isNaN(s)?(a(this,Oi).set([r,o,t,e],2),a(this,me).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Oi)[0])&&a(this,me).splice(6,6),a(this,Oi).set([s,i,r,o,t,e],0),a(this,me).push(...Q.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(a(this,Ke).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){g(this,Zo,s),g(this,ta,i),g(this,Jo,r),[t,e]=w(this,Pl,Vu).call(this,t,e);const o=g(this,me,[NaN,NaN,NaN,NaN,t,e]);g(this,Ke,[t,e]);const l=a(this,be).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,be).push({line:o,points:a(this,Ke)}),a(this,Oi).set(o,0),g(this,Ws,0),this.toSVGPath(),null}getLastElement(){return a(this,be).at(-1)}setLastElement(t){return a(this,be)?(a(this,be).push(t),g(this,me,t.line),g(this,Ke,t.points),g(this,Ws,0),{path:{d:this.toSVGPath()}}):a(this,Qo).setLastElement(t)}removeLastElement(){if(!a(this,be))return a(this,Qo).removeLastElement();a(this,be).pop(),g(this,Ie,"");for(let t=0,e=a(this,be).length;t<e;t++){const{line:s,points:i}=a(this,be)[t];g(this,me,s),g(this,Ke,i),g(this,Ws,0),this.toSVGPath()}return{path:{d:a(this,Ie)}}}toSVGPath(){const t=Q.svgRound(a(this,me)[4]),e=Q.svgRound(a(this,me)[5]);if(a(this,Ke).length===2)return g(this,Ie,`${a(this,Ie)} M ${t} ${e} Z`),a(this,Ie);if(a(this,Ke).length<=6){const i=a(this,Ie).lastIndexOf("M");g(this,Ie,`${a(this,Ie).slice(0,i)} M ${t} ${e}`),g(this,Ws,6)}if(a(this,Ke).length===4){const i=Q.svgRound(a(this,me)[10]),r=Q.svgRound(a(this,me)[11]);return g(this,Ie,`${a(this,Ie)} L ${i} ${r}`),g(this,Ws,12),a(this,Ie)}const s=[];a(this,Ws)===0&&(s.push(`M ${t} ${e}`),g(this,Ws,6));for(let i=a(this,Ws),r=a(this,me).length;i<r;i+=6){const[o,l,c,h,d,u]=a(this,me).slice(i,i+6).map(Q.svgRound);s.push(`C${o} ${l} ${c} ${h} ${d} ${u}`)}return g(this,Ie,a(this,Ie)+s.join(" ")),g(this,Ws,a(this,me).length),a(this,Ie)}getOutlines(t,e,s,i){const r=a(this,be).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Qo).build(a(this,be),t,e,s,a(this,Jo),a(this,Tl),i),g(this,Oi,null),g(this,me,null),g(this,be,null),g(this,Ie,null),a(this,Qo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Oi=new WeakMap,me=new WeakMap,be=new WeakMap,Jo=new WeakMap,Tl=new WeakMap,Ke=new WeakMap,Ie=new WeakMap,Ws=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,ta=new WeakMap,Pl=new WeakSet,Vu=function(t,e){return Q._normalizePoint(t,e,a(this,Zo),a(this,ta),a(this,Jo))};class bc extends Q{constructor(){super(...arguments);b(this,Me);b(this,Ye);b(this,Hh,0);b(this,$h);b(this,ks);b(this,Bi);b(this,Hi);b(this,kl);b(this,Rl);b(this,ea)}build(e,s,i,r,o,l,c){g(this,Bi,s),g(this,Hi,i),g(this,kl,r),g(this,Rl,o),g(this,ea,l),g(this,$h,c!=null?c:0),g(this,ks,e),w(this,Me,Ky).call(this)}get thickness(){return a(this,ea)}setLastElement(e){return a(this,ks).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,ks).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of a(this,ks)){if(e.push(`M${Q.svgRound(s[4])} ${Q.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${Q.svgRound(s[10])} ${Q.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,l,c,h,d,u]=s.subarray(i,i+6).map(Q.svgRound);e.push(`C${o} ${l} ${c} ${h} ${d} ${u}`)}}return e.join("")}serialize([e,s,i,r],o){const l=[],c=[],[h,d,u,f]=w(this,Me,Xy).call(this);let p,y,m,v,A,x,E,_,T;switch(a(this,Rl)){case 0:T=Q._rescale,p=e,y=s+r,m=i,v=-r,A=e+h*i,x=s+(1-d-f)*r,E=e+(h+u)*i,_=s+(1-d)*r;break;case 90:T=Q._rescaleAndSwap,p=e,y=s,m=i,v=r,A=e+d*i,x=s+h*r,E=e+(d+f)*i,_=s+(h+u)*r;break;case 180:T=Q._rescale,p=e+i,y=s,m=-i,v=r,A=e+(1-h-u)*i,x=s+d*r,E=e+(1-h)*i,_=s+(d+f)*r;break;case 270:T=Q._rescaleAndSwap,p=e+i,y=s+r,m=-i,v=-r,A=e+(1-d-f)*i,x=s+(1-h-u)*r,E=e+(1-d)*i,_=s+(1-h)*r;break}for(const{line:P,points:k}of a(this,ks))l.push(T(P,p,y,m,v,o?new Array(P.length):null)),c.push(T(k,p,y,m,v,o?new Array(k.length):null));return{lines:l,points:c,rect:[A,x,E,_]}}static deserialize(e,s,i,r,o,{paths:{lines:l,points:c},rotation:h,thickness:d}){const u=[];let f,p,y,m,v;switch(h){case 0:v=Q._rescale,f=-e/i,p=s/r+1,y=1/i,m=-1/r;break;case 90:v=Q._rescaleAndSwap,f=-s/r,p=-e/i,y=1/r,m=1/i;break;case 180:v=Q._rescale,f=e/i+1,p=-s/r,y=-1/i,m=1/r;break;case 270:v=Q._rescaleAndSwap,f=s/r+1,p=e/i+1,y=-1/r,m=-1/i;break}if(!l){l=[];for(const x of c){const E=x.length;if(E===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(E===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const _=new Float32Array(3*(E-2));l.push(_);let[T,P,k,D]=x.subarray(0,4);_.set([NaN,NaN,NaN,NaN,T,P],0);for(let I=4;I<E;I+=2){const N=x[I],j=x[I+1];_.set(Q.createBezierPoints(T,P,k,D,N,j),(I-2)*3),[T,P,k,D]=[k,D,N,j]}}}for(let x=0,E=l.length;x<E;x++)u.push({line:v(l[x].map(_=>_!=null?_:NaN),f,p,y,m),points:v(c[x].map(_=>_!=null?_:NaN),f,p,y,m)});const A=new this.prototype.constructor;return A.build(u,i,r,1,h,d,o),A}get box(){return a(this,Ye)}updateProperty(e,s){return e==="stroke-width"?w(this,Me,Yy).call(this,s):null}updateParentDimensions([e,s],i){const[r,o]=w(this,Me,Un).call(this);g(this,Bi,e),g(this,Hi,s),g(this,kl,i);const[l,c]=w(this,Me,Un).call(this),h=l-r,d=c-o,u=a(this,Ye);return u[0]-=h,u[1]-=d,u[2]+=2*h,u[3]+=2*d,u}updateRotation(e){return g(this,Hh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,Ye).map(Q.svgRound).join(" ")}get defaultProperties(){const[e,s]=a(this,Ye);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(e)} ${Q.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=a(this,Ye);let i=0,r=0,o=0,l=0,c=0,h=0;switch(a(this,Hh)){case 90:r=s/e,o=-e/s,c=e;break;case 180:i=-1,l=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${i} ${r} ${o} ${l} ${Q.svgRound(c)} ${Q.svgRound(h)})`}getPathResizingSVGProperties([e,s,i,r]){const[o,l]=w(this,Me,Un).call(this),[c,h,d,u]=a(this,Ye);if(Math.abs(d-o)<=Q.PRECISION||Math.abs(u-l)<=Q.PRECISION){const v=e+i/2-(c+d/2),A=s+r/2-(h+u/2);return{path:{"transform-origin":`${Q.svgRound(e)} ${Q.svgRound(s)}`,transform:`${this.rotationTransform} translate(${v} ${A})`}}}const f=(i-2*o)/(d-2*o),p=(r-2*l)/(u-2*l),y=d/i,m=u/r;return{path:{"transform-origin":`${Q.svgRound(c)} ${Q.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${m}) translate(${Q.svgRound(o)} ${Q.svgRound(l)}) scale(${f} ${p}) translate(${Q.svgRound(-o)} ${Q.svgRound(-l)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[o,l]=w(this,Me,Un).call(this),c=a(this,Ye),[h,d,u,f]=c;if(c[0]=e,c[1]=s,c[2]=i,c[3]=r,Math.abs(u-o)<=Q.PRECISION||Math.abs(f-l)<=Q.PRECISION){const A=e+i/2-(h+u/2),x=s+r/2-(d+f/2);for(const{line:E,points:_}of a(this,ks))Q._translate(E,A,x,E),Q._translate(_,A,x,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(e)} ${Q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(u-2*o),y=(r-2*l)/(f-2*l),m=-p*(h+o)+e+o,v=-y*(d+l)+s+l;if(p!==1||y!==1||m!==0||v!==0)for(const{line:A,points:x}of a(this,ks))Q._rescale(A,m,v,p,y,A),Q._rescale(x,m,v,p,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(e)} ${Q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,o]=i,l=a(this,Ye),c=e-l[0],h=s-l[1];if(a(this,Bi)===r&&a(this,Hi)===o)for(const{line:d,points:u}of a(this,ks))Q._translate(d,c,h,d),Q._translate(u,c,h,u);else{const d=a(this,Bi)/r,u=a(this,Hi)/o;g(this,Bi,r),g(this,Hi,o);for(const{line:f,points:p}of a(this,ks))Q._rescale(f,c,h,d,u,f),Q._rescale(p,c,h,d,u,p);l[2]*=d,l[3]*=u}return l[0]=e,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Q.svgRound(e)} ${Q.svgRound(s)}`}}}get defaultSVGProperties(){const e=a(this,Ye);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Q.svgRound(e[0])} ${Q.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Ye=new WeakMap,Hh=new WeakMap,$h=new WeakMap,ks=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,kl=new WeakMap,Rl=new WeakMap,ea=new WeakMap,Me=new WeakSet,Un=function(e=a(this,ea)){const s=a(this,$h)+e/2*a(this,kl);return a(this,Rl)%180===0?[s/a(this,Bi),s/a(this,Hi)]:[s/a(this,Hi),s/a(this,Bi)]},Xy=function(){const[e,s,i,r]=a(this,Ye),[o,l]=w(this,Me,Un).call(this,0);return[e+o,s+l,i-2*o,r-2*l]},Ky=function(){const e=g(this,Ye,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,ks)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)et.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[d,u,f,p,y,m]=r.subarray(c,c+6);et.bezierBoundingBox(o,l,d,u,f,p,y,m,e),o=y,l=m}}const[s,i]=w(this,Me,Un).call(this);e[0]=We(e[0]-s,0,1),e[1]=We(e[1]-i,0,1),e[2]=We(e[2]+s,0,1),e[3]=We(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},Yy=function(e){const[s,i]=w(this,Me,Un).call(this);g(this,ea,e);const[r,o]=w(this,Me,Un).call(this),[l,c]=[r-s,o-i],h=a(this,Ye);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};class tu extends x0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e!=null||(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new tu(this._viewParameters);return t.updateAll(this),t}}const sa=class sa extends Zd{constructor(e){super(Bn(Ks({},e),{name:"inkEditor"}));b(this,wu);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){Ut.initialize(e,s),this._defaultDrawingOptions=new tu(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[At.INK_THICKNESS,"stroke-width"],[At.INK_COLOR,"stroke"],[At.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,o){return new Lx(e,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,o,l){return bc.deserialize(e,s,i,r,o,l)}static deserialize(e,s,i){return V(this,null,function*(){let r=null;if(e instanceof pp){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:u,opacity:f,borderStyle:{rawWidth:p},popupRef:y},parent:{page:{pageNumber:m}}}=e;r=e={annotationType:dt.INK,color:Array.from(u),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:m-1,rect:c.slice(0),rotation:h,id:d,deleted:!1,popupRef:y}}const o=yield Hn(sa,this,"deserialize").call(this,e,s,i);return o.annotationElementId=e.id||null,o._initialData=r,o})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=sa.getDefaultDrawingOptions({stroke:et.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:dt.INK,color:Ut._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!w(this,wu,Jy).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};wu=new WeakSet,Jy=function(e){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==s[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},z(sa,"_type","ink"),z(sa,"_editorType",dt.INK),z(sa,"_defaultDrawingOptions",null);let wp=sa;class vp extends bc{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const eu=8,yc=3;class sn{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:i},r,o,l,c){let h=new OffscreenCanvas(1,1),d=h.getContext("2d",{alpha:!1});const u=200,f=d.font=`${s} ${i} ${u}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:m,actualBoundingBoxDescent:v,fontBoundingBoxAscent:A,fontBoundingBoxDescent:x,width:E}=d.measureText(t),_=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,E)*_),P=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||u,Math.abs(A)+Math.abs(x)||u)*_);h=new OffscreenCanvas(T,P),d=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,P),d.fillStyle="black",d.fillText(t,T*(_-1)/2,P*(3-_)/2);const k=w(this,Rt,xg).call(this,d.getImageData(0,0,T,P).data),D=w(this,Rt,sw).call(this,k),I=w(this,Rt,Sg).call(this,D),N=w(this,Rt,_g).call(this,k,T,P,I);return this.processDrawnLines({lines:{curves:N,width:T,height:P},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,i,r){const[o,l,c]=w(this,Rt,iw).call(this,t),[h,d]=w(this,Rt,ew).call(this,o,l,c,Math.hypot(l,c)*a(this,ia).sigmaSFactor,a(this,ia).sigmaR,a(this,ia).kernelSize),u=w(this,Rt,Sg).call(this,d),f=w(this,Rt,_g).call(this,h,l,c,u);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:l}){var x;i%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:d}=t,u=(x=t.thickness)!=null?x:0,f=[],p=Math.min(e/h,s/d),y=p/e,m=p/s,v=[];for(const{points:E}of c){const _=o?w(this,Rt,tw).call(this,E):E;if(!_)continue;v.push(_);const T=_.length,P=new Float32Array(T),k=new Float32Array(3*(T===2?2:T-2));if(f.push({line:k,points:P}),T===2){P[0]=_[0]*y,P[1]=_[1]*m,k.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[D,I,N,j]=_;D*=y,I*=m,N*=y,j*=m,P.set([D,I,N,j],0),k.set([NaN,NaN,NaN,NaN,D,I],0);for(let O=4;O<T;O+=2){const tt=P[O]=_[O]*y,M=P[O+1]=_[O+1]*m;k.set(Q.createBezierPoints(D,I,N,j,tt,M),(O-2)*3),[D,I,N,j]=[N,j,tt,M]}}if(f.length===0)return null;const A=l?new vp:new bc;return A.build(f,e,s,1,i,l?0:u,r),{outline:A,newCurves:v,areContours:l,thickness:u,width:h,height:d}}static compressSignature(o){return V(this,arguments,function*({outlines:t,areContours:e,thickness:s,width:i,height:r}){let l=1/0,c=-1/0,h=0;for(const _ of t){h+=_.length;for(let T=2,P=_.length;T<P;T++){const k=_[T]-_[T-2];l=Math.min(l,k),c=Math.max(c,k)}}let d;l>=-128&&c<=127?d=Int8Array:l>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const u=t.length,f=eu+yc*u,p=new Uint32Array(f);let y=0;p[y++]=f*Uint32Array.BYTES_PER_ELEMENT+(h-2*u)*d.BYTES_PER_ELEMENT,p[y++]=0,p[y++]=i,p[y++]=r,p[y++]=e?0:1,p[y++]=Math.max(0,Math.floor(s!=null?s:0)),p[y++]=u,p[y++]=d.BYTES_PER_ELEMENT;for(const _ of t)p[y++]=_.length-2,p[y++]=_[0],p[y++]=_[1];const m=new CompressionStream("deflate-raw"),v=m.writable.getWriter();yield v.ready,v.write(p);const A=d.prototype.constructor;for(const _ of t){const T=new A(_.length-2);for(let P=2,k=_.length;P<k;P++)T[P-2]=_[P]-_[P-2];v.write(T)}v.close();const x=yield new Response(m.readable).arrayBuffer(),E=new Uint8Array(x);return Mb(E)})}static decompressSignature(t){return V(this,null,function*(){try{const o=n_(t),{readable:l,writable:c}=new DecompressionStream("deflate-raw"),h=c.getWriter();yield h.ready,h.write(o).then(()=>V(null,null,function*(){yield h.ready,yield h.close()})).catch(()=>{});let d=null,u=0;try{for(var e=R0(l),s,i,r;s=!(i=yield e.next()).done;s=!1){const k=i.value;d||(d=new Uint8Array(new Uint32Array(k.buffer,0,4)[0])),d.set(k,u),u+=k.length}}catch(i){r=[i]}finally{try{s&&(i=e.return)&&(yield i.call(e))}finally{if(r)throw r[0]}}const f=new Uint32Array(d.buffer,0,d.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const y=f[2],m=f[3],v=f[4]===0,A=f[5],x=f[6],E=f[7],_=[],T=(eu+yc*x)*Uint32Array.BYTES_PER_ELEMENT;let P;switch(E){case Int8Array.BYTES_PER_ELEMENT:P=new Int8Array(d.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:P=new Int16Array(d.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:P=new Int32Array(d.buffer,T);break}u=0;for(let k=0;k<x;k++){const D=f[yc*k+eu],I=new Float32Array(D+2);_.push(I);for(let N=0;N<yc-1;N++)I[N]=f[yc*k+eu+N+1];for(let N=0;N<D;N++)I[N+2]=I[N]+P[u++]}return{areContours:v,thickness:A,outlines:_,width:y,height:m}}catch(o){return ft(`decompressSignature: ${o}`),null}})}}ia=new WeakMap,Rt=new WeakSet,Ag=function(t,e,s,i){return s-=t,i-=e,s===0?i>0?0:4:s===1?i+6:2-i},fi=new WeakMap,Qy=function(t,e,s,i,r,o,l){const c=w(this,Rt,Ag).call(this,s,i,r,o);for(let h=0;h<8;h++){const d=(-h+c-l+16)%8,u=a(this,fi)[2*d],f=a(this,fi)[2*d+1];if(t[(s+u)*e+(i+f)]!==0)return d}return-1},Zy=function(t,e,s,i,r,o,l){const c=w(this,Rt,Ag).call(this,s,i,r,o);for(let h=0;h<8;h++){const d=(h+c+l+16)%8,u=a(this,fi)[2*d],f=a(this,fi)[2*d+1];if(t[(s+u)*e+(i+f)]!==0)return d}return-1},_g=function(t,e,s,i){const r=t.length,o=new Int32Array(r);for(let d=0;d<r;d++)o[d]=t[d]<=i?1:0;for(let d=1;d<s-1;d++)o[d*e]=o[d*e+e-1]=0;for(let d=0;d<e;d++)o[d]=o[e*s-1-d]=0;let l=1,c;const h=[];for(let d=1;d<s-1;d++){c=1;for(let u=1;u<e-1;u++){const f=d*e+u,p=o[f];if(p===0)continue;let y=d,m=u;if(p===1&&o[f-1]===0)l+=1,m-=1;else if(p>=1&&o[f+1]===0)l+=1,m+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const v=[u,d],A=m===u+1,x={isHole:A,points:v,id:l,parent:0};h.push(x);let E;for(const j of h)if(j.id===c){E=j;break}E?E.isHole?x.parent=A?E.parent:c:x.parent=A?c:E.parent:x.parent=A?c:0;const _=w(this,Rt,Qy).call(this,o,e,d,u,y,m,0);if(_===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=a(this,fi)[2*_],P=a(this,fi)[2*_+1];const k=d+T,D=u+P;y=k,m=D;let I=d,N=u;for(;;){const j=w(this,Rt,Zy).call(this,o,e,I,N,y,m,1);T=a(this,fi)[2*j],P=a(this,fi)[2*j+1];const O=I+T,tt=N+P;v.push(tt,O);const M=I*e+N;if(o[M+1]===0?o[M]=-l:o[M]===1&&(o[M]=l),O===d&&tt===u&&I===k&&N===D){o[f]!==1&&(c=Math.abs(o[f]));break}else y=I,m=N,I=O,N=tt}}}return h},Wu=function(t,e,s,i){if(s-e<=4){for(let k=e;k<s-2;k+=2)i.push(t[k],t[k+1]);return}const r=t[e],o=t[e+1],l=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(l,c),d=l/h,u=c/h,f=d*o-u*r,p=c/l,y=1/h,m=Math.atan(p),v=Math.cos(m),A=Math.sin(m),x=y*(Math.abs(v)+Math.abs(A)),E=y*(1-x+we(x,2)),_=Math.max(Math.atan(Math.abs(A+v)*E),Math.atan(Math.abs(A-v)*E));let T=0,P=e;for(let k=e+2;k<s-2;k+=2){const D=Math.abs(f-d*t[k+1]+u*t[k]);D>T&&(P=k,T=D)}T>we(h*_,2)?(w(this,Rt,Wu).call(this,t,e,P+2,i),w(this,Rt,Wu).call(this,t,P,s,i)):i.push(r,o)},tw=function(t){const e=[],s=t.length;return w(this,Rt,Wu).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},ew=function(t,e,s,i,r,o){const l=new Float32Array(we(o,2)),c=-2*we(i,2),h=o>>1;for(let m=0;m<o;m++){const v=we(m-h,2);for(let A=0;A<o;A++)l[m*o+A]=Math.exp((v+we(A-h,2))/c)}const d=new Float32Array(256),u=-2*we(r,2);for(let m=0;m<256;m++)d[m]=Math.exp(we(m,2)/u);const f=t.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let m=0;m<s;m++)for(let v=0;v<e;v++){const A=m*e+v,x=t[A];let E=0,_=0;for(let P=0;P<o;P++){const k=m+P-h;if(!(k<0||k>=s))for(let D=0;D<o;D++){const I=v+D-h;if(I<0||I>=e)continue;const N=t[k*e+I],j=l[P*o+D]*d[Math.abs(N-x)];E+=N*j,_+=j}}const T=p[A]=Math.round(E/_);y[T]++}return[p,y]},sw=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},xg=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let l=0,c=s.length;l<c;l++){if(t[(l<<2)+3]===0){i=s[l]=255;continue}const d=s[l]=t[l<<2];d>i&&(i=d),d<r&&(r=d)}const o=255/(i-r);for(let l=0;l<e;l++)s[l]=(s[l]-r)*o;return s},Sg=function(t){let e,s=-1/0,i=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>i&&(i=e-o,l=e-1),s=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},iw=function(t){const e=t,{width:s,height:i}=t,{maxDim:r}=a(this,ia);let o=s,l=i;if(s>r||i>r){let f=s,p=i,y=Math.log2(Math.max(s,i)/r);const m=Math.floor(y);y=y===m?m-1:m;for(let A=0;A<y;A++){o=f,l=p,o>r&&(o=Math.ceil(o/2)),l>r&&(l=Math.ceil(l/2));const x=new OffscreenCanvas(o,l);x.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=x.transferToImageBitmap()}const v=Math.min(r/o,r/l);o=Math.round(o*v),l=Math.round(l*v)}const h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);const d=h.getImageData(0,0,o,l).data;return[w(this,Rt,xg).call(this,d),o,l]},b(sn,Rt),b(sn,ia,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(sn,fi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Ap extends x0{constructor(){super(),super.updateProperties({fill:Ut._defaultLineColor,"stroke-width":0})}clone(){const t=new Ap;return t.updateAll(this),t}}class _p extends tu{constructor(t){super(t),super.updateProperties({stroke:Ut._defaultLineColor,"stroke-width":1})}clone(){const t=new _p(this._viewParameters);return t.updateAll(this),t}}const Je=class Je extends Zd{constructor(e){super(Bn(Ks({},e),{mustBeCommitted:!0,name:"signatureEditor"}));b(this,Ir,!1);b(this,Rs,null);b(this,Mr,null);b(this,Lr,null);this._willKeepAspectRatio=!0,g(this,Mr,e.signatureData||null),g(this,Rs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){Ut.initialize(e,s),this._defaultDrawingOptions=new Ap,this._defaultDrawnSignatureOptions=new _p(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,Rs)}}static computeTelemetryFinalData(e){var i,r;const s=e.get("hasDescription");return{hasAltText:(i=s.get(!0))!=null?i:0,hasNoAltText:(r=s.get(!1))!=null?r:0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(a(this,Mr)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:h,heightInPage:d}=a(this,Mr),{rawDims:{pageWidth:u,pageHeight:f},rotation:p}=this.parent.viewport,y=sn.processDrawnLines({lines:r,pageWidth:u,pageHeight:f,rotation:p,innerMargin:Je._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){g(this,Lr,e),this.addEditToolbar()}getUuid(){return a(this,Lr)}get description(){return a(this,Rs)}set description(e){g(this,Rs,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:i,width:r,height:o}=a(this,Mr),l=Math.max(r,o),c=sn.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:i,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}addEditToolbar(){return V(this,null,function*(){const e=yield Hn(Je.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.signatureManager&&a(this,Rs)!==null&&(yield e.addEditSignatureButton(this._uiManager.signatureManager,a(this,Lr),a(this,Rs)),e.show()),e):null})}addSignature(e,s,i,r){const{x:o,y:l}=this,{outline:c}=g(this,Mr,e);g(this,Ir,c instanceof vp),g(this,Rs,i),this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let h;a(this,Ir)?h=Je.getDefaultDrawingOptions():(h=Je._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[d,u]=this.parentDimensions,[,f]=this.pageDimensions;let p=s/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(d*this.width,u*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return sn.process(e,s,i,r,Je._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return sn.extractContoursFromText(e,s,i,r,o,Je._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return sn.processDrawnLines({lines:e,pageWidth:s,pageHeight:i,rotation:r,innerMargin:Je._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=Je.getDefaultDrawingOptions():(this._drawingOptions=Je._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:dt.SIGNATURE,isSignature:!0,areContours:a(this,Ir),color:[0,0,0],thickness:a(this,Ir)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:s,points:i},l.uuid=a(this,Lr),l.isCopy=!0):l.lines=s,a(this,Rs)&&(l.accessibilityData={type:"Figure",alt:a(this,Rs)}),l}static deserializeDraw(e,s,i,r,o,l){return l.areContours?vp.deserialize(e,s,i,r,o,l):bc.deserialize(e,s,i,r,o,l)}static deserialize(e,s,i){return V(this,null,function*(){var o;const r=yield Hn(Je,this,"deserialize").call(this,e,s,i);return g(r,Ir,e.areContours),g(r,Rs,((o=e.accessibilityData)==null?void 0:o.alt)||""),g(r,Lr,e.uuid),r})}};Ir=new WeakMap,Rs=new WeakMap,Mr=new WeakMap,Lr=new WeakMap,z(Je,"_type","signature"),z(Je,"_editorType",dt.SIGNATURE),z(Je,"_defaultDrawingOptions",null);let xp=Je;const Uh=class Uh extends Ut{constructor(e){super(Bn(Ks({},e),{name:"stampEditor"}));b(this,Ct);b(this,qt,null);b(this,ye,null);b(this,Dr,null);b(this,Mn,null);b(this,Fr,null);b(this,Il,"");b(this,Ln,null);b(this,na,!1);b(this,$i,null);b(this,Is,!1);b(this,Ml,!1);g(this,Mn,e.bitmapUrl),g(this,Fr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){Ut.initialize(e,s)}static isHandlingMimeForPasting(e){return Kf.includes(e)}static paste(e,s){s.pasteEditor(dt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){var i,r;const s=e.get("hasAltText");return{hasAltText:(i=s.get(!0))!=null?i:0,hasNoAltText:(r=s.get(!1))!=null?r:0}}mlGuessAltText(e=null,s=!0){return V(this,null,function*(){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=yield i.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return yield this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h})}remove(){var e;a(this,ye)&&(g(this,qt,null),this._uiManager.imageManager.deleteId(a(this,ye)),(e=a(this,Ln))==null||e.remove(),g(this,Ln,null),a(this,$i)&&(clearTimeout(a(this,$i)),g(this,$i,null))),super.remove()}rebuild(){if(!this.parent){a(this,ye)&&w(this,Ct,qu).call(this);return}super.rebuild(),this.div!==null&&(a(this,ye)&&a(this,Ln)===null&&w(this,Ct,qu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Dr)||a(this,qt)||a(this,Mn)||a(this,Fr)||a(this,ye)||a(this,na))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,na)||(a(this,qt)?w(this,Ct,Xu).call(this):w(this,Ct,qu).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(g(this,ye,i),r&&g(this,qt,r),g(this,na,!1),w(this,Ct,Xu).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,$i)!==null&&clearTimeout(a(this,$i)),g(this,$i,setTimeout(()=>{g(this,$i,null),w(this,Ct,Eg).call(this)},200))}copyCanvas(e,s,i=!1){var p;e||(e=224);const{width:r,height:o}=a(this,qt),l=new en;let c=a(this,qt),h=r,d=o,u=null;if(s){if(r>s||o>s){const D=Math.min(s/r,s/o);h=Math.floor(r*D),d=Math.floor(o*D)}u=document.createElement("canvas");const y=u.width=Math.ceil(h*l.sx),m=u.height=Math.ceil(d*l.sy);a(this,Is)||(c=w(this,Ct,Ku).call(this,y,m));const v=u.getContext("2d");v.filter=this._uiManager.hcmFilter;let A="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(A="#8f8f9d",x="#42414d");const E=15,_=E*l.sx,T=E*l.sy,P=new OffscreenCanvas(_*2,T*2),k=P.getContext("2d");k.fillStyle=A,k.fillRect(0,0,_*2,T*2),k.fillStyle=x,k.fillRect(0,0,_,T),k.fillRect(_,T,_,T),v.fillStyle=v.createPattern(P,"repeat"),v.fillRect(0,0,y,m),v.drawImage(c,0,0,c.width,c.height,0,0,y,m)}let f=null;if(i){let y,m;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,m=c.height;else if(c=a(this,qt),r>e||o>e){const x=Math.min(e/r,e/o);y=Math.floor(r*x),m=Math.floor(o*x),a(this,Is)||(c=w(this,Ct,Ku).call(this,y,m))}const A=new OffscreenCanvas(y,m).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,y,m),f={width:y,height:m,data:A.getImageData(0,0,y,m).data}}return{canvas:u,width:h,height:d,imageData:f}}static deserialize(e,s,i){return V(this,null,function*(){var v;let r=null,o=!1;if(e instanceof A0){const{data:{rect:A,rotation:x,id:E,structParent:_,popupRef:T},container:P,parent:{page:{pageNumber:k}},canvas:D}=e;let I,N;D?(delete e.canvas,{id:I,bitmap:N}=i.imageManager.getFromCanvas(P.id,D),D.remove()):(o=!0,e._hasNoCanvas=!0);const j=((v=yield s._structTree.getAriaAttributes(`${Gf}${E}`))==null?void 0:v.get("aria-label"))||"";r=e={annotationType:dt.STAMP,bitmapId:I,bitmap:N,pageIndex:k-1,rect:A.slice(0),rotation:x,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:_,popupRef:T}}const l=yield Hn(Uh,this,"deserialize").call(this,e,s,i),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:u,isSvg:f,accessibilityData:p}=e;o?(i.addMissingCanvas(e.id,l),g(l,na,!0)):u&&i.imageManager.isValidId(u)?(g(l,ye,u),h&&g(l,qt,h)):g(l,Mn,d),g(l,Is,f);const[y,m]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/m,l.annotationElementId=e.id||null,p&&(l.altTextData=p),l._initialData=r,g(l,Ml,!!r),l})}serialize(e=!1,s=null){var c;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:dt.STAMP,bitmapId:a(this,ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Is),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=w(this,Ct,Yu).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=w(this,Ct,nw).call(this,i);if(h.isSame)return null;h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=(c=this._initialData.structParent)!=null?c:-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const l=a(this,Is)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(a(this,ye)))s.stamps.set(a(this,ye),{area:l,serialized:i}),i.bitmap=w(this,Ct,Yu).call(this,!1);else if(a(this,Is)){const h=s.stamps.get(a(this,ye));l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=w(this,Ct,Yu).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};qt=new WeakMap,ye=new WeakMap,Dr=new WeakMap,Mn=new WeakMap,Fr=new WeakMap,Il=new WeakMap,Ln=new WeakMap,na=new WeakMap,$i=new WeakMap,Is=new WeakMap,Ml=new WeakMap,Ct=new WeakSet,nd=function(e,s=!1){if(!e){this.remove();return}g(this,qt,e.bitmap),s||(g(this,ye,e.id),g(this,Is,e.isSvg)),e.file&&g(this,Il,e.file.name),w(this,Ct,Xu).call(this)},rd=function(){if(g(this,Dr,null),this._uiManager.enableWaiting(!1),!!a(this,Ln)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,qt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}},qu=function(){if(a(this,ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,ye)).then(i=>w(this,Ct,nd).call(this,i,!0)).finally(()=>w(this,Ct,rd).call(this));return}if(a(this,Mn)){const i=a(this,Mn);g(this,Mn,null),this._uiManager.enableWaiting(!0),g(this,Dr,this._uiManager.imageManager.getFromUrl(i).then(r=>w(this,Ct,nd).call(this,r)).finally(()=>w(this,Ct,rd).call(this)));return}if(a(this,Fr)){const i=a(this,Fr);g(this,Fr,null),this._uiManager.enableWaiting(!0),g(this,Dr,this._uiManager.imageManager.getFromFile(i).then(r=>w(this,Ct,nd).call(this,r)).finally(()=>w(this,Ct,rd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Kf.join(",");const s=this._uiManager._signal;g(this,Dr,new Promise(i=>{e.addEventListener("change",()=>V(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,Ct,nd).call(this,r)}i()}),{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>w(this,Ct,rd).call(this))),e.click()},Xu=function(){var u;const{div:e}=this;let{width:s,height:i}=a(this,qt);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>l*r||i>l*o){const f=Math.min(l*r/s,l*o/i);s*=f,i*=f}const[c,h]=this.parentDimensions;this.setDims(s*c/r,i*h/o),this._uiManager.enableWaiting(!1);const d=g(this,Ln,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=s/r,this.height=i/o,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),w(this,Ct,Eg).call(this),a(this,Ml)||(this.parent.addUndoableEditor(this),g(this,Ml,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Il)&&this.div.setAttribute("aria-description",a(this,Il))},Ku=function(e,s){const{width:i,height:r}=a(this,qt);let o=i,l=r,c=a(this,qt);for(;o>2*e||l>2*s;){const h=o,d=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const u=new OffscreenCanvas(o,l);u.getContext("2d").drawImage(c,0,0,h,d,0,0,o,l),c=u.transferToImageBitmap()}return c},Eg=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,o=new en,l=Math.ceil(i*e*o.sx),c=Math.ceil(r*s*o.sy),h=a(this,Ln);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=a(this,Is)?a(this,qt):w(this,Ct,Ku).call(this,l,c),u=h.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(d,0,0,d.width,d.height,0,0,l,c)},Yu=function(e){if(e){if(a(this,Is)){const r=this._uiManager.imageManager.getSvgUrl(a(this,ye));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,qt),s.getContext("2d").drawImage(a(this,qt),0,0),s.toDataURL()}if(a(this,Is)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Zn.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Zn.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,qt),0,0,a(this,qt).width,a(this,qt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,qt))},nw=function(e){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},z(Uh,"_type","stamp"),z(Uh,"_editorType",dt.STAMP);let Sp=Uh;const gi=class gi{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:d}){b(this,Xt);b(this,ra);b(this,Ll,!1);b(this,Ui,null);b(this,Nr,null);b(this,Dn,null);b(this,qs,new Map);b(this,Or,!1);b(this,Dl,!1);b(this,oa,!1);b(this,pi,null);b(this,Fn,null);b(this,$e,null);b(this,Nn,null);b(this,st);const u=[...a(gi,Br).values()];if(!gi._initialized){gi._initialized=!0;for(const f of u)f.initialize(d,t)}t.registerEditorTypes(u),g(this,st,t),this.pageIndex=e,this.div=s,g(this,ra,r),g(this,Ui,o),this.viewport=h,g(this,$e,c),this.drawLayer=l,this._structTree=i,a(this,st).addLayer(this)}get isEmpty(){return a(this,qs).size===0}get isInvisible(){return this.isEmpty&&a(this,st).getMode()===dt.NONE}updateToolbar(t){a(this,st).updateToolbar(t)}updateMode(t=a(this,st).getMode()){switch(w(this,Xt,Ju).call(this),t){case dt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of a(gi,Br).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,$e))==null?void 0:e.div)}setEditingState(t){a(this,st).setEditingState(t)}addCommands(t){a(this,st).addCommands(t)}cleanUndoStack(t){a(this,st).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Ui))==null||e.div.classList.toggle("disabled",!t)}enable(){return V(this,null,function*(){g(this,oa,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of a(this,qs).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,st).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!a(this,Ui)){g(this,oa,!1);return}const e=a(this,Ui).getEditableAnnotations();for(const s of e){if(s.hide(),a(this,st).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=yield this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,oa,!1)})}disable(){var i;g(this,Dl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,qs).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(a(this,Ui)){const r=a(this,Ui).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,st).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,st).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}w(this,Xt,Ju).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of a(gi,Br).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,Dl,!1)}getEditableAnnotation(t){var e;return((e=a(this,Ui))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,st).getActive()!==t&&a(this,st).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,$e))!=null&&t.div&&!a(this,Nn)){g(this,Nn,new AbortController);const e=a(this,st).combinedSignal(a(this,Nn));a(this,$e).div.addEventListener("pointerdown",w(this,Xt,rw).bind(this),{signal:e}),a(this,$e).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,$e))!=null&&t.div&&a(this,Nn)&&(a(this,Nn).abort(),g(this,Nn,null),a(this,$e).div.classList.remove("highlighting"))}enableClick(){if(a(this,Nr))return;g(this,Nr,new AbortController);const t=a(this,st).combinedSignal(a(this,Nr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Nr))==null||t.abort(),g(this,Nr,null)}attach(t){a(this,qs).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,st).isDeletedAnnotationElement(e)&&a(this,st).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,qs).delete(t.id),(e=a(this,ra))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Dl)&&t.annotationElementId&&a(this,st).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,st).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,st).addDeletedAnnotationElement(t.annotationElementId),Ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,st).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,oa)),a(this,st).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Dn)&&(t._focusEventsAllowed=!1,g(this,Dn,setTimeout(()=>{g(this,Dn,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,st)._signal}),e.focus())},0))),t._structTreeParentId=(s=a(this,ra))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return a(this,st).getId()}combinedSignal(t){return a(this,st).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Xt,qi))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){return V(this,null,function*(){a(this,st).updateToolbar(t),yield a(this,st).updateMode(t);const{offsetX:s,offsetY:i}=w(this,Xt,Tg).call(this),r=this.getNextId(),o=w(this,Xt,Cg).call(this,Ks({parent:this,id:r,x:s,y:i,uiManager:a(this,st),isCentered:!0},e));o&&this.add(o)})}deserialize(t){return V(this,null,function*(){var e,s;return(yield(s=a(gi,Br).get((e=t.annotationType)!=null?e:t.annotationEditorType))==null?void 0:s.deserialize(t,this,a(this,st)))||null})}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=w(this,Xt,Cg).call(this,Ks({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:a(this,st),isCentered:e},s));return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(w(this,Xt,Tg).call(this),!0,t)}setSelected(t){a(this,st).setSelected(t)}toggleSelected(t){a(this,st).toggleSelected(t)}unselect(t){a(this,st).unselect(t)}pointerup(t){var i;const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,Or)||(g(this,Or,!1),(i=a(this,Xt,qi))!=null&&i.isDrawer&&a(this,Xt,qi).supportMultipleDrawings))return;if(!a(this,Ll)){g(this,Ll,!0);return}const s=a(this,st).getMode();if(s===dt.STAMP||s===dt.SIGNATURE){a(this,st).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(a(this,st).getMode()===dt.HIGHLIGHT&&this.enableTextSelection(),a(this,Or)){g(this,Or,!1);return}const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,Or,!0),(i=a(this,Xt,qi))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=a(this,st).getActive();g(this,Ll,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,pi)){a(this,Xt,qi).startDrawing(this,a(this,st),!1,t);return}a(this,st).setCurrentDrawingSession(this),g(this,pi,new AbortController);const e=a(this,st).combinedSignal(a(this,pi));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,Fn,null),this.commitOrRemove())},{signal:e}),a(this,Xt,qi).startDrawing(this,a(this,st),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,Fn,e);return}a(this,Fn)&&setTimeout(()=>{var e;(e=a(this,Fn))==null||e.focus(),g(this,Fn,null)},0)}endDrawingSession(t=!1){return a(this,pi)?(a(this,st).setCurrentDrawingSession(null),a(this,pi).abort(),g(this,pi,null),g(this,Fn,null),a(this,Xt,qi).endDrawing(t)):null}findNewParent(t,e,s){const i=a(this,st).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return a(this,pi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,pi)&&a(this,Xt,qi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,st).getActive())==null?void 0:t.parent)===this&&(a(this,st).commitOrRemove(),a(this,st).setActiveEditor(null)),a(this,Dn)&&(clearTimeout(a(this,Dn)),g(this,Dn,null));for(const s of a(this,qs).values())(e=a(this,ra))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,qs).clear(),a(this,st).removeLayer(this)}render({viewport:t}){this.viewport=t,Yr(this.div,t);for(const e of a(this,st).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,st).commitOrRemove(),w(this,Xt,Ju).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Yr(this.div,{rotation:s}),e!==s)for(const i of a(this,qs).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,st).viewParameters.realScale}};ra=new WeakMap,Ll=new WeakMap,Ui=new WeakMap,Nr=new WeakMap,Dn=new WeakMap,qs=new WeakMap,Or=new WeakMap,Dl=new WeakMap,oa=new WeakMap,pi=new WeakMap,Fn=new WeakMap,$e=new WeakMap,Nn=new WeakMap,st=new WeakMap,Br=new WeakMap,Xt=new WeakSet,rw=function(t){a(this,st).unselectAll();const{target:e}=t;if(e===a(this,$e).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,$e).div.contains(e)){const{isMac:s}=Se.platform;if(t.button!==0||t.ctrlKey&&s)return;a(this,st).showAllEditors("highlight",!0,!0),a(this,$e).div.classList.add("free"),this.toggleDrawing(),Qd.startHighlighting(this,a(this,st).direction==="ltr",{target:a(this,$e).div,x:t.x,y:t.y}),a(this,$e).div.addEventListener("pointerup",()=>{a(this,$e).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,st)._signal}),t.preventDefault()}},qi=function(){return a(gi,Br).get(a(this,st).getMode())},Cg=function(t){const e=a(this,Xt,qi);return e?new e.prototype.constructor(t):null},Tg=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+i),h=(r+l)/2-t,d=(o+c)/2-e,[u,f]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:u,offsetY:f}},Ju=function(){for(const t of a(this,qs).values())t.isEmpty()&&t.remove()},z(gi,"_initialized",!1),b(gi,Br,new Map([mp,wp,Sp,Qd,xp].map(t=>[t._editorType,t])));let Ep=gi;const de=class de{constructor({pageIndex:t}){b(this,ji);b(this,mi,null);b(this,Qe,new Map);b(this,aa,new Map);this.pageIndex=t}setParent(t){if(!a(this,mi)){g(this,mi,t);return}if(a(this,mi)!==t){if(a(this,Qe).size>0)for(const e of a(this,Qe).values())e.remove(),t.append(e);g(this,mi,t)}}static get _svgFactory(){return wt(this,"_svgFactory",new Xd)}draw(t,e=!1,s=!1){const i=Ze(de,jh)._++,r=w(this,ji,Pg).call(this),o=de._svgFactory.createElement("defs");r.append(o);const l=de._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,aa).set(i,l);const h=s?w(this,ji,aw).call(this,o,c):null,d=de._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,Qe).set(i,r),{id:i,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Ze(de,jh)._++,i=w(this,ji,Pg).call(this),r=de._svgFactory.createElement("defs");i.append(r);const o=de._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const u=de._svgFactory.createElement("mask");r.append(u),c=`mask_p${this.pageIndex}_${s}`,u.setAttribute("id",c),u.setAttribute("maskUnits","objectBoundingBox");const f=de._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=de._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const h=de._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const d=h.cloneNode();return i.append(d),h.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,t),a(this,Qe).set(s,i),s}finalizeDraw(t,e){a(this,aa).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,Qe).get(t):t;if(l){if(s&&w(this,ji,kg).call(this,l,s),i&&w(c=de,vu,ow).call(c,l,i),r){const{classList:h}=l;for(const[d,u]of Object.entries(r))h.toggle(d,u)}if(o){const d=l.firstChild.firstChild;w(this,ji,kg).call(this,d,o)}}}updateParent(t,e){if(e===this)return;const s=a(this,Qe).get(t);s&&(a(e,mi).append(s),a(this,Qe).delete(t),a(e,Qe).set(t,s))}remove(t){a(this,aa).delete(t),a(this,mi)!==null&&(a(this,Qe).get(t).remove(),a(this,Qe).delete(t))}destroy(){g(this,mi,null);for(const t of a(this,Qe).values())t.remove();a(this,Qe).clear(),a(this,aa).clear()}};mi=new WeakMap,Qe=new WeakMap,aa=new WeakMap,jh=new WeakMap,vu=new WeakSet,ow=function(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},ji=new WeakSet,Pg=function(){const t=de._svgFactory.create(1,1,!0);return a(this,mi).append(t),t.setAttribute("aria-hidden",!0),t},aw=function(t,e){const s=de._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=de._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},kg=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},b(de,vu),b(de,jh,0);let Cp=de;globalThis.pdfjsTestingUtils={HighlightOutliner:bp},globalThis.pdfjsLib={AbortException:Qn,AnnotationEditorLayer:Ep,AnnotationEditorParamsType:At,AnnotationEditorType:dt,AnnotationEditorUIManager:Jr,AnnotationLayer:gp,AnnotationMode:Jn,AnnotationType:se,build:ux,ColorPicker:Jd,createValidAbsoluteUrl:Cb,DOMSVGFactory:Xd,DrawLayer:Cp,FeatureTest:Se,fetchData:oc,getDocument:c0,getFilenameFromUrl:r_,getPdfFilenameFromUrl:o_,getUuid:Ib,getXfaPageViewport:a_,GlobalWorkerOptions:ei,ImageKind:Ld,InvalidPDFException:Uf,isDataScheme:$d,isPdfFile:Wf,isValidExplicitDest:rx,MathClamp:We,noContextMenu:ti,normalizeUnicode:s_,OPS:Fd,OutputScale:en,PasswordResponses:qA,PDFDataRangeTransport:h0,PDFDateString:qf,PDFWorker:Ca,PermissionFlag:WA,PixelsPerInch:Zn,RenderingCancelledException:Vf,ResponseException:Hd,setLayerDimensions:Yr,shadow:wt,SignatureExtractor:sn,stopEvent:ne,SupportedImageMimeTypes:Kf,TextLayer:uc,TouchManager:jd,updateUrlHash:Tb,Util:et,VerbosityLevel:Dd,version:dx,XfaLayer:p0};const Dx=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},Fx={class:"min-h-screen bg-gray-50 py-8 px-4"},Nx={class:"max-w-4xl mx-auto"},Ox={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Bx={class:"space-y-4"},Hx={key:0,class:"bg-white rounded-lg shadow-md p-6 mb-6"},$x={class:"flex items-center space-x-3"},Ux={class:"text-gray-700"},jx={class:"mt-3 bg-gray-200 rounded-full h-2"},zx={key:1,class:"bg-white rounded-lg shadow-md"},Gx={class:"p-6 border-b border-gray-200"},Vx={class:"flex justify-between items-center flex-wrap gap-4"},Wx={class:"text-xl font-semibold text-gray-800"},qx={class:"overflow-x-auto"},Xx={class:"w-full"},Kx={class:"px-6 py-2 whitespace-nowrap text-sm text-center text-gray-900"},Yx=["title"],Jx={class:"px-6 py-2 whitespace-nowrap text-sm text-center text-gray-900"},Qx={key:0,class:"text-blue-500"},Zx={key:1,class:"font-medium"},tS={key:2,class:"text-red-500"},eS={class:"px-6 py-2 whitespace-nowrap text-center"},sS={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},iS={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},nS={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},rS={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oS={key:0,class:"flex space-x-1 justify-center"},aS=["onClick"],lS=["onClick"],cS=["onClick"],hS={key:1,class:"text-gray-400 text-xs"},dS=["title"],uS={class:"p-6 bg-gray-50 border-t border-gray-200"},fS={class:"text-sm text-gray-600"},pS={key:0},gS={key:2,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300"};jA(Dx({__name:"App",setup(n){try{ei.workerSrc="./assets/pdf.worker.min.js"}catch(M){ei.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js"}const t=Yi(null),e=Yi([]),s=Yi(!1),i=Yi(0),r=Yi(0),o=Yi(!1),l=Yi(""),c=Yi(null),h=Yi(null),d=ic(()=>e.value.filter(M=>!M.error&&!M.processing).length),u=ic(()=>e.value.filter(M=>M.error&&!M.processing).length),f=ic(()=>e.value.filter(M=>!M.error&&!M.processing&&M.pages!==null).reduce((M,G)=>M+G.pages,0)),p=ic(()=>{if(c.value&&h.value){const M=h.value-c.value;if(M<1e3)return`${M}`;if(M<6e4)return`${(M/1e3).toFixed(1)}`;{const G=Math.floor(M/6e4),L=(M%6e4/1e3).toFixed(1);return`${G}${L}`}}return null}),y=M=>V(null,null,function*(){const G=Array.from(M.target.files);G.length!==0&&(yield E(G))}),m=M=>V(null,null,function*(){M.preventDefault(),o.value=!1;const G=Array.from(M.dataTransfer.files).filter(L=>L.type==="application/pdf");if(G.length===0){tt("PDF");return}yield E(G)}),v=M=>{M.preventDefault()},A=M=>{M.preventDefault(),o.value=!0},x=M=>{M.preventDefault(),M.currentTarget.contains(M.relatedTarget)||(o.value=!1)},E=M=>V(null,null,function*(){s.value=!0,i.value=0,r.value=M.length,c.value=Date.now(),h.value=null;const G=[];for(let Tt=0;Tt<M.length;Tt++)G.push({filename:M[Tt].name,pages:null,error:null,id:Date.now()+Math.random()+Tt,processing:!0});e.value.push(...G);const L=3,B=[];for(let Tt=0;Tt<M.length;Tt+=L)B.push(M.slice(Tt,Tt+L));let lt=e.value.length-M.length;for(const Tt of B){const Ue=Tt.map((ue,Pt)=>V(null,null,function*(){const Mt=lt+B.indexOf(Tt)*L+Pt;try{const Xs=yield _(ue);e.value[Mt]=Bn(Ks({},e.value[Mt]),{pages:Xs,error:null,processing:!1}),i.value++}catch(Xs){e.value[Mt]=Bn(Ks({},e.value[Mt]),{pages:null,error:Xs.message,processing:!1}),i.value++}}));yield Promise.all(Ue)}s.value=!1,h.value=Date.now(),t.value&&(t.value.value="")}),_=M=>V(null,null,function*(){return new Promise((G,L)=>{const B=new FileReader;B.onload=function(){return V(this,null,function*(){try{const lt=new Uint8Array(this.result),Ue=yield c0({data:lt,disableFontFace:!0,disableStream:!0,disableRange:!0,stopAtErrors:!0}).promise;G(Ue.numPages)}catch(lt){L(new Error("PDF: "+lt.message))}})},B.onerror=function(){L(new Error(""))},B.readAsArrayBuffer(M)})}),T=M=>V(null,null,function*(){const L=`${M.filename.replace(/\.pdf$/i,"")}	${M.pages}`;try{yield navigator.clipboard.writeText(L),tt("")}catch(B){console.error(":",B)}}),P=M=>V(null,null,function*(){const G=M.filename.replace(/\.pdf$/i,"");try{yield navigator.clipboard.writeText(G),tt("")}catch(L){console.error(":",L)}}),k=M=>V(null,null,function*(){try{yield navigator.clipboard.writeText(M.pages.toString()),tt("")}catch(G){console.error(":",G)}}),D=()=>V(null,null,function*(){const M=e.value.filter(G=>!G.error&&!G.processing).map(G=>`${G.filename.replace(/\.pdf$/i,"")}: ${G.pages}`).join(`
`);try{yield navigator.clipboard.writeText(M),tt("")}catch(G){console.error(":",G)}}),I=()=>V(null,null,function*(){const M=e.value.filter(G=>!G.error&&!G.processing).map(G=>`${G.filename.replace(/\.pdf$/i,"")}	${G.pages}`).join(`
`);try{yield navigator.clipboard.writeText(M),tt("")}catch(G){console.error(":",G)}}),N=()=>V(null,null,function*(){const M=e.value.filter(G=>!G.error&&!G.processing).map(G=>G.filename.replace(/\.pdf$/i,"")).join(`
`);try{yield navigator.clipboard.writeText(M),tt("")}catch(G){console.error(":",G)}}),j=()=>V(null,null,function*(){const M=e.value.filter(G=>!G.error&&!G.processing).map(G=>G.pages.toString()).join(`
`);try{yield navigator.clipboard.writeText(M),tt("")}catch(G){console.error(":",G)}}),O=()=>{e.value=[],c.value=null,h.value=null},tt=M=>{l.value=M,setTimeout(()=>{l.value=""},3e3)};return(M,G)=>(xe(),De("div",Fx,[ht("div",Nx,[G[5]||(G[5]=ht("h1",{class:"text-3xl font-bold text-gray-800 mb-8 text-center"}," PDF  ",-1)),ht("div",Ox,[ht("div",{class:hd(["border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50":o.value}]),onDrop:m,onDragover:v,onDragenter:A,onDragleave:x},[ht("input",{ref_key:"fileInput",ref:t,type:"file",multiple:"",accept:".pdf",onChange:y,class:"hidden"},null,544),ht("div",Bx,[G[2]||(G[2]=ht("div",{class:"text-gray-400"},[ht("svg",{class:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[ht("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),ht("div",null,[ht("button",{onClick:G[0]||(G[0]=L=>M.$refs.fileInput.click()),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors"},"  PDF  "),G[1]||(G[1]=ht("p",{class:"text-gray-500 mt-2"},"",-1))])])],34)]),s.value?(xe(),De("div",Hx,[ht("div",$x,[G[3]||(G[3]=ht("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),ht("span",Ux,"... "+us(i.value)+"/"+us(r.value),1)]),ht("div",jx,[ht("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:cd({width:r.value>0?i.value/r.value*100+"%":"0%"})},null,4)])])):qr("",!0),e.value.length>0?(xe(),De("div",zx,[ht("div",Gx,[ht("div",Vx,[ht("h2",Wx,"  ("+us(e.value.length)+" ) ",1),ht("div",{class:"flex flex-wrap gap-2"},[ht("button",{onClick:D,class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded text-sm transition-colors",title:""},"  "),ht("button",{onClick:I,class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded text-sm transition-colors",title:""},"  "),ht("button",{onClick:N,class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded text-sm transition-colors",title:""},"  "),ht("button",{onClick:j,class:"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1.5 rounded text-sm transition-colors",title:""},"  "),ht("button",{onClick:O,class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded text-sm transition-colors",title:""},"  ")])])]),ht("div",qx,[ht("table",Xx,[G[4]||(G[4]=ht("thead",{class:"bg-gray-50"},[ht("tr",null,[ht("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"  "),ht("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"  "),ht("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"  "),ht("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"  "),ht("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"  ")])],-1)),Zs(FA,{name:"fade",tag:"tbody",class:"bg-white divide-y divide-gray-200"},{default:fm(()=>[(xe(!0),De(Ns,null,yv(e.value,(L,B)=>(xe(),De("tr",{key:L.id||B,class:"hover:bg-gray-50 transition-colors"},[ht("td",Kx,us(B+1),1),ht("td",{class:"px-6 py-2 text-sm text-gray-900 max-w-xs truncate",title:L.filename},us(L.filename),9,Yx),ht("td",Jx,[L.processing?(xe(),De("span",Qx,"...")):L.pages!==null?(xe(),De("span",Zx,us(L.pages),1)):(xe(),De("span",tS,"-"))]),ht("td",eS,[L.processing?(xe(),De("span",sS,"  ")):L.error?(xe(),De("span",iS,"  ")):(xe(),De("span",nS,"  "))]),ht("td",rS,[!L.error&&!L.processing?(xe(),De("div",oS,[ht("button",{onClick:lt=>T(L),class:"text-blue-600 hover:text-blue-900 transition-colors text-xs px-1.5 py-0.5 bg-blue-50 hover:bg-blue-100 rounded",title:""},"  ",8,aS),ht("button",{onClick:lt=>P(L),class:"text-green-600 hover:text-green-900 transition-colors text-xs px-1.5 py-0.5 bg-green-50 hover:bg-green-100 rounded",title:""},"  ",8,lS),ht("button",{onClick:lt=>k(L),class:"text-purple-600 hover:text-purple-900 transition-colors text-xs px-1.5 py-0.5 bg-purple-50 hover:bg-purple-100 rounded",title:""},"  ",8,cS)])):qr("",!0),L.processing?(xe(),De("span",hS,"")):qr("",!0),L.error?(xe(),De("span",{key:2,title:L.error,class:"text-red-500 cursor-help"},"",8,dS)):qr("",!0)])]))),128))]),_:1})])]),ht("div",uS,[ht("div",fS,[Jm(" "+us(e.value.length)+"  "+us(d.value)+"  "+us(u.value)+"  "+us(f.value)+" ",1),p.value?(xe(),De("span",pS," "+us(p.value),1)):qr("",!0)])])])):qr("",!0),l.value?(xe(),De("div",gS,us(l.value),1)):qr("",!0)])]))}},[["__scopeId","data-v-3474437b"]])).mount("#app")})();
